"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[7056],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>i});var t=s(96540);const r={},a=t.createContext(r);function l(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(a.Provider,{value:n},e.children)}},47276(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"mysql/Isolation Levels","title":"Isolation Levels","description":"Isolation levels in MySQL are one of the most important (but often confusing) parts of transactions. They directly control how multiple transactions interact with each other and what concurrency issues can occur.","source":"@site/docs/mysql/18. Isolation Levels.md","sourceDirName":"mysql","slug":"/mysql/Isolation Levels","permalink":"/handbook/docs/mysql/Isolation Levels","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19},"sidebar":"mysqlSidebar","previous":{"title":"ACID Properties","permalink":"/handbook/docs/mysql/ACID Properties"},"next":{"title":"User Management","permalink":"/handbook/docs/mysql/Database Security/User Management"}}');var r=s(74848),a=s(28453);const l={sidebar_position:19},i=void 0,c={},o=[{value:"MySQL Isolation Levels",id:"mysql-isolation-levels",level:2},{value:"READ UNCOMMITTED",id:"read-uncommitted",level:3},{value:"READ COMMITTED",id:"read-committed",level:3},{value:"REPEATABLE READ (MySQL Default)",id:"repeatable-read-mysql-default",level:3},{value:"SERIALIZABLE",id:"serializable",level:3},{value:"How to Set Isolation Level in MySQL",id:"how-to-set-isolation-level-in-mysql",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Isolation levels in MySQL are one of the most important (but often confusing) parts of transactions. They directly control how multiple transactions interact with each other and what concurrency issues can occur."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What is Isolation in Transactions?"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Isolation = how much one transaction is protected from the side effects of other concurrent transactions."}),"\n",(0,r.jsx)(n.li,{children:"MySQL implements this using Isolation Levels, which balance between performance (concurrency) and safety (consistency)."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Problems Isolation Levels Prevent"})}),"\n",(0,r.jsx)(n.p,{children:"When multiple transactions run at the same time, different anomalies may occur:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dirty Read"})," \u2192 Reading uncommitted changes from another transaction."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Non-Repeatable Read"})," \u2192 A row\u2019s value changes between two reads in the same transaction."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Phantom Read"})," \u2192 New rows appear/disappear in a range query between two reads."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"mysql-isolation-levels",children:"MySQL Isolation Levels"}),"\n",(0,r.jsx)(n.p,{children:"MySQL supports 4 standard isolation levels (SQL standard)."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Level"}),(0,r.jsx)(n.th,{children:"Dirty Read"}),(0,r.jsx)(n.th,{children:"Non-Repeatable Read"}),(0,r.jsx)(n.th,{children:"Phantom Read"}),(0,r.jsx)(n.th,{children:"Performance"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"READ UNCOMMITTED"})}),(0,r.jsx)(n.td,{children:"\u274c Allowed"}),(0,r.jsx)(n.td,{children:"\u274c Allowed"}),(0,r.jsx)(n.td,{children:"\u274c Allowed"}),(0,r.jsx)(n.td,{children:"\ud83d\udd25 Fastest (least safe)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"READ COMMITTED"})}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\u274c Allowed"}),(0,r.jsx)(n.td,{children:"\u274c Allowed"}),(0,r.jsx)(n.td,{children:"\u26a1 Fast"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"REPEATABLE READ"})," (default in MySQL InnoDB)"]}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\u274c Allowed (but handled by Next-Key Locks in InnoDB)"}),(0,r.jsx)(n.td,{children:"\u2696\ufe0f Balanced"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SERIALIZABLE"})}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\u2705 Prevented"}),(0,r.jsx)(n.td,{children:"\ud83d\udc0c Slowest (most safe)"})]})]})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Run each transaction in seperate terminal"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"read-uncommitted",children:"READ UNCOMMITTED"}),"\n",(0,r.jsx)(n.p,{children:"Transactions can see uncommitted changes made by others \u2192 dirty reads."}),"\n",(0,r.jsx)(n.p,{children:"Rarely used because it risks reading invalid data."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Transaction A\r\nSTART TRANSACTION;\r\nUPDATE accounts SET balance = balance - 1000 WHERE account_id = 1;\r\n\r\n-- Transaction B (before A commits)\r\nSELECT balance FROM accounts WHERE account_id = 1;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Transaction B might see Alice\u2019s balance reduced before A commits, even if A later ROLLBACKs \u2192 invalid data"}),"\n",(0,r.jsx)(n.h3,{id:"read-committed",children:"READ COMMITTED"}),"\n",(0,r.jsx)(n.p,{children:"A transaction only sees committed data."}),"\n",(0,r.jsx)(n.p,{children:"Prevents dirty reads"}),"\n",(0,r.jsx)(n.p,{children:"But allows non-repeatable reads."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Transaction A\r\nSTART TRANSACTION;\r\nSELECT balance FROM accounts WHERE account_id = 1; -- Alice = 5000\r\n\r\n-- Transaction B (commits)\r\nUPDATE accounts SET balance = balance - 1000 WHERE account_id = 1;\r\nCOMMIT;\r\n\r\n-- Transaction A reads again\r\nSELECT balance FROM accounts WHERE account_id = 1; -- Alice = 4000\n"})}),"\n",(0,r.jsx)(n.p,{children:"Same query in Transaction A gives different results \u2192 non-repeatable read."}),"\n",(0,r.jsx)(n.h3,{id:"repeatable-read-mysql-default",children:"REPEATABLE READ (MySQL Default)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Prevents dirty reads"}),"\n",(0,r.jsx)(n.li,{children:"Prevents non-repeatable reads"}),"\n",(0,r.jsx)(n.li,{children:"But phantom rows can appear in range queries."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Transaction A\r\nSTART TRANSACTION;\r\nSELECT * FROM accounts WHERE balance > 4000; -- Returns Alice\r\n\r\n-- Transaction B\r\nINSERT INTO accounts VALUES (3, 'Charlie', 4500);\r\nCOMMIT;\r\n\r\n-- Transaction A runs the same query\r\nSELECT * FROM accounts WHERE balance > 4000;\r\n-- Returns Alice + Charlie \u2192 Phantom row appeared\n"})}),"\n",(0,r.jsx)(n.p,{children:"InnoDB adds next-key locking to reduce phantom reads, but it can still occur depending on queries."}),"\n",(0,r.jsx)(n.h3,{id:"serializable",children:"SERIALIZABLE"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Highest isolation level."}),"\n",(0,r.jsx)(n.li,{children:"Transactions are executed as if they run one after another (sequentially)."}),"\n",(0,r.jsx)(n.li,{children:"Prevents dirty reads, non-repeatable reads, phantom reads."}),"\n",(0,r.jsx)(n.li,{children:"But slow \u2192 causes locking and reduces concurrency."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;\r\n\r\nSTART TRANSACTION;\r\nSELECT * FROM accounts WHERE balance > 4000;\n"})}),"\n",(0,r.jsx)(n.p,{children:"If another transaction tries to insert/update rows that affect this query, it must wait until the first one commits."}),"\n",(0,r.jsx)(n.h2,{id:"how-to-set-isolation-level-in-mysql",children:"How to Set Isolation Level in MySQL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Session level (only for current connection)\r\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\r\n\r\n-- Global level (affects all new connections)\r\nSET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Check current level:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT @@transaction_isolation;\n"})}),"\n",(0,r.jsx)(n.p,{children:"In practice:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MySQL default = REPEATABLE READ (best tradeoff)."}),"\n",(0,r.jsx)(n.li,{children:"Banking systems \u2192 SERIALIZABLE for maximum safety."}),"\n",(0,r.jsx)(n.li,{children:"High-performance apps \u2192 READ COMMITTED for speed with acceptable risks."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);