"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[1991],{4011(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"mysql/Advance Features/JSON","title":"JSON","description":"With MySQL, you can:","source":"@site/docs/mysql/21. Advance Features/4. JSON.md","sourceDirName":"mysql/21. Advance Features","slug":"/mysql/Advance Features/JSON","permalink":"/handbook/docs/mysql/Advance Features/JSON","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"mysqlSidebar","previous":{"title":"Common Table Expressions","permalink":"/handbook/docs/mysql/Advance Features/Common Table Expressions"},"next":{"title":"Replication","permalink":"/handbook/docs/mysql/Replication"}}');var a=s(74848),l=s(28453);const i={},d=void 0,t={},c=[{value:"Creating a Table with JSON Column",id:"creating-a-table-with-json-column",level:2},{value:"Inserting JSON Data",id:"inserting-json-data",level:2},{value:"Querying JSON Data",id:"querying-json-data",level:2},{value:"Searching Inside JSON",id:"searching-inside-json",level:2},{value:"Modifying JSON Data",id:"modifying-json-data",level:2},{value:"Advanced JSON Queries",id:"advanced-json-queries",level:2},{value:"Indexing JSON Data for Performance",id:"indexing-json-data-for-performance",level:2}];function o(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"With MySQL, you can:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Store JSON documents inside a column."}),"\n",(0,a.jsx)(n.li,{children:"Validate them automatically (only valid JSON is allowed)."}),"\n",(0,a.jsx)(n.li,{children:"Query and manipulate JSON data using built-in JSON functions."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"JSON is useful when working with semi-structured or flexible data (e.g., logs, configurations, API responses, NoSQL-like use cases)."}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-table-with-json-column",children:"Creating a Table with JSON Column"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE products (\r\n    id INT AUTO_INCREMENT PRIMARY KEY,\r\n    name VARCHAR(100),\r\n    details JSON\r\n);\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"details"})," column will store JSON objects, arrays, or values.\r\nIf you try inserting invalid JSON, MySQL will throw an error."]}),"\n",(0,a.jsx)(n.h2,{id:"inserting-json-data",children:"Inserting JSON Data"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"INSERT INTO products (name, details) VALUES\r\n('Laptop', JSON_OBJECT('brand', 'Dell', 'specs', JSON_ARRAY('i7', '16GB RAM', '512GB SSD'))),\r\n('Phone', '{\"brand\": \"Samsung\", \"model\": \"S23\", \"features\": [\"5G\", \"AMOLED\", \"128GB\"]}');\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"JSON_OBJECT()"})," creates a JSON object."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"JSON_ARRAY()"})," creates a JSON array."]}),"\n",(0,a.jsxs)(n.li,{children:["You can also insert a JSON string directly (",(0,a.jsx)(n.code,{children:'\'{"brand":"Samsung"}\''}),")."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"MySQL will validate the format before storing it."}),"\n",(0,a.jsx)(n.h2,{id:"querying-json-data",children:"Querying JSON Data"}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"->"})," and ",(0,a.jsx)(n.code,{children:"->>"})," operators:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"->"})," returns JSON value."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"->>"})," returns unquoted scalar value (string, number)."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT\r\n    name,\r\n    details->'$.brand' AS brand_json,\r\n    details->>'$.brand' AS brand_text\r\nFROM products;\n"})}),"\n",(0,a.jsx)(n.p,{children:"Output might look like"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"SELECT\r\n    name,\r\n    details->'$.brand' AS brand_json,\r\n    details->>'$.brand' AS brand_text\r\nFROM products;\n"})}),"\n",(0,a.jsx)(n.h2,{id:"searching-inside-json",children:"Searching Inside JSON"}),"\n",(0,a.jsx)(n.p,{children:'Find products with "brand" = "Samsung":'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM products\r\nWHERE JSON_EXTRACT(details, '$.brand') = 'Samsung';\n"})}),"\n",(0,a.jsx)(n.p,{children:"or shorter:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM products\r\nWHERE details->>'$.brand' = 'Samsung';\n"})}),"\n",(0,a.jsx)(n.h2,{id:"modifying-json-data",children:"Modifying JSON Data"}),"\n",(0,a.jsx)(n.p,{children:"Add or Update a key"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"UPDATE products\r\nSET details = JSON_SET(details, '$.warranty', '2 years')\r\nWHERE name = 'Laptop';\n"})}),"\n",(0,a.jsx)(n.p,{children:"Remove a key"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"UPDATE products\r\nSET details = JSON_REMOVE(details, '$.features[2]')\r\nWHERE name = 'Phone';\n"})}),"\n",(0,a.jsx)(n.p,{children:"This removes the 3rd element from the features array"}),"\n",(0,a.jsx)(n.h2,{id:"advanced-json-queries",children:"Advanced JSON Queries"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Filtering based on array contents"})}),"\n",(0,a.jsx)(n.p,{children:'Find all products that have "5G" in their features:'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM products\r\nWHERE JSON_CONTAINS(details->'$.features', '\"5G\"');\n"})}),"\n",(0,a.jsx)(n.p,{children:"Merging JSON objects"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_MERGE_PRESERVE(\r\n    \'{"brand": "Dell"}\',\r\n    \'{"color": "Silver"}\'\r\n) AS merged;\n'})}),"\n",(0,a.jsx)(n.p,{children:"Result:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{ "brand": "Dell", "color": "Silver" }\n'})}),"\n",(0,a.jsx)(n.h2,{id:"indexing-json-data-for-performance",children:"Indexing JSON Data for Performance"}),"\n",(0,a.jsx)(n.p,{children:"Since JSON is stored as text internally, queries can be slow on large datasets.\r\nMySQL allows you to create generated (virtual) columns from JSON values and index them."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"ALTER TABLE products\r\nADD brand VARCHAR(50) GENERATED ALWAYS AS (details->>'$.brand') STORED,\r\nADD INDEX idx_brand (brand);\n"})}),"\n",(0,a.jsx)(n.p,{children:"Now queries like:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM products WHERE brand = 'Samsung';\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>d});var r=s(96540);const a={},l=r.createContext(a);function i(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);