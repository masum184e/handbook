"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[13341],{22682(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"prisma/With  GraphQL","title":"With  GraphQL","description":"Prisma is database-agnostic and works as a type-safe database client, which makes it ideal for GraphQL servers.","source":"@site/docs/prisma/14. With  GraphQL.md","sourceDirName":"prisma","slug":"/prisma/With  GraphQL","permalink":"/handbook/docs/prisma/With  GraphQL","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"prismaApiSidebar","previous":{"title":"Introspection","permalink":"/handbook/docs/prisma/Introspection"},"next":{"title":"Deployment","permalink":"/handbook/docs/prisma/Deployment"}}');var t=r(74848),i=r(28453);const a={sidebar_position:14},o=void 0,l={},c=[{value:"Key Tools",id:"key-tools",level:2},{value:"Example Workflow With GraphQL",id:"example-workflow-with-graphql",level:2}];function p(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Prisma is database-agnostic and works as a type-safe database client, which makes it ideal for GraphQL servers."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"GraphQL handles API queries/mutations."}),"\n",(0,t.jsx)(n.li,{children:"Prisma handles database access with type-safe queries."}),"\n",(0,t.jsx)(n.li,{children:"Nexus can be used to define GraphQL schema in code, integrating seamlessly with Prisma."}),"\n",(0,t.jsx)(n.li,{children:"Apollo Server exposes the GraphQL API over HTTP."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Client \u2192 GraphQL Query \u2192 Apollo Server \u2192 Prisma Client \u2192 Database \u2192 Response\n"})}),"\n",(0,t.jsx)(n.h2,{id:"key-tools",children:"Key Tools"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Apollo Server","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Popular GraphQL server for Node.js."}),"\n",(0,t.jsx)(n.li,{children:"Handles GraphQL queries, mutations, and subscriptions."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Nexus","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Code-first GraphQL schema builder for TypeScript/Node.js."}),"\n",(0,t.jsx)(n.li,{children:"Automatically generates schema and types."}),"\n",(0,t.jsx)(n.li,{children:"Works well with Prisma Client for resolvers."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Prisma Client","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Acts as the database layer."}),"\n",(0,t.jsx)(n.li,{children:"Fully type-safe and integrates with GraphQL resolvers."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-workflow-with-graphql",children:"Example Workflow With GraphQL"}),"\n",(0,t.jsx)(n.p,{children:"Install Packages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install @prisma/client prisma apollo-server graphql nexus\n"})}),"\n",(0,t.jsx)(n.p,{children:"Define GraphQL Schema Using Nexus"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// schema.ts\r\nimport { objectType, queryType, mutationType, makeSchema } from "nexus";\r\nimport { join } from "path";\r\nimport { PrismaClient } from "@prisma/client";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// GraphQL Types\r\nconst User = objectType({\r\n  name: "User",\r\n  definition(t) {\r\n    t.int("id");\r\n    t.string("name");\r\n    t.string("email");\r\n    t.list.field("posts", { type: "Post" });\r\n  },\r\n});\r\n\r\nconst Post = objectType({\r\n  name: "Post",\r\n  definition(t) {\r\n    t.int("id");\r\n    t.string("title");\r\n    t.string("content", { nullable: true });\r\n    t.boolean("published");\r\n    t.field("author", { type: "User" });\r\n  },\r\n});\r\n\r\n// Queries\r\nconst Query = queryType({\r\n  definition(t) {\r\n    t.list.field("users", {\r\n      type: "User",\r\n      resolve: () => prisma.user.findMany({ include: { posts: true } }),\r\n    });\r\n\r\n    t.list.field("posts", {\r\n      type: "Post",\r\n      resolve: () => prisma.post.findMany({ include: { author: true } }),\r\n    });\r\n  },\r\n});\r\n\r\n// Mutations\r\nconst Mutation = mutationType({\r\n  definition(t) {\r\n    t.field("createUser", {\r\n      type: "User",\r\n      args: { name: "String", email: "String" },\r\n      resolve: (_, { name, email }) =>\r\n        prisma.user.create({ data: { name, email } }),\r\n    });\r\n\r\n    t.field("createPost", {\r\n      type: "Post",\r\n      args: { title: "String", content: "String", authorId: "Int" },\r\n      resolve: (_, { title, content, authorId }) =>\r\n        prisma.post.create({ data: { title, content, authorId } }),\r\n    });\r\n  },\r\n});\r\n\r\n// Make Schema\r\nexport const schema = makeSchema({\r\n  types: [User, Post, Query, Mutation],\r\n  outputs: {\r\n    schema: join(process.cwd(), "schema.graphql"),\r\n    typegen: join(process.cwd(), "nexus-typegen.ts"),\r\n  },\r\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Setup Apollo Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// server.ts\r\nimport { ApolloServer } from "apollo-server";\r\nimport { schema } from "./schema";\r\n\r\nconst server = new ApolloServer({ schema });\r\n\r\nserver.listen().then(({ url }) => {\r\n  console.log(`Server running at ${url}`);\r\n});\n'})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453(e,n,r){r.d(n,{R:()=>a,x:()=>o});var s=r(96540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);