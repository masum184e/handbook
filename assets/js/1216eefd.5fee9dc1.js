"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[5383],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>c});var r=s(96540);const d={},i=r.createContext(d);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},55231(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"mysql/Advanced SQL Statements","title":"Advanced SQL Statements","description":"SQL processes queries in this logical order:","source":"@site/docs/mysql/10. Advanced SQL Statements.md","sourceDirName":"mysql","slug":"/mysql/Advanced SQL Statements","permalink":"/handbook/docs/mysql/Advanced SQL Statements","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"mysqlSidebar","previous":{"title":"SQL Statements","permalink":"/handbook/docs/mysql/SQL Statements"},"next":{"title":"Indexing","permalink":"/handbook/docs/mysql/Indexing"}}');var d=s(74848),i=s(28453);const l={sidebar_position:11},c=void 0,t={},h=[{value:"Aggregate Functions",id:"aggregate-functions",level:2},{value:"Common Aggregate Functions",id:"common-aggregate-functions",level:3},{value:"General Syntax",id:"general-syntax",level:3},{value:"Example",id:"example",level:3},{value:"Grouping Data",id:"grouping-data",level:2},{value:"General Syntax",id:"general-syntax-1",level:3},{value:"Example",id:"example-1",level:3},{value:"Key Points to Remember for <code>GROUP BY</code>",id:"key-points-to-remember-for-group-by",level:3},{value:"Filtering Groups",id:"filtering-groups",level:2},{value:"Syntax of <code>HAVING</code>",id:"syntax-of-having",level:3},{value:"Example of <code>HAVING</code>",id:"example-of-having",level:3},{value:"<code>HAVING</code> without <code>GROUP BY</code>",id:"having-without-group-by",level:3},{value:"Multiple Conditions in <code>HAVING</code>",id:"multiple-conditions-in-having",level:3},{value:"<code>WHERE</code> vs <code>HAVING</code>",id:"where-vs-having",level:3},{value:"Join",id:"join",level:2},{value:"Types of Joins",id:"types-of-joins",level:3},{value:"Example Tables for Join",id:"example-tables-for-join",level:3},{value:"INNER JOIN",id:"inner-join",level:3},{value:"LEFT JOIN",id:"left-join",level:3},{value:"RIGHT JOIN",id:"right-join",level:3},{value:"FULL OUTER JOIN",id:"full-outer-join",level:3},{value:"Visual Summary",id:"visual-summary",level:3},{value:"Subquery (Nested Query)",id:"subquery-nested-query",level:2},{value:"Types of Subqueries",id:"types-of-subqueries",level:3},{value:"Single-row Subquery",id:"single-row-subquery",level:4},{value:"Multi-row Subquery",id:"multi-row-subquery",level:4},{value:"Correlated Subquery",id:"correlated-subquery",level:4},{value:"Subqueries in Different Clauses",id:"subqueries-in-different-clauses",level:3},{value:"Subquery vs Join",id:"subquery-vs-join",level:3},{value:"<code>UNION</code> in MySQL",id:"union-in-mysql",level:2},{value:"Example of <code>UNION</code>",id:"example-of-union",level:3},{value:"<code>INTERSECT</code> in MySQL",id:"intersect-in-mysql",level:2},{value:"Example of <code>INTERSECT</code>",id:"example-of-intersect",level:3},{value:"Comparing <code>UNION</code> vs <code>INTERSECT</code>",id:"comparing-union-vs-intersect",level:3},{value:"Example of <code>UNION</code> and <code>INTERSECT</code>",id:"example-of-union-and-intersect",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"SQL processes queries in this logical order:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"FROM"})," \u2192 get the data sources."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"WHERE"})," \u2192 filter individual rows."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GROUP BY"})," \u2192 group rows."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"HAVING"})," \u2192 filter groups."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"SELECT"})," \u2192 calculate aggregates and select columns."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"ORDER BY"})," \u2192 sort the result set."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"LIMIT"})," / ",(0,d.jsx)(n.code,{children:"OFFSET"})," (or ",(0,d.jsx)(n.code,{children:"FETCH FIRST N ROWS"}),") \u2192 return only a subset of rows."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"aggregate-functions",children:"Aggregate Functions"}),"\n",(0,d.jsx)(n.p,{children:"Aggregate functions in SQL are functions that perform calculations on multiple rows of data and return a single value."}),"\n",(0,d.jsxs)(n.p,{children:["They are often used with the ",(0,d.jsx)(n.code,{children:"GROUP BY"})," clause to perform calculations on grouped data."]}),"\n",(0,d.jsx)(n.h3,{id:"common-aggregate-functions",children:"Common Aggregate Functions"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Function"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"COUNT()"})}),(0,d.jsx)(n.td,{children:"Counts the number of rows (or non-NULL values if column is specified)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SUM()"})}),(0,d.jsx)(n.td,{children:"Calculates the total of a numeric column"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"AVG()"})}),(0,d.jsx)(n.td,{children:"Calculates the average of a numeric column"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MIN()"})}),(0,d.jsx)(n.td,{children:"Finds the smallest value in a column"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MAX()"})}),(0,d.jsx)(n.td,{children:"Finds the largest value in a column"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"general-syntax",children:"General Syntax"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT AGGREGATE_FUNCTION(column_name)\r\nFROM table_name\r\nWHERE condition;\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Can be combined with ",(0,d.jsx)(n.code,{children:"GROUP BY"})," to apply per group."]}),"\n",(0,d.jsxs)(n.li,{children:["Can be combined with ",(0,d.jsx)(n.code,{children:"HAVING"})," to filter groups based on aggregated values."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"order_id"}),(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"quantity"}),(0,d.jsx)(n.th,{children:"price"}),(0,d.jsx)(n.th,{children:"order_date"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"1000"}),(0,d.jsx)(n.td,{children:"2025-08-01"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"25"}),(0,d.jsx)(n.td,{children:"2025-08-01"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"45"}),(0,d.jsx)(n.td,{children:"2025-08-02"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"C003"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"950"}),(0,d.jsx)(n.td,{children:"2025-08-02"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"5"}),(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"25"}),(0,d.jsx)(n.td,{children:"2025-08-03"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Problem:"})," For each customer, how many orders have they placed, and how many total items have they bought?"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id,\r\n       COUNT(*) AS total_orders,\r\n       SUM(quantity) AS total_items\r\nFROM orders\r\nGROUP BY customer_id;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Output"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"total_orders"}),(0,d.jsx)(n.th,{children:"total_items"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"2"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"5"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C003"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Aggregate functions always return one value per group."}),"\n",(0,d.jsx)(n.li,{children:"You cannot pass multiple columns into a single aggregate directly."}),"\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"CASE"})," expressions inside aggregates for conditional calculations."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Total Revenue per Customer"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id,\r\n       SUM(quantity * price) AS total_revenue\r\nFROM orders\r\nGROUP BY customer_id;\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Count Products Separately"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id,\r\n       SUM(CASE WHEN product = 'Laptop' THEN quantity ELSE 0 END) AS total_laptops,\r\n       SUM(CASE WHEN product = 'Mouse' THEN quantity ELSE 0 END) AS total_mice\r\nFROM orders\r\nGROUP BY customer_id;\n"})}),"\n",(0,d.jsx)(n.h2,{id:"grouping-data",children:"Grouping Data"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"GROUP BY"})," in SQL is used to arrange identical data into groups so you can apply aggregate functions (like ",(0,d.jsx)(n.code,{children:"COUNT"}),", ",(0,d.jsx)(n.code,{children:"SUM"}),", ",(0,d.jsx)(n.code,{children:"AVG"}),", ",(0,d.jsx)(n.code,{children:"MIN"}),", ",(0,d.jsx)(n.code,{children:"MAX"}),") on each group separately."]}),"\n",(0,d.jsx)(n.p,{children:"Think of it as saying: Take all the rows, group them based on this column (or set of columns), and then summarize each group."}),"\n",(0,d.jsx)(n.h3,{id:"general-syntax-1",children:"General Syntax"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT column1, AGGREGATE_FUNCTION(column2)\r\nFROM table_name\r\nWHERE condition\r\nGROUP BY column1;\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Every column in ",(0,d.jsx)(n.code,{children:"SELECT"})," that is not inside an aggregate function must be listed in ",(0,d.jsx)(n.code,{children:"GROUP BY"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GROUP BY"})," comes after ",(0,d.jsx)(n.code,{children:"WHERE"})," but before ",(0,d.jsx)(n.code,{children:"HAVING"})," and ",(0,d.jsx)(n.code,{children:"ORDER BY"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"order_id"}),(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"quantity"}),(0,d.jsx)(n.th,{children:"price"}),(0,d.jsx)(n.th,{children:"order_date"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"1000"}),(0,d.jsx)(n.td,{children:"2025-08-01"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"25"}),(0,d.jsx)(n.td,{children:"2025-08-01"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"45"}),(0,d.jsx)(n.td,{children:"2025-08-02"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"C003"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"950"}),(0,d.jsx)(n.td,{children:"2025-08-02"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"5"}),(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"25"}),(0,d.jsx)(n.td,{children:"2025-08-03"})]})]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, COUNT(*) AS total_orders\r\nFROM orders\r\nGROUP BY customer_id;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Output:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"total_orders"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C001"}),(0,d.jsx)(n.td,{children:"2"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"2"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C003"}),(0,d.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"GROUP BY customer_id"})," \u2192 All rows with the same ",(0,d.jsx)(n.code,{children:"customer_id"})," are combined into one group."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"COUNT(*)"})," counts how many orders are in each group"]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"key-points-to-remember-for-group-by",children:["Key Points to Remember for ",(0,d.jsx)(n.code,{children:"GROUP BY"})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"GROUP BY"})," when you want one row per group instead of one row per record."]}),"\n",(0,d.jsxs)(n.li,{children:["All non-aggregated columns in ",(0,d.jsx)(n.code,{children:"SELECT"})," must be in ",(0,d.jsx)(n.code,{children:"GROUP BY"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"HAVING"})," is for group-level filtering; ",(0,d.jsx)(n.code,{children:"WHERE"})," is for row-level filtering."]}),"\n",(0,d.jsx)(n.li,{children:"You can group by multiple columns or expressions."}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"filtering-groups",children:"Filtering Groups"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"HAVING"})," is used to filter groups after aggregation has happened. It works with ",(0,d.jsx)(n.code,{children:"GROUP BY"})," and aggregate functions like ",(0,d.jsx)(n.code,{children:"COUNT"}),", ",(0,d.jsx)(n.code,{children:"SUM"}),", ",(0,d.jsx)(n.code,{children:"AVG"}),", ",(0,d.jsx)(n.code,{children:"MIN"}),", ",(0,d.jsx)(n.code,{children:"MAX"}),". ",(0,d.jsx)(n.code,{children:"WHERE"})," filters rows before grouping, while ",(0,d.jsx)(n.code,{children:"HAVING"})," filters aggregated results after grouping."]}),"\n",(0,d.jsxs)(n.h3,{id:"syntax-of-having",children:["Syntax of ",(0,d.jsx)(n.code,{children:"HAVING"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT column1, AGGREGATE_FUNCTION(column2)\r\nFROM table_name\r\nWHERE row_condition\r\nGROUP BY column1\r\nHAVING aggregate_condition\r\nORDER BY column1;\n"})}),"\n",(0,d.jsxs)(n.h3,{id:"example-of-having",children:["Example of ",(0,d.jsx)(n.code,{children:"HAVING"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Why not use WHERE?"})}),"\n",(0,d.jsx)(n.p,{children:"Let\u2019s say we want to find customers who ordered more than 2 items total."}),"\n",(0,d.jsx)(n.p,{children:"This fails:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, SUM(quantity)\r\nFROM orders\r\nWHERE SUM(quantity) > 2   -- \u274c INVALID: WHERE cannot use aggregates\r\nGROUP BY customer_id;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Because SUM(quantity) doesn\u2019t exist until after grouping."}),"\n",(0,d.jsx)(n.p,{children:"This works:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, SUM(quantity) AS total_items\r\nFROM orders\r\nGROUP BY customer_id\r\nHAVING SUM(quantity) > 2;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Output:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"total_items"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"C002"}),(0,d.jsx)(n.td,{children:"5"})]})})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Explanation"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Group orders by customer_id."}),"\n",(0,d.jsx)(n.li,{children:"Calculate SUM(quantity) for each group."}),"\n",(0,d.jsx)(n.li,{children:"Keep only groups where SUM(quantity) > 2."}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"having-without-group-by",children:[(0,d.jsx)(n.code,{children:"HAVING"})," without ",(0,d.jsx)(n.code,{children:"GROUP BY"})]}),"\n",(0,d.jsxs)(n.p,{children:["You can use ",(0,d.jsx)(n.code,{children:"HAVING"})," without ",(0,d.jsx)(n.code,{children:"GROUP BY"}),". In that case, it treats the entire table as one group."]}),"\n",(0,d.jsx)(n.p,{children:"Example: Find if total sales exceed 2000:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT SUM(quantity * price) AS total_sales\r\nFROM orders\r\nHAVING SUM(quantity * price) > 2000;\n"})}),"\n",(0,d.jsxs)(n.p,{children:["It will show ",(0,d.jsx)(n.code,{children:"total_sales"})," is ",(0,d.jsx)(n.code,{children:"2120"}),".."]}),"\n",(0,d.jsxs)(n.h3,{id:"multiple-conditions-in-having",children:["Multiple Conditions in ",(0,d.jsx)(n.code,{children:"HAVING"})]}),"\n",(0,d.jsx)(n.p,{children:"You can filter on more than one aggregate condition."}),"\n",(0,d.jsx)(n.p,{children:"Example: Customers who ordered more than 2 items and placed at least 2 orders:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id,\r\n       COUNT(order_id) AS order_count,\r\n       SUM(quantity) AS total_items\r\nFROM orders\r\nGROUP BY customer_id\r\nHAVING SUM(quantity) > 2\r\n   AND COUNT(order_id) >= 2;\n"})}),"\n",(0,d.jsxs)(n.h3,{id:"where-vs-having",children:[(0,d.jsx)(n.code,{children:"WHERE"})," vs ",(0,d.jsx)(n.code,{children:"HAVING"})]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Feature"}),(0,d.jsx)(n.th,{children:"WHERE"}),(0,d.jsx)(n.th,{children:"HAVING"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:["Filters ",(0,d.jsx)(n.strong,{children:"rows"})]}),(0,d.jsx)(n.td,{children:"\u2705 Yes"}),(0,d.jsx)(n.td,{children:"\u274c No"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:["Filters ",(0,d.jsx)(n.strong,{children:"groups"})]}),(0,d.jsx)(n.td,{children:"\u274c No"}),(0,d.jsx)(n.td,{children:"\u2705 Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Can use aggregates"}),(0,d.jsx)(n.td,{children:"\u274c No"}),(0,d.jsx)(n.td,{children:"\u2705 Yes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Executes"}),(0,d.jsx)(n.td,{children:"Before grouping"}),(0,d.jsx)(n.td,{children:"After grouping"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"join",children:"Join"}),"\n",(0,d.jsx)(n.p,{children:"A JOIN combines rows from two or more tables based on a related column (usually a foreign key relationship)."}),"\n",(0,d.jsx)(n.p,{children:"You tell SQL:"}),"\n",(0,d.jsx)(n.p,{children:"Match rows from these tables where a specific condition is true, and return the combined data."}),"\n",(0,d.jsx)(n.h3,{id:"types-of-joins",children:"Types of Joins"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Join Type"}),(0,d.jsx)(n.th,{children:"Returns\u2026"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"INNER JOIN"})}),(0,d.jsxs)(n.td,{children:["Only rows where there\u2019s a match in ",(0,d.jsx)(n.strong,{children:"both"})," tables"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"LEFT JOIN"})}),(0,d.jsxs)(n.td,{children:["All rows from the ",(0,d.jsx)(n.strong,{children:"left"})," table, plus matched rows from the right (NULL if no match)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"RIGHT JOIN"})}),(0,d.jsxs)(n.td,{children:["All rows from the ",(0,d.jsx)(n.strong,{children:"right"})," table, plus matched rows from the left (NULL if no match)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"FULL OUTER JOIN"})}),(0,d.jsxs)(n.td,{children:["All rows from ",(0,d.jsx)(n.strong,{children:"both"})," tables, matched where possible, NULL where no match"]})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"example-tables-for-join",children:"Example Tables for Join"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"customers"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"name"}),(0,d.jsx)(n.th,{children:"country"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"USA"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Bob"}),(0,d.jsx)(n.td,{children:"UK"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Charlie"}),(0,d.jsx)(n.td,{children:"Canada"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"Diana"}),(0,d.jsx)(n.td,{children:"USA"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"orders"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"order_id"}),(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"amount"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"101"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"102"}),(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"25"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"103"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"45"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"104"}),(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Monitor"}),(0,d.jsx)(n.td,{children:"200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"105"}),(0,d.jsx)(n.td,{children:"5"}),(0,d.jsx)(n.td,{children:"Desk Chair"}),(0,d.jsx)(n.td,{children:"150"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Use the smallest dataset first."}),"\n",(0,d.jsx)(n.h3,{id:"inner-join",children:"INNER JOIN"}),"\n",(0,d.jsx)(n.p,{children:"Returns only customers who have orders."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name, o.product, o.amount\r\nFROM customers c\r\nINNER JOIN orders o\r\n    ON c.customer_id = o.customer_id;\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"name"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"amount"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"45"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Bob"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"25"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Charlie"}),(0,d.jsx)(n.td,{children:"Monitor"}),(0,d.jsx)(n.td,{children:"200"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"INNER JOIN"})," only includes rows where ",(0,d.jsx)(n.code,{children:"customer_id"})," exists in both ",(0,d.jsx)(n.code,{children:"customers"})," and ",(0,d.jsx)(n.code,{children:"orders"}),"."]}),"\n",(0,d.jsx)(n.li,{children:"Diana is excluded (no order), and order 105 is excluded (customer_id=5 not in customers)."}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"left-join",children:"LEFT JOIN"}),"\n",(0,d.jsx)(n.p,{children:"Returns all customers, plus their orders if any."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name, o.product, o.amount\r\nFROM customers c\r\nLEFT JOIN orders o\r\n    ON c.customer_id = o.customer_id;\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"name"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"amount"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"45"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Bob"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"25"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Charlie"}),(0,d.jsx)(n.td,{children:"Monitor"}),(0,d.jsx)(n.td,{children:"200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"Diana"}),(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"NULL"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Diana shows up with ",(0,d.jsx)(n.code,{children:"NULL"})," values for ",(0,d.jsx)(n.code,{children:"product"})," and ",(0,d.jsx)(n.code,{children:"amount"})," because she has no orders."]}),"\n",(0,d.jsx)(n.li,{children:"This is useful when you want all left-side records regardless of matches."}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"right-join",children:"RIGHT JOIN"}),"\n",(0,d.jsx)(n.p,{children:"Returns all orders, plus customer details if any."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name, o.product, o.amount\r\nFROM customers c\r\nRIGHT JOIN orders o\r\n    ON c.customer_id = o.customer_id;\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"name"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"amount"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"45"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Bob"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"25"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Charlie"}),(0,d.jsx)(n.td,{children:"Monitor"}),(0,d.jsx)(n.td,{children:"200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"Desk Chair"}),(0,d.jsx)(n.td,{children:"150"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Order 105 appears, but since ",(0,d.jsx)(n.code,{children:"customer_id=5"})," doesn\u2019t exist in ",(0,d.jsx)(n.code,{children:"customers"}),", customer details are NULL."]}),"\n",(0,d.jsxs)(n.li,{children:["This is essentially the mirror of ",(0,d.jsx)(n.code,{children:"LEFT JOIN"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"full-outer-join",children:"FULL OUTER JOIN"}),"\n",(0,d.jsx)(n.p,{children:"Returns all customers and all orders, matched where possible."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name, o.product, o.amount\r\nFROM customers c\r\nFULL OUTER JOIN orders o\r\n    ON c.customer_id = o.customer_id;\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"customer_id"}),(0,d.jsx)(n.th,{children:"name"}),(0,d.jsx)(n.th,{children:"product"}),(0,d.jsx)(n.th,{children:"amount"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Laptop"}),(0,d.jsx)(n.td,{children:"1200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Alice"}),(0,d.jsx)(n.td,{children:"Keyboard"}),(0,d.jsx)(n.td,{children:"45"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2"}),(0,d.jsx)(n.td,{children:"Bob"}),(0,d.jsx)(n.td,{children:"Mouse"}),(0,d.jsx)(n.td,{children:"25"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Charlie"}),(0,d.jsx)(n.td,{children:"Monitor"}),(0,d.jsx)(n.td,{children:"200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"Diana"}),(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"NULL"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"NULL"}),(0,d.jsx)(n.td,{children:"Desk Chair"}),(0,d.jsx)(n.td,{children:"150"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Combines the results of ",(0,d.jsx)(n.code,{children:"LEFT JOIN"})," and ",(0,d.jsx)(n.code,{children:"RIGHT JOIN"}),"."]}),"\n",(0,d.jsx)(n.li,{children:"Shows unmatched customers (like Diana) and unmatched orders (like Desk Chair)."}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:""}),"\n",(0,d.jsxs)(n.p,{children:["Always use explicit ",(0,d.jsx)(n.code,{children:"JOIN"})," conditions, not implicit joins via the ",(0,d.jsx)(n.code,{children:"WHERE"})," clause."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- Avoid implicit join in WHERE clause:\r\nSELECT orders.order_id, customers.customer_name\r\nFROM orders, customers\r\nWHERE orders.customer_id = customers.customer_id;\r\n\r\n-- Use explicit JOIN instead:\r\nSELECT orders.order_id, customers.customer_name\r\nFROM orders\r\nJOIN customers ON orders.customer_id = customers.customer_id;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Implicit join will return a Cartesian product, meaning every order will be combined with every customer, which could lead to a massive number of rows in the result set if the tables are large."}),"\n",(0,d.jsx)(n.h3,{id:"visual-summary",children:"Visual Summary"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:" INNER JOIN:        LEFT JOIN:         RIGHT JOIN:        FULL OUTER JOIN:\r\n\r\n  A \u2229 B             A \u2283 (A \u2229 B)        (A \u2229 B) \u2282 B        A \u222a B\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"INNER JOIN"})," \u2192 Only the overlap"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"LEFT JOIN"})," \u2192 Everything from left table + matches"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"RIGHT JOIN"})," \u2192 Everything from right table + matches"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"FULL OUTER JOIN"})," \u2192 Everything from both tabl"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"subquery-nested-query",children:"Subquery (Nested Query)"}),"\n",(0,d.jsx)(n.p,{children:"A Subquery is a query inside another query."}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["It is enclosed in parentheses ",(0,d.jsx)(n.code,{children:"( )"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["It can appear in the ",(0,d.jsx)(n.code,{children:"SELECT"}),", ",(0,d.jsx)(n.code,{children:"FROM"}),", ",(0,d.jsx)(n.code,{children:"WHERE"}),", or ",(0,d.jsx)(n.code,{children:"HAVING"})," clauses."]}),"\n",(0,d.jsx)(n.li,{children:"The main query (outer query) uses the result of the subquery (inner query)."}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"When to Use Subqueries?"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"To break complex problems into smaller, manageable queries."}),"\n",(0,d.jsx)(n.li,{children:"When joins are not straightforward."}),"\n",(0,d.jsx)(n.li,{children:"To check existence (EXISTS), compare aggregates, or filter with conditions."}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"types-of-subqueries",children:"Types of Subqueries"}),"\n",(0,d.jsx)(n.h4,{id:"single-row-subquery",children:"Single-row Subquery"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Returns only one row."}),"\n",(0,d.jsxs)(n.li,{children:["Usually used with comparison operators: ",(0,d.jsx)(n.code,{children:"="}),", ",(0,d.jsx)(n.code,{children:"<"}),", ",(0,d.jsx)(n.code,{children:">"}),", ",(0,d.jsx)(n.code,{children:"<="}),", ",(0,d.jsx)(n.code,{children:">="}),", ",(0,d.jsx)(n.code,{children:"<>"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.p,{children:"Find students who have the same department as Alice."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT student_name\r\nFROM Students\r\nWHERE department_id = (\r\n    SELECT department_id\r\n    FROM Students\r\n    WHERE student_name = 'Alice'\r\n);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Inner query: Finds Alice\u2019s ",(0,d.jsx)(n.code,{children:"department_id"}),"."]}),"\n",(0,d.jsx)(n.li,{children:"Outer query: Returns all students in that department."}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"multi-row-subquery",children:"Multi-row Subquery"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Returns multiple rows."}),"\n",(0,d.jsxs)(n.li,{children:["Used with operators like ",(0,d.jsx)(n.code,{children:"IN"}),", ",(0,d.jsx)(n.code,{children:"ANY"}),", ",(0,d.jsx)(n.code,{children:"ALL"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.p,{children:"Find students enrolled in any course in the Science department"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT student_name\r\nFROM Students\r\nWHERE student_id IN (\r\n    SELECT student_id\r\n    FROM Enrollments\r\n    WHERE course_id IN (\r\n        SELECT course_id\r\n        FROM Courses\r\n        WHERE department_id = (\r\n            SELECT department_id\r\n            FROM Departments\r\n            WHERE department_name = 'Science'\r\n        )\r\n    )\r\n);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Inner-most query: Gets the ",(0,d.jsx)(n.code,{children:"department_id"}),' of "Science".']}),"\n",(0,d.jsxs)(n.li,{children:["Next query: Gets all ",(0,d.jsx)(n.code,{children:"course_id"}),' belonging to "Science".']}),"\n",(0,d.jsxs)(n.li,{children:["Next query: Gets ",(0,d.jsx)(n.code,{children:"student_id"})," of students enrolled in those courses."]}),"\n",(0,d.jsxs)(n.li,{children:["Outer query: Finds student names from ",(0,d.jsx)(n.code,{children:"Students"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"correlated-subquery",children:"Correlated Subquery"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Inner query depends on the outer query."}),"\n",(0,d.jsx)(n.li,{children:"Runs once for each row of the outer query."}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.p,{children:"Find students who are enrolled in more than one course."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT s.student_name\r\nFROM Students s\r\nWHERE (\r\n    SELECT COUNT(*)\r\n    FROM Enrollments e\r\n    WHERE e.student_id = s.student_id\r\n) > 1;\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["For each student in ",(0,d.jsx)(n.code,{children:"Students"}),", the subquery counts how many courses they are enrolled in."]}),"\n",(0,d.jsx)(n.li,{children:"Outer query selects only those with count > 1."}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"subqueries-in-different-clauses",children:"Subqueries in Different Clauses"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["In ",(0,d.jsx)(n.code,{children:"SELECT"})," clause (Scalar Subquery)"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT student_name,\r\n    (SELECT department_name\r\n     FROM departments d\r\n     WHERE d.department_id = s.department_id) AS dept_name\r\nFROM students s;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Adds department name directly in the result without a join."}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["In ",(0,d.jsx)(n.code,{children:"FROM"})," clause (Derived Table / Inline View)"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT dept_id, COUNT(*) AS total_students\r\nFROM (\r\n    SELECT department_id AS dept_id\r\n    FROM students\r\n) AS temp\r\nGROUP BY dept_id;\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Subquery acts like a temporary table (",(0,d.jsx)(n.code,{children:"temp"}),")."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["In ",(0,d.jsx)(n.code,{children:"HAVING"})," clause"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT course_id, COUNT(student_id) AS total_enrolled\r\nFROM enrollments\r\nGROUP BY course_id\r\nHAVING COUNT(student_id) > (\r\n    SELECT AVG(total)\r\n    FROM (\r\n        SELECT COUNT(student_id) AS total\r\n        FROM enrollments\r\n        GROUP BY course_id\r\n    ) AS sub\r\n);\n"})}),"\n",(0,d.jsx)(n.p,{children:"Finds courses where enrollment is greater than the average enrollment across all courses."}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"subquery-vs-join",children:"Subquery vs Join"}),"\n",(0,d.jsxs)(n.p,{children:["Subqueries (especially in the ",(0,d.jsx)(n.code,{children:"WHERE"})," clause) can often be inefficient, especially if they are correlated subqueries (i.e., where the subquery references columns from the outer query). Whenever possible, replace subqueries with ",(0,d.jsx)(n.code,{children:"JOIN"})," or ",(0,d.jsx)(n.code,{children:"EXISTS"})," clauses."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Subquery"}),": More readable for step-by-step logic, but sometimes slower."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Join"}),": Usually faster for large datasets, but can be harder to read."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Example: Both return students enrolled in \u201cMath\u201d:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Using Subquery:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT student_name\r\nFROM Students\r\nWHERE student_id IN (\r\n    SELECT student_id\r\n    FROM Enrollments e\r\n    JOIN Courses c ON e.course_id = c.course_id\r\n    WHERE c.course_name = 'Math'\r\n);\n"})}),"\n",(0,d.jsx)(n.p,{children:"Using Join:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT DISTINCT s.student_name\r\nFROM Students s\r\nJOIN Enrollments e ON s.student_id = e.student_id\r\nJOIN Courses c ON e.course_id = c.course_id\r\nWHERE c.course_name = 'Math';\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"union-in-mysql",children:[(0,d.jsx)(n.code,{children:"UNION"})," in MySQL"]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"UNION"})," operator is used to combine the results of two or more ",(0,d.jsx)(n.code,{children:"SELECT"})," queries into a single result set."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:["Rules of ",(0,d.jsx)(n.code,{children:"UNION"}),":"]})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Each ",(0,d.jsx)(n.code,{children:"SELECT"})," must have the same number of columns."]}),"\n",(0,d.jsx)(n.li,{children:"The data types of corresponding columns must be compatible."}),"\n",(0,d.jsxs)(n.li,{children:["By default, ",(0,d.jsx)(n.code,{children:"UNION"})," removes duplicate rows."]}),"\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"UNION ALL"})," if you want to keep duplicates."]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"example-of-union",children:["Example of ",(0,d.jsx)(n.code,{children:"UNION"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- Students table\r\nCREATE TABLE Students (\r\n    student_id INT,\r\n    name VARCHAR(100),\r\n    email VARCHAR(100)\r\n);\r\n\r\n-- Teachers table\r\nCREATE TABLE Teachers (\r\n    teacher_id INT,\r\n    name VARCHAR(100),\r\n    email VARCHAR(100)\r\n);\r\n\r\n-- Query using UNION\r\nSELECT name, email FROM Students\r\nUNION\r\nSELECT name, email FROM Teachers;\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Combines student and teacher contacts into one list."}),"\n",(0,d.jsx)(n.li,{children:"If a student and teacher share the same email, it will appear only once."}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:["Avoid Using OR in ",(0,d.jsx)(n.code,{children:"WHERE"})," Clauses"]})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"OR"})," can cause MySQL to perform more work than necessary, especially if it causes full table scans. When possible, try to rewrite the query to avoid ",(0,d.jsx)(n.code,{children:"OR"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- Avoid using OR in WHERE clause:\r\nSELECT order_id, total_amount FROM orders WHERE total_amount < 100 OR total_amount > 500;\r\n\r\n-- Rewrite the query with a UNION:\r\nSELECT order_id, total_amount FROM orders WHERE total_amount < 100\r\nUNION\r\nSELECT order_id, total_amount FROM orders WHERE total_amount > 500;\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:["Example with ",(0,d.jsx)(n.code,{children:"UNION ALL"}),":"]})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT name, email FROM Students\r\nUNION ALL\r\nSELECT name, email FROM Teachers;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Same as above, but duplicates are kept."}),"\n",(0,d.jsxs)(n.h2,{id:"intersect-in-mysql",children:[(0,d.jsx)(n.code,{children:"INTERSECT"})," in MySQL"]}),"\n",(0,d.jsxs)(n.p,{children:["Unlike some databases (like PostgreSQL, Oracle, SQL Server), MySQL does NOT support ",(0,d.jsx)(n.code,{children:"INTERSECT"})," directly."]}),"\n",(0,d.jsxs)(n.p,{children:["But we can simulate it using ",(0,d.jsx)(n.code,{children:"INNER JOIN"})," or ",(0,d.jsx)(n.code,{children:"IN"})," clause."]}),"\n",(0,d.jsxs)(n.h3,{id:"example-of-intersect",children:["Example of ",(0,d.jsx)(n.code,{children:"INTERSECT"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- Using INNER JOIN\r\nSELECT s.name, s.email\r\nFROM students s\r\nINNER JOIN teachers t ON s.email = t.email;\n"})}),"\n",(0,d.jsx)(n.p,{children:"OR using subquery:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT name, email FROM Students\r\nWHERE email IN (SELECT email FROM Teachers);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Finds records that exist in both tables (intersection)."}),"\n",(0,d.jsxs)(n.li,{children:["Works like ",(0,d.jsx)(n.code,{children:"INTERSECT"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"comparing-union-vs-intersect",children:["Comparing ",(0,d.jsx)(n.code,{children:"UNION"})," vs ",(0,d.jsx)(n.code,{children:"INTERSECT"})]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Feature"}),(0,d.jsx)(n.th,{children:"UNION"}),(0,d.jsx)(n.th,{children:"INTERSECT (simulated in MySQL)"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Combines rows"}),(0,d.jsx)(n.td,{children:"\u2705 Yes"}),(0,d.jsx)(n.td,{children:"\u274c No (filters only common rows)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Removes duplicates"}),(0,d.jsx)(n.td,{children:"\u2705 By default"}),(0,d.jsx)(n.td,{children:"\u2705 Naturally (since only common rows)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Keeps duplicates"}),(0,d.jsxs)(n.td,{children:["\u2705 With ",(0,d.jsx)(n.code,{children:"UNION ALL"})]}),(0,d.jsx)(n.td,{children:"\u274c Not applicable"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Availability in MySQL"}),(0,d.jsx)(n.td,{children:"\u2705 Native support"}),(0,d.jsxs)(n.td,{children:["\u274c Must simulate using ",(0,d.jsx)(n.code,{children:"JOIN"})," or ",(0,d.jsx)(n.code,{children:"IN"})]})]})]})]}),"\n",(0,d.jsxs)(n.h3,{id:"example-of-union-and-intersect",children:["Example of ",(0,d.jsx)(n.code,{children:"UNION"})," and ",(0,d.jsx)(n.code,{children:"INTERSECT"})]}),"\n",(0,d.jsx)(n.p,{children:"Suppose we have two mailing lists:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"event_registrations"})," (people who registered for an event)."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"newsletter_subscribers"})," (people who subscribed to the newsletter)."]}),"\n"]}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["People in either list (UNION):","\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT email FROM event_registrations\r\nUNION\r\nSELECT email FROM newsletter_subscribers;\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["People in both lists (INTERSECT):","\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT email FROM event_registrations\r\nWHERE email IN (SELECT email FROM newsletter_subscribers);\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"UNION"})," gives everyone we can contact."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"INTERSECT"})," gives our most engaged people (registered + subscribed)."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}}}]);