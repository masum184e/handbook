"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[8508],{8453(r,e,n){n.d(e,{R:()=>a,x:()=>i});var s=n(6540);const o={},l=s.createContext(o);function a(r){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function i(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(o):r.components||o:a(r.components),s.createElement(l.Provider,{value:e},r.children)}},8524(r,e,n){n.r(e),n.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"expressjs/Error Handling","title":"Error Handling","description":"Why Handle Errors?","source":"@site/docs/expressjs/7. Error Handling.md","sourceDirName":"expressjs","slug":"/expressjs/Error Handling","permalink":"/handbook/docs/expressjs/Error Handling","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Error Handling","sidebar_position":7},"sidebar":"expressSidebar","previous":{"title":"Template Engine","permalink":"/handbook/docs/expressjs/Template Engine"}}');var o=n(4848),l=n(8453);const a={title:"Error Handling",sidebar_position:7},i=void 0,t={},d=[{value:"404 Handler",id:"404-handler",level:2},{value:"Global Error Handler",id:"global-error-handler",level:2},{value:"Catching and Responding to Errors",id:"catching-and-responding-to-errors",level:2},{value:"Synchronous errors",id:"synchronous-errors",level:3},{value:"Asynchronous errors",id:"asynchronous-errors",level:3}];function c(r){const e={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...r.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Why Handle Errors?"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"By default, if a route doesn\u2019t exist, Express will just hang without a clear response."}),"\n",(0,o.jsx)(e.li,{children:"You should explicitly define how your app responds to not found (404) errors and unexpected server errors (500, etc.)."}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Express Error Handling Rules"})}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"404 Errors \u2192 Add a middleware at the end of your routes to catch unmatched requests."}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Other Errors \u2192 Use a special error-handling middleware with four parameters:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"(err, req, res, next) => { ... }\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"404-handler",children:"404 Handler"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'app.use((req, res) => {\r\n  res.status(404).json({ success: false, message: "Resource not found" });\r\n});\n'})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"This middleware is placed after all other routes."}),"\n",(0,o.jsx)(e.li,{children:"If no route matches, Express falls through to this handler."}),"\n",(0,o.jsx)(e.li,{children:"Responds with status 404 Not Found."}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"global-error-handler",children:"Global Error Handler"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'app.use((err: Error, req: Request, res: Response, next: NextFunction) => {\r\n  res.status(500).json({\r\n    success: false,\r\n    message: "Internal Server Error",\r\n    error: err.message,\r\n  });\r\n});\n'})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Handles any error thrown in routes or middleware."}),"\n",(0,o.jsxs)(e.li,{children:["Must have 4 arguments \u2192 (",(0,o.jsx)(e.code,{children:"err"}),", ",(0,o.jsx)(e.code,{children:"req"}),", ",(0,o.jsx)(e.code,{children:"res"}),", ",(0,o.jsx)(e.code,{children:"next"}),") so Express knows it\u2019s an error handler."]}),"\n",(0,o.jsx)(e.li,{children:"It can be placed any where in the code, but must contain 4 arguments."}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"catching-and-responding-to-errors",children:"Catching and Responding to Errors"}),"\n",(0,o.jsx)(e.p,{children:"In an Express.js application, errors can happen in many places (routes, middleware, database queries, etc.). To keep the app reliable and user-friendly, you should catch errors and respond consistently."}),"\n",(0,o.jsx)(e.p,{children:"There are two main ways to handle errors:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Synchronous errors \u2192 handled with ",(0,o.jsx)(e.code,{children:"try/catch"})," or by throwing inside routes."]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Asynchronous errors \u2192 handled with ",(0,o.jsx)(e.code,{children:"try/catch"})," in async functions and by passing the error to ",(0,o.jsx)(e.code,{children:"next(err)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"All errors eventually flow into the error-handling middleware, where you send a proper response."}),"\n",(0,o.jsx)(e.h3,{id:"synchronous-errors",children:"Synchronous errors"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'app.get("/sync-error", (req: Request, res: Response) => {\r\n  throw new Error("Synchronous error occurred!");\r\n});\n'})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Throwing an error inside a route is automatically caught by Express if an error handler exists."}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"asynchronous-errors",children:"Asynchronous errors"}),"\n",(0,o.jsx)(e.p,{children:"Asynchronous operations (like database calls or API requests) need explicit error handling."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'app.get(\r\n  "/async-error",\r\n  async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      await Promise.reject(new Error("Async error occurred!"));\r\n    } catch (err) {\r\n      next(err);\r\n    }\r\n  }\r\n);\n'})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["In ",(0,o.jsx)(e.code,{children:"async/await"})," routes, errors must be passed to ",(0,o.jsx)(e.code,{children:"next(err)"})," manually."]}),"\n",(0,o.jsx)(e.li,{children:"Otherwise, Express won\u2019t catch them automatically."}),"\n"]})]})}function h(r={}){const{wrapper:e}={...(0,l.R)(),...r.components};return e?(0,o.jsx)(e,{...r,children:(0,o.jsx)(c,{...r})}):c(r)}}}]);