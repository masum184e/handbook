"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[54590],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>l});var c=i(96540);const t={},r=c.createContext(t);function s(e){const n=c.useContext(r);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),c.createElement(r.Provider,{value:n},e.children)}},55142(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>s,metadata:()=>c,toc:()=>h});const c=JSON.parse('{"id":"nginx/Exact Match","title":"Exact Match","description":"Exact matching tells NGINX:","source":"@site/docs/nginx/26. Exact Match.md","sourceDirName":"nginx","slug":"/nginx/Exact Match","permalink":"/handbook/docs/nginx/Exact Match","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":26,"frontMatter":{},"sidebar":"nginxApiSidebar","previous":{"title":"Prefix Match","permalink":"/handbook/docs/nginx/Prefix Match"},"next":{"title":"Regex","permalink":"/handbook/docs/nginx/Regex"}}');var t=i(74848),r=i(28453);const s={},l=void 0,d={},h=[{value:"How Exact Matching Works",id:"how-exact-matching-works",level:2},{value:"Priority: Exact Match Always Wins",id:"priority-exact-match-always-wins",level:2},{value:"Protect a Sensitive URL",id:"protect-a-sensitive-url",level:2},{value:"Exact Match vs Prefix Match",id:"exact-match-vs-prefix-match",level:2},{value:"Common Use Cases for Exact Matching",id:"common-use-cases-for-exact-matching",level:2},{value:"Exact Match with <code>try_files</code>",id:"exact-match-with-try_files",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Exact matching tells NGINX:"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u201cMatch this ",(0,t.jsx)(n.code,{children:"location"})," only if the request URI is exactly the same\u2014no more, no less.\u201d"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If the URI differs even by one character, the match fails."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = /path {\r\n    ...\r\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"="})," means exact match only"]}),"\n",(0,t.jsx)(n.li,{children:"No regex"}),"\n",(0,t.jsx)(n.li,{children:"Case-sensitive"}),"\n",(0,t.jsx)(n.li,{children:"Highest priority in location matching"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-exact-matching-works",children:"How Exact Matching Works"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = /login {\r\n    return 403;\r\n}\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Request URI"}),(0,t.jsx)(n.th,{children:"Match?"}),(0,t.jsx)(n.th,{children:"Why"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/login"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Exact"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/login/"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:["Extra ",(0,t.jsx)(n.code,{children:"/"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/login?user=1"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Query string ignored"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/Login"})}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Case-sensitive"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Query strings are ignored during location matching."}),"\n",(0,t.jsx)(n.h2,{id:"priority-exact-match-always-wins",children:"Priority: Exact Match Always Wins"}),"\n",(0,t.jsx)(n.p,{children:"NGINX location matching order:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Exact match (",(0,t.jsx)(n.code,{children:"="}),") \u2190 highest priority"]}),"\n",(0,t.jsx)(n.li,{children:"Longest prefix match"}),"\n",(0,t.jsx)(n.li,{children:"Regex match"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"location /"})," fallback"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Once an exact match is found, NGINX stops searching immediately."}),"\n",(0,t.jsx)(n.h2,{id:"protect-a-sensitive-url",children:"Protect a Sensitive URL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'server {\r\n    listen 80;\r\n    server_name example.com;\r\n\r\n    location = /admin {\r\n        deny all;\r\n    }\r\n\r\n    location /admin/ {\r\n        auth_basic "Admin Area";\r\n        auth_basic_user_file /etc/nginx/.htpasswd;\r\n    }\r\n}\n'})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Request"}),(0,t.jsx)(n.th,{children:"Result"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/admin"})}),(0,t.jsx)(n.td,{children:"\u274c Access denied"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/admin/"})}),(0,t.jsx)(n.td,{children:"\ud83d\udd10 Auth required"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/admin/settings"})}),(0,t.jsx)(n.td,{children:"\ud83d\udd10 Auth required"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Exact match allows fine-grained control."}),"\n",(0,t.jsx)(n.h2,{id:"exact-match-vs-prefix-match",children:"Exact Match vs Prefix Match"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'location = /about {\r\n    return 200 "Exact About";\r\n}\r\n\r\nlocation /about {\r\n    return 200 "Prefix About";\r\n}\n'})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Request"}),(0,t.jsx)(n.th,{children:"Matched Location"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/about"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"= /about"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/about/"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/about"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/about/team"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/about"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"common-use-cases-for-exact-matching",children:"Common Use Cases for Exact Matching"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Redirect a single URL"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = /old-page {\r\n    return 301 /new-page;\r\n}\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Block a specific endpoint"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = /xmlrpc.php {\r\n    deny all;\r\n}\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Optimize performance for hot URLs"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'location = /health {\r\n    access_log off;\r\n    return 200 "OK";\r\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Override application routes"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = /favicon.ico {\r\n    access_log off;\r\n    log_not_found off;\r\n}\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"exact-match-with-try_files",children:["Exact Match with ",(0,t.jsx)(n.code,{children:"try_files"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"location = / {\r\n    try_files /index.html =404;\r\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Applies only to ",(0,t.jsx)(n.code,{children:"/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Does not affect ",(0,t.jsx)(n.code,{children:"/anything-else"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Expecting ",(0,t.jsx)(n.code,{children:"/path/"})," to match ",(0,t.jsx)(n.code,{children:"/path"})]}),"\n",(0,t.jsx)(n.li,{children:"Forgetting query strings don\u2019t affect matching"}),"\n",(0,t.jsx)(n.li,{children:"Overusing exact matches where prefix is better"}),"\n",(0,t.jsx)(n.li,{children:"Thinking exact matches apply to subpaths"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);