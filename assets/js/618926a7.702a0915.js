"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[87501],{28453(e,r,n){n.d(r,{R:()=>o,x:()=>d});var i=n(96540);const l={},s=i.createContext(l);function o(e){const r=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(s.Provider,{value:r},e.children)}},60992(e,r,n){n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>d,default:()=>x,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"nginx/Logging/Error Logs","title":"Error Logs","description":"The error log records:","source":"@site/docs/nginx/22. Logging/2. Error Logs.md","sourceDirName":"nginx/22. Logging","slug":"/nginx/Logging/Error Logs","permalink":"/handbook/docs/nginx/Logging/Error Logs","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"nginxApiSidebar","previous":{"title":"Log Format","permalink":"/handbook/docs/nginx/Logging/Log Format"},"next":{"title":"Log Rotation","permalink":"/handbook/docs/nginx/Logging/Log Rotation"}}');var l=n(74848),s=n(28453);const o={},d=void 0,t={},c=[{value:"How Error Logging Works Internally",id:"how-error-logging-works-internally",level:2},{value:"Core Directive: error_log",id:"core-directive-error_log",level:2},{value:"NGINX Error Log Levels (Most Important Section)",id:"nginx-error-log-levels-most-important-section",level:2},{value:"Default Error Log Example",id:"default-error-log-example",level:2},{value:"Common Error Log Messages Explained",id:"common-error-log-messages-explained",level:2},{value:"File Not Found (404)",id:"file-not-found-404",level:3},{value:"Permission Denied (403)",id:"permission-denied-403",level:3},{value:"Upstream Timeout",id:"upstream-timeout",level:3},{value:"SSL/TLS Errors",id:"ssltls-errors",level:3},{value:"Rate Limiting Triggered",id:"rate-limiting-triggered",level:3},{value:"Connection Limiting Triggered",id:"connection-limiting-triggered",level:3},{value:"Setting Different Error Log Levels per Context",id:"setting-different-error-log-levels-per-context",level:2},{value:"Debug Logging (Advanced)",id:"debug-logging-advanced",level:2},{value:"Logging to Syslog (Centralized Monitoring)",id:"logging-to-syslog-centralized-monitoring",level:2},{value:"Logging to STDERR (Containers / Kubernetes)",id:"logging-to-stderr-containers--kubernetes",level:2},{value:"Security Monitoring Using Error Logs",id:"security-monitoring-using-error-logs",level:2},{value:"Common Error Logging Mistakes",id:"common-error-logging-mistakes",level:2},{value:"Recommended Production Error Log Setup",id:"recommended-production-error-log-setup",level:2}];function h(e){const r={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.p,{children:"The error log records:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Problems encountered while processing requests"}),"\n",(0,l.jsx)(r.li,{children:"Configuration and runtime errors"}),"\n",(0,l.jsx)(r.li,{children:"Warnings, alerts, and critical failures"}),"\n",(0,l.jsx)(r.li,{children:"Important internal events (timeouts, upstream failures)"}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:"Unlike access logs:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Not per-request"}),"\n",(0,l.jsx)(r.li,{children:"Event-driven"}),"\n",(0,l.jsx)(r.li,{children:"Essential for troubleshooting & security monitoring"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"how-error-logging-works-internally",children:"How Error Logging Works Internally"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsx)(r.li,{children:"NGINX starts or reloads configuration"}),"\n",(0,l.jsx)(r.li,{children:"Internal events occur (client, upstream, filesystem, SSL, memory)"}),"\n",(0,l.jsx)(r.li,{children:"If event severity \u2265 configured level \u2192 it is logged"}),"\n",(0,l.jsx)(r.li,{children:"Log entry is written immediately"}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:"Error logs are synchronous and high priority."}),"\n",(0,l.jsx)(r.h2,{id:"core-directive-error_log",children:"Core Directive: error_log"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log /var/log/nginx/error.log warn;\n"})}),"\n",(0,l.jsx)(r.p,{children:"Syntax"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log <path> <log_level>;\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"path"})," \u2192 file, syslog, or stderr"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.code,{children:"log_level"})," \u2192 minimum severity to log"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"nginx-error-log-levels-most-important-section",children:"NGINX Error Log Levels (Most Important Section)"}),"\n",(0,l.jsx)(r.p,{children:"NGINX log levels (from least to most severe):"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Level"}),(0,l.jsx)(r.th,{children:"Description"}),(0,l.jsx)(r.th,{children:"Typical Use"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"debug"})}),(0,l.jsx)(r.td,{children:"Extremely detailed"}),(0,l.jsx)(r.td,{children:"Development only"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"info"})}),(0,l.jsx)(r.td,{children:"Informational events"}),(0,l.jsx)(r.td,{children:"Rarely used"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"notice"})}),(0,l.jsx)(r.td,{children:"Normal but significant"}),(0,l.jsx)(r.td,{children:"Startup/reload"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"warn"})}),(0,l.jsx)(r.td,{children:"Potential problems"}),(0,l.jsx)(r.td,{children:"Default"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"error"})}),(0,l.jsx)(r.td,{children:"Request failed"}),(0,l.jsx)(r.td,{children:"Production monitoring"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"crit"})}),(0,l.jsx)(r.td,{children:"Critical condition"}),(0,l.jsx)(r.td,{children:"Immediate attention"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"alert"})}),(0,l.jsx)(r.td,{children:"Action required"}),(0,l.jsx)(r.td,{children:"Sysadmin intervention"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"emerg"})}),(0,l.jsx)(r.td,{children:"System unusable"}),(0,l.jsx)(r.td,{children:"System down"})]})]})]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:["Production \u2192 ",(0,l.jsx)(r.code,{children:"error"})," or ",(0,l.jsx)(r.code,{children:"warn"})]}),"\n",(0,l.jsxs)(r.li,{children:["Debugging \u2192 ",(0,l.jsx)(r.code,{children:"debug"})," (temporarily)"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"default-error-log-example",children:"Default Error Log Example"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:'2026/01/22 11:05:34 [error] 2458#2458: *1024 open() "/var/www/html/logo.png" failed (2: No such file or directory),\r\nclient: 203.0.113.10, server: example.com, request: "GET /logo.png HTTP/1.1", host: "example.com"\n'})}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Part"}),(0,l.jsx)(r.th,{children:"Meaning"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Timestamp"}),(0,l.jsx)(r.td,{children:"When error occurred"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"[error]"})}),(0,l.jsx)(r.td,{children:"Severity level"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"2458#2458"})}),(0,l.jsx)(r.td,{children:"Worker process ID"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"*1024"})}),(0,l.jsx)(r.td,{children:"Connection ID"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"open() failed"})}),(0,l.jsx)(r.td,{children:"Error description"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"client"})}),(0,l.jsx)(r.td,{children:"Client IP"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"request"})}),(0,l.jsx)(r.td,{children:"Request line"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"server"})}),(0,l.jsx)(r.td,{children:"Virtual host"})]})]})]}),"\n",(0,l.jsx)(r.h2,{id:"common-error-log-messages-explained",children:"Common Error Log Messages Explained"}),"\n",(0,l.jsx)(r.h3,{id:"file-not-found-404",children:"File Not Found (404)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:'open() "/var/www/html/favicon.ico" failed (2: No such file or directory)\n'})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Normal"}),"\n",(0,l.jsx)(r.li,{children:"Can be ignored or fixed by adding file"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"permission-denied-403",children:"Permission Denied (403)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:'open() "/var/www/private/data.txt" failed (13: Permission denied)\n'})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Misconfigured permissions"}),"\n",(0,l.jsx)(r.li,{children:"Fix with correct ownership/SELinux context"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"upstream-timeout",children:"Upstream Timeout"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"upstream timed out (110: Connection timed out) while reading response header from upstream\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Backend slow or down"}),"\n",(0,l.jsx)(r.li,{children:"Investigate app performance"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"ssltls-errors",children:"SSL/TLS Errors"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"SSL_do_handshake() failed (SSL: error:1408F10B:SSL routines:ssl3_get_record:wrong version number)\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Client using unsupported TLS"}),"\n",(0,l.jsx)(r.li,{children:"Common during scans"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"rate-limiting-triggered",children:"Rate Limiting Triggered"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:'limiting requests, excess: 5.000 by zone "api"\n'})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Indicates attack or abuse"}),"\n",(0,l.jsx)(r.li,{children:"Good security signal"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"connection-limiting-triggered",children:"Connection Limiting Triggered"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:'limiting connections by zone "conn_limit"\n'})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Possible Slowloris or connection flood"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"setting-different-error-log-levels-per-context",children:"Setting Different Error Log Levels per Context"}),"\n",(0,l.jsx)(r.p,{children:"Global Level"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log /var/log/nginx/error.log error;\n"})}),"\n",(0,l.jsx)(r.p,{children:"Per Virtual Host"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"server {\r\n    error_log /var/log/nginx/example_error.log warn;\r\n}\n"})}),"\n",(0,l.jsx)(r.p,{children:"Useful for noisy applications"}),"\n",(0,l.jsx)(r.h2,{id:"debug-logging-advanced",children:"Debug Logging (Advanced)"}),"\n",(0,l.jsx)(r.p,{children:"Enable Debug Build"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"nginx -V 2>&1 | grep -- --with-debug\n"})}),"\n",(0,l.jsx)(r.p,{children:"Enable Debug Logs"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log /var/log/nginx/debug.log debug;\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Produces huge logs"}),"\n",(0,l.jsx)(r.li,{children:"Never enable in production long-term"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"logging-to-syslog-centralized-monitoring",children:"Logging to Syslog (Centralized Monitoring)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log syslog:server=192.168.1.10:514,facility=local7,tag=nginx error;\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"SIEM integration"}),"\n",(0,l.jsx)(r.li,{children:"Centralized alerting"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"logging-to-stderr-containers--kubernetes",children:"Logging to STDERR (Containers / Kubernetes)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log /dev/stderr warn;\n"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"\u2714 Docker & Kubernetes best practice"}),"\n",(0,l.jsx)(r.li,{children:"\u2714 Collected by platform logging"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"security-monitoring-using-error-logs",children:"Security Monitoring Using Error Logs"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Signal"}),(0,l.jsx)(r.th,{children:"Possible Threat"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Repeated 403/401"}),(0,l.jsx)(r.td,{children:"Brute-force"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"SSL handshake failures"}),(0,l.jsx)(r.td,{children:"TLS downgrade / scans"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Rate limit logs"}),(0,l.jsx)(r.td,{children:"DDoS attempts"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Upstream timeouts"}),(0,l.jsx)(r.td,{children:"App-layer DoS"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Permission errors"}),(0,l.jsx)(r.td,{children:"Path traversal"})]})]})]}),"\n",(0,l.jsx)(r.h2,{id:"common-error-logging-mistakes",children:"Common Error Logging Mistakes"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Mistake"}),(0,l.jsx)(r.th,{children:"Impact"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsxs)(r.td,{children:["Using ",(0,l.jsx)(r.code,{children:"debug"})," in prod"]}),(0,l.jsx)(r.td,{children:"Disk exhaustion"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Ignoring error logs"}),(0,l.jsx)(r.td,{children:"Blind failures"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"No log rotation"}),(0,l.jsx)(r.td,{children:"Server crash"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Single global log"}),(0,l.jsx)(r.td,{children:"Hard to isolate issues"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"No monitoring alerts"}),(0,l.jsx)(r.td,{children:"Late response"})]})]})]}),"\n",(0,l.jsx)(r.h2,{id:"recommended-production-error-log-setup",children:"Recommended Production Error Log Setup"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{children:"error_log /var/log/nginx/error.log error;\r\n\r\nserver {\r\n    listen 443 ssl;\r\n    server_name example.com;\r\n\r\n    error_log /var/log/nginx/example_error.log warn;\r\n}\r\n\n"})})]})}function x(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);