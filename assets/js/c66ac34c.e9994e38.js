"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[94542],{28453(e,n,s){s.d(n,{R:()=>i,x:()=>c});var l=s(96540);const a={},r=l.createContext(a);function i(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),l.createElement(r.Provider,{value:n},e.children)}},49571(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"mysql/Data Backup","title":"Data Backup","description":"mysqldump","source":"@site/docs/mysql/20. Data Backup.md","sourceDirName":"mysql","slug":"/mysql/Data Backup","permalink":"/handbook/docs/mysql/Data Backup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21},"sidebar":"mysqlSidebar","previous":{"title":"Best Practices","permalink":"/handbook/docs/mysql/Database Security/Best Practices"},"next":{"title":"Views","permalink":"/handbook/docs/mysql/Advance Features/Views"}}');var a=s(74848),r=s(28453);const i={sidebar_position:21},c=void 0,o={},t=[{value:"<code>mysqldump</code>",id:"mysqldump",level:2},{value:"General Syntax",id:"general-syntax",level:3},{value:"Restoring from a Backup",id:"restoring-from-a-backup",level:2},{value:"Importing with <code>mysql</code> Command-Line",id:"importing-with-mysql-command-line",level:3},{value:"Importing with <code>SOURCE</code> Command",id:"importing-with-source-command",level:3},{value:"Importing via MySQL Workbench",id:"importing-via-mysql-workbench",level:3},{value:"Importing CSV Data",id:"importing-csv-data",level:3},{value:"Automating Backups",id:"automating-backups",level:2},{value:"Automating Backups on Linux (Cron Jobs)",id:"automating-backups-on-linux-cron-jobs",level:3},{value:"Automating Backups on Windows (Task Scheduler)",id:"automating-backups-on-windows-task-scheduler",level:3},{value:"Automating Full Server Backups",id:"automating-full-server-backups",level:3},{value:"Real-World Enhancements of Automatic Backups",id:"real-world-enhancements-of-automatic-backups",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"mysqldump",children:(0,a.jsx)(n.code,{children:"mysqldump"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"mysqldump"})," is a command-line utility provided by MySQL to export (backup) databases."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["Why Use ",(0,a.jsx)(n.code,{children:"mysqldump"}),"?"]})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"To backup your database regularly (safety against crashes)."}),"\n",(0,a.jsx)(n.li,{children:"To migrate a database from one server to another."}),"\n",(0,a.jsx)(n.li,{children:"To move data between environments (development \u2192 production)."}),"\n",(0,a.jsx)(n.li,{children:"To export specific tables or records for analysis."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"general-syntax",children:"General Syntax"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysqldump -u [username] -p [database_name] > backup_file.sql\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["-",(0,a.jsx)(n.code,{children:"u [username]"})," \u2192 MySQL user"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"-p"})," \u2192 Prompt for password (you\u2019ll enter it after running the command)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"[database_name]"})," \u2192 The database to export"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"> backup_file.sql"})," \u2192 Redirects output into a file"]}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Export Entire Database"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p school > school_backup.sql\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Export Specific Tables"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p school students teachers > school_partial_backup.sql\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Export Only Schema (No Data)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p --no-data school > school_schema.sql\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Export Only Data (No Schema)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p --no-create-info school > school_data.sql\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Export All Databases"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p --all-databases > alldb_backup.sql\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Compressed Backup"})}),"\n",(0,a.jsx)(n.p,{children:"Since SQL dump files can be large, you can compress them:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"mysqldump -u root -p school | gzip > school_backup.sql.gz\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"restoring-from-a-backup",children:"Restoring from a Backup"}),"\n",(0,a.jsxs)(n.h3,{id:"importing-with-mysql-command-line",children:["Importing with ",(0,a.jsx)(n.code,{children:"mysql"})," Command-Line"]}),"\n",(0,a.jsx)(n.p,{children:"To restore a database from a dump file:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"First create the database (if not exists):"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE school;\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Then restore"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysql -u root -p school < school_backup.sql\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["This runs all the SQL statements in ",(0,a.jsx)(n.code,{children:"school_backup.sql"})," and rebuilds the database."]}),"\n",(0,a.jsxs)(n.h3,{id:"importing-with-source-command",children:["Importing with ",(0,a.jsx)(n.code,{children:"SOURCE"})," Command"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Log into MySQL with ",(0,a.jsx)(n.code,{children:"mysql -u root -p"})]}),"\n",(0,a.jsxs)(n.li,{children:["Select databse with ",(0,a.jsx)(n.code,{children:"USE school"})]}),"\n",(0,a.jsxs)(n.li,{children:["Run import ",(0,a.jsx)(n.code,{children:"SOURCE /path/to/school_backup.sql;"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"importing-via-mysql-workbench",children:"Importing via MySQL Workbench"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Open MySQL Workbench"}),"\n",(0,a.jsx)(n.li,{children:"Connect to your server"}),"\n",(0,a.jsx)(n.li,{children:"Go to Server > Data Import"}),"\n",(0,a.jsx)(n.li,{children:"Choose Import from Self-Contained File (your .sql backup)"}),"\n",(0,a.jsx)(n.li,{children:"Select target schema (or create new one)"}),"\n",(0,a.jsx)(n.li,{children:"Click Start Import"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"importing-csv-data",children:"Importing CSV Data"}),"\n",(0,a.jsxs)(n.p,{children:["If you only have CSV data instead of ",(0,a.jsx)(n.code,{children:".sql"})," file, you can use:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"LOAD DATA INFILE '/path/to/students.csv'\r\nINTO TABLE students\r\nFIELDS TERMINATED BY ','\r\nENCLOSED BY '\"'\r\nLINES TERMINATED BY '\\n'\r\nIGNORE 1 LINES\r\n(id, name, age);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"automating-backups",children:"Automating Backups"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Why Automate MySQL Backups?"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Prevent data loss (server crashes, accidental deletes, corruption)."}),"\n",(0,a.jsx)(n.li,{children:"Ensure regular backups without human error."}),"\n",(0,a.jsx)(n.li,{children:"Reduce downtime with ready-to-use restore files."}),"\n",(0,a.jsx)(n.li,{children:"Keep historical backups (daily, weekly, monthly)."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Ways to Automate Backups"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Linux (Cron Jobs) \u2192 Automate mysqldump on a schedule."}),"\n",(0,a.jsx)(n.li,{children:"Windows (Task Scheduler) \u2192 Run mysqldump periodically."}),"\n",(0,a.jsx)(n.li,{children:"Custom Shell Scripts / Batch Files \u2192 Add logic like compression, timestamps, cleanup."}),"\n",(0,a.jsx)(n.li,{children:"Third-Party Tools (Percona XtraBackup, phpMyAdmin export scheduling)."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"automating-backups-on-linux-cron-jobs",children:"Automating Backups on Linux (Cron Jobs)"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Step 1: Create a backup script"})}),"\n",(0,a.jsxs)(n.p,{children:["Create a file ",(0,a.jsx)(n.code,{children:"/usr/local/bin/mysql_backup.sh"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\r\n# MySQL Backup Script\r\n\r\nUSER="root"\r\nPASSWORD="yourpassword"\r\nDATABASE="school"\r\nOUTPUT_DIR="/backups/mysql"\r\nDATE=$(date +%F_%H-%M-%S)\r\nFILENAME="$OUTPUT_DIR/${DATABASE}_backup_$DATE.sql.gz"\r\n\r\n# Create backup directory if not exists\r\nmkdir -p $OUTPUT_DIR\r\n\r\n# Run mysqldump with gzip compression\r\nmysqldump -u $USER -p$PASSWORD $DATABASE | gzip > $FILENAME\r\n\r\n# Optional: Delete backups older than 7 days\r\nfind $OUTPUT_DIR -type f -name "*.gz" -mtime +7 -exec rm {} \\;\n'})}),"\n",(0,a.jsx)(n.p,{children:"Make it executable:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"chmod +x /usr/local/bin/mysql_backup.sh\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Step 2: Schedule with Cron"})}),"\n",(0,a.jsx)(n.p,{children:"Open cron editor:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"crontab -e\n"})}),"\n",(0,a.jsx)(n.p,{children:"Add this line to run backup every day at 2 AM:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"0 2 * * * /usr/local/bin/mysql_backup.sh\n"})}),"\n",(0,a.jsx)(n.p,{children:"Result \u2192 Daily compressed backup files like:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"school_backup_2025-08-24_02-00-00.sql.gz\n"})}),"\n",(0,a.jsx)(n.h3,{id:"automating-backups-on-windows-task-scheduler",children:"Automating Backups on Windows (Task Scheduler)"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Step 1: Create a batch file mysql_backup.bat:"})}),"\n",(0,a.jsxs)(n.p,{children:["Place it in a secure directory (e.g., ",(0,a.jsx)(n.code,{children:"C:\\scripts\\"}),")."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bat",children:"@echo off\r\nset USER=root\r\nset PASSWORD=yourpassword\r\nset DATABASE=school\r\nset BACKUPDIR=C:\\mysql_backups\r\nset DATE=%DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2%_%TIME:~0,2%-%TIME:~3,2%\r\n\r\nif not exist %BACKUPDIR% mkdir %BACKUPDIR%\r\n\r\nmysqldump -u %USER% -p%PASSWORD% %DATABASE% > %BACKUPDIR%\\%DATABASE%_backup_%DATE%.sql\r\n\r\necho Backup complete: %BACKUPDIR%\\%DATABASE%_backup_%DATE%.sql\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Step 2: Schedule Task"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Open Task Scheduler \u2192 Create Task"}),"\n",(0,a.jsx)(n.li,{children:"Go to Triggers \u2192 Daily at 2:00 AM"}),"\n",(0,a.jsx)(n.li,{children:"Go to Actions \u2192 Start a program \u2192 select mysql_backup.bat"}),"\n",(0,a.jsx)(n.li,{children:"Save"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Now backups will run automatically each night."}),"\n",(0,a.jsx)(n.h3,{id:"automating-full-server-backups",children:"Automating Full Server Backups"}),"\n",(0,a.jsx)(n.p,{children:"For all databases:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p --all-databases | gzip > /backups/mysql/all_db_backup_$(date +%F).sql.gz\n"})}),"\n",(0,a.jsx)(n.p,{children:"Or backup only schemas (structures):"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mysqldump -u root -p --no-data --all-databases > alldb_schema.sql\n"})}),"\n",(0,a.jsx)(n.h3,{id:"real-world-enhancements-of-automatic-backups",children:"Real-World Enhancements of Automatic Backups"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Compression \u2192 Use ",(0,a.jsx)(n.code,{children:"gzip/bzip2"})," to save space."]}),"\n",(0,a.jsx)(n.li,{children:"Rotation \u2192 Keep last 7 backups, auto-delete old ones."}),"\n",(0,a.jsx)(n.li,{children:"Remote Storage \u2192 Upload backups to AWS S3, Google Drive, or FTP."}),"\n",(0,a.jsx)(n.li,{children:"Monitoring \u2192 Send email alerts if backup fails."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);