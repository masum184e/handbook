"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[63177],{28453(e,n,s){s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const c={},t=r.createContext(c);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},28465(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"reactjs/Hooks/useEffect","title":"useEffect","description":"The useEffect hook is one of the most important and commonly used React Hooks. It lets you perform side effects in functional components.","source":"@site/docs/reactjs/11. Hooks/7. useEffect.md","sourceDirName":"reactjs/11. Hooks","slug":"/reactjs/Hooks/useEffect","permalink":"/handbook/docs/reactjs/Hooks/useEffect","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"reactjsApiSidebar","previous":{"title":"useContext","permalink":"/handbook/docs/reactjs/Hooks/useContext"},"next":{"title":"useState","permalink":"/handbook/docs/reactjs/Hooks/useState"}}');var c=s(74848),t=s(28453);const i={},l=void 0,d={},o=[{value:"Why Do We Need <code>useEffect</code>",id:"why-do-we-need-useeffect",level:2},{value:"Basic Syntax of useEffect",id:"basic-syntax-of-useeffect",level:2},{value:"When Does useEffect Run?",id:"when-does-useeffect-run",level:2},{value:"No Dependency Array",id:"no-dependency-array",level:3},{value:"Empty Dependency Array <code>[]</code>",id:"empty-dependency-array-",level:3},{value:"With Dependencies",id:"with-dependencies",level:3},{value:"Data Fetching Example",id:"data-fetching-example",level:2},{value:"Cleanup Function (Very Important)",id:"cleanup-function-very-important",level:2},{value:"Example: Event Listener",id:"example-event-listener",level:3},{value:"<code>useEffect</code> with Timer (<code>setInterval</code>)",id:"useeffect-with-timer-setinterval",level:3},{value:"Infinite Loop Problem (Common Mistake)",id:"infinite-loop-problem-common-mistake",level:2},{value:"<code>useEffect</code> vs Lifecycle Methods (Class Components)",id:"useeffect-vs-lifecycle-methods-class-components",level:2},{value:"<code>useEffect</code> vs <code>useLayoutEffect</code>",id:"useeffect-vs-uselayouteffect",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Real-World Use Cases",id:"real-world-use-cases",level:2},{value:"Summary",id:"summary",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"useEffect"})," hook is one of the most important and commonly used React Hooks. It lets you perform side effects in functional components."]}),"\n",(0,c.jsx)(n.p,{children:"Side effects include: Data fetching, DOM manipulation, Subscriptions, Timers, Logging, Updating document title"}),"\n",(0,c.jsxs)(n.h2,{id:"why-do-we-need-useeffect",children:["Why Do We Need ",(0,c.jsx)(n.code,{children:"useEffect"})]}),"\n",(0,c.jsx)(n.p,{children:"React components should be pure during rendering:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"No API calls"}),"\n",(0,c.jsx)(n.li,{children:"No subscriptions"}),"\n",(0,c.jsx)(n.li,{children:"No DOM manipulation"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"useEffect"})," runs after rendering, so it\u2019s safe to perform these operations."]}),"\n",(0,c.jsx)(n.h2,{id:"basic-syntax-of-useeffect",children:"Basic Syntax of useEffect"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'import { useEffect } from "react";\r\n\r\nuseEffect(() => {\r\n  // effect logic\r\n\r\n  return () => {\r\n    // cleanup logic (optional)\r\n  };\r\n}, [dependencies]);\n'})}),"\n",(0,c.jsx)(n.h2,{id:"when-does-useeffect-run",children:"When Does useEffect Run?"}),"\n",(0,c.jsx)(n.p,{children:"This depends on the dependency array."}),"\n",(0,c.jsx)(n.h3,{id:"no-dependency-array",children:"No Dependency Array"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'useEffect(() => {\r\n  console.log("Runs on every render");\r\n});\n'})}),"\n",(0,c.jsx)(n.p,{children:"Runs after every render"}),"\n",(0,c.jsxs)(n.h3,{id:"empty-dependency-array-",children:["Empty Dependency Array ",(0,c.jsx)(n.code,{children:"[]"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'useEffect(() => {\r\n  console.log("Runs once");\r\n}, []);\n'})}),"\n",(0,c.jsx)(n.p,{children:"Runs once after first render (componentDidMount)"}),"\n",(0,c.jsx)(n.h3,{id:"with-dependencies",children:"With Dependencies"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'useEffect(() => {\r\n  console.log("Runs when count changes");\r\n}, [count]);\n'})}),"\n",(0,c.jsxs)(n.p,{children:["Runs on first render, Whenever ",(0,c.jsx)(n.code,{children:"count"})," changes"]}),"\n",(0,c.jsx)(n.h2,{id:"data-fetching-example",children:"Data Fetching Example"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'import { useEffect, useState } from "react";\r\n\r\nfunction Users() {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch("https://jsonplaceholder.typicode.com/users")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setUsers(data);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <ul>\r\n      {users.map((user) => (\r\n        <li key={user.id}>{user.name}</li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\n'})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Runs once when component mounts"}),"\n",(0,c.jsx)(n.li,{children:"Fetches data"}),"\n",(0,c.jsx)(n.li,{children:"Updates state"}),"\n",(0,c.jsx)(n.li,{children:"Triggers re-render"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"cleanup-function-very-important",children:"Cleanup Function (Very Important)"}),"\n",(0,c.jsx)(n.p,{children:"Some effects need cleanup to prevent memory leaks."}),"\n",(0,c.jsx)(n.h3,{id:"example-event-listener",children:"Example: Event Listener"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'useEffect(() => {\r\n  const handleResize = () => {\r\n    console.log(window.innerWidth);\r\n  };\r\n\r\n  window.addEventListener("resize", handleResize);\r\n\r\n  return () => {\r\n    window.removeEventListener("resize", handleResize);\r\n  };\r\n}, []);\n'})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cleanup runs when component unmounts"}),"\n",(0,c.jsx)(n.li,{children:"Also runs before effect re-runs"}),"\n",(0,c.jsx)(n.li,{children:"Prevents duplicate listeners"}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"useeffect-with-timer-setinterval",children:[(0,c.jsx)(n.code,{children:"useEffect"})," with Timer (",(0,c.jsx)(n.code,{children:"setInterval"}),")"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'useEffect(() => {\r\n  const interval = setInterval(() => {\r\n    console.log("Tick");\r\n  }, 1000);\r\n\r\n  return () => clearInterval(interval);\r\n}, []);\n'})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Interval created once"}),"\n",(0,c.jsx)(n.li,{children:"Cleared on unmount"}),"\n",(0,c.jsx)(n.li,{children:"Prevents memory leak"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"infinite-loop-problem-common-mistake",children:"Infinite Loop Problem (Common Mistake)"}),"\n",(0,c.jsx)(n.p,{children:"Wrong Code"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"useEffect(() => {\r\n  setCount(count + 1);\r\n}, [count]);\n"})}),"\n",(0,c.jsx)(n.p,{children:"Causes infinite loop"}),"\n",(0,c.jsx)(n.p,{children:"Correct Approach"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"useEffect(() => {\r\n  setCount((prev) => prev + 1);\r\n}, []);\n"})}),"\n",(0,c.jsxs)(n.h2,{id:"useeffect-vs-lifecycle-methods-class-components",children:[(0,c.jsx)(n.code,{children:"useEffect"})," vs Lifecycle Methods (Class Components)"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Class Lifecycle"}),(0,c.jsx)(n.th,{children:"useEffect Equivalent"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"componentDidMount"}),(0,c.jsxs)(n.td,{children:["useEffect(() => ",", [])"]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"componentDidUpdate"}),(0,c.jsxs)(n.td,{children:["useEffect(() => ",", [deps])"]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"componentWillUnmount"}),(0,c.jsx)(n.td,{children:"Cleanup function"})]})]})]}),"\n",(0,c.jsxs)(n.h2,{id:"useeffect-vs-uselayouteffect",children:[(0,c.jsx)(n.code,{children:"useEffect"})," vs ",(0,c.jsx)(n.code,{children:"useLayoutEffect"})]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"useEffect"}),(0,c.jsx)(n.th,{children:"useLayoutEffect"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Async after paint"}),(0,c.jsx)(n.td,{children:"Sync before paint"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Better performance"}),(0,c.jsx)(n.td,{children:"Can block UI"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Preferred"}),(0,c.jsx)(n.td,{children:"Use only if needed"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Keep effects small"}),"\n",(0,c.jsx)(n.li,{children:"Separate concerns (multiple effects)"}),"\n",(0,c.jsx)(n.li,{children:"Always add dependencies"}),"\n",(0,c.jsx)(n.li,{children:"Use cleanup when needed"}),"\n",(0,c.jsx)(n.li,{children:"Avoid heavy logic inside effects"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Missing dependency array"}),"\n",(0,c.jsx)(n.li,{children:"Ignoring cleanup"}),"\n",(0,c.jsx)(n.li,{children:"Putting business logic in render"}),"\n",(0,c.jsx)(n.li,{children:"Overusing effects"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"real-world-use-cases",children:"Real-World Use Cases"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"API calls"}),"\n",(0,c.jsx)(n.li,{children:"WebSocket connections"}),"\n",(0,c.jsx)(n.li,{children:"Analytics tracking"}),"\n",(0,c.jsx)(n.li,{children:"Timers & intervals"}),"\n",(0,c.jsx)(n.li,{children:"DOM updates"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"useEffect"})," handles side effects"]}),"\n",(0,c.jsx)(n.li,{children:"Runs after render"}),"\n",(0,c.jsx)(n.li,{children:"Dependency array controls execution"}),"\n",(0,c.jsx)(n.li,{children:"Cleanup prevents memory leaks"}),"\n",(0,c.jsx)(n.li,{children:"Replaces lifecycle methods"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);