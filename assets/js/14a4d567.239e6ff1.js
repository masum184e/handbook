"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[80075],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},50883(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"mysql/Events","title":"Events","description":"A MySQL Event is like a scheduled task (cron job) that runs SQL statements at specific times or intervals.","source":"@site/docs/mysql/15. Events.md","sourceDirName":"mysql","slug":"/mysql/Events","permalink":"/handbook/docs/mysql/Events","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"mysqlSidebar","previous":{"title":"Triggers","permalink":"/handbook/docs/mysql/Triggers"},"next":{"title":"Transaction","permalink":"/handbook/docs/mysql/Transaction"}}');var r=s(74848),t=s(28453);const l={sidebar_position:16},a=void 0,d={},c=[{value:"Enabling the Event Scheduler",id:"enabling-the-event-scheduler",level:2},{value:"Syntax of CREATE EVENT",id:"syntax-of-create-event",level:2},{value:"One-Time Event",id:"one-time-event",level:2},{value:"Recurring Event (Daily)",id:"recurring-event-daily",level:2},{value:"Event with Multiple Statements (BEGIN...END)",id:"event-with-multiple-statements-beginend",level:2},{value:"Managing Events",id:"managing-events",level:2}];function o(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"A MySQL Event is like a scheduled task (cron job) that runs SQL statements at specific times or intervals."}),"\n",(0,r.jsx)(n.p,{children:"It allows you to automate recurring database tasks without relying on external scripts or applications."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Points about Events"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Events are managed by the ",(0,r.jsx)(n.strong,{children:"MySQL Event Scheduler"})," (must be enabled)."]}),"\n",(0,r.jsxs)(n.li,{children:["Syntax is similar to ",(0,r.jsx)(n.code,{children:"CREATE PROCEDURE"}),", but with scheduling options."]}),"\n",(0,r.jsx)(n.li,{children:"Can be one-time (run once at a specific date/time) or recurring (run periodically)."}),"\n",(0,r.jsxs)(n.li,{children:["Common uses:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automating backups"}),"\n",(0,r.jsx)(n.li,{children:"Cleaning up old records"}),"\n",(0,r.jsx)(n.li,{children:"Summarizing data (daily/weekly reports)"}),"\n",(0,r.jsx)(n.li,{children:"Sending notifications (via tables/flags)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"enabling-the-event-scheduler",children:"Enabling the Event Scheduler"}),"\n",(0,r.jsx)(n.p,{children:"By default, the event scheduler may be OFF. To enable:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SET GLOBAL event_scheduler = ON;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Check status:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SHOW VARIABLES LIKE 'event_scheduler';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"syntax-of-create-event",children:"Syntax of CREATE EVENT"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE EVENT event_name\r\nON SCHEDULE\r\n    AT timestamp_value\r\n    | EVERY interval [STARTS timestamp] [ENDS timestamp]\r\nDO\r\n   sql_statement;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event_name"})," \u2192 Unique name for the event."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ON SCHEDULE"})," \u2192 Defines when the event runs:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AT 'YYYY-MM-DD HH:MM:SS'"})," \u2192 Run once at specific time."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"EVERY interval"})," \u2192 Repeat (e.g., ",(0,r.jsx)(n.code,{children:"EVERY 1 DAY"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"STARTS"})," / ",(0,r.jsx)(n.code,{children:"ENDS"})," \u2192 Define time range for recurring events."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DO"})," \u2192 The SQL statement (or block) to execute."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"one-time-event",children:"One-Time Event"}),"\n",(0,r.jsx)(n.p,{children:"Suppose we want to delete old logs tomorrow at midnight:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE EVENT delete_old_logs\r\nON SCHEDULE AT '2025-08-26 00:00:00'\r\nDO\r\n   DELETE FROM logs WHERE log_date < NOW() - INTERVAL 30 DAY;\n"})}),"\n",(0,r.jsx)(n.p,{children:"This event will run once at midnight and remove logs older than 30 days."}),"\n",(0,r.jsx)(n.h2,{id:"recurring-event-daily",children:"Recurring Event (Daily)"}),"\n",(0,r.jsx)(n.p,{children:"Suppose we want to archive old orders every day at midnight:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE EVENT archive_orders\r\nON SCHEDULE EVERY 1 DAY\r\nSTARTS '2025-08-26 00:00:00'\r\nDO\r\n   INSERT INTO archived_orders\r\n   SELECT * FROM orders WHERE order_date < NOW() - INTERVAL 90 DAY;\n"})}),"\n",(0,r.jsx)(n.p,{children:"This will run daily at midnight, moving old orders into archived_orders."}),"\n",(0,r.jsx)(n.h2,{id:"event-with-multiple-statements-beginend",children:"Event with Multiple Statements (BEGIN...END)"}),"\n",(0,r.jsxs)(n.p,{children:["We can use multiple SQL statements with ",(0,r.jsx)(n.code,{children:"BEGIN ... END"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"DELIMITER //\r\n\r\nCREATE EVENT daily_summary\r\nON SCHEDULE EVERY 1 DAY\r\nDO\r\nBEGIN\r\n   DELETE FROM daily_summary_table;\r\n   INSERT INTO daily_summary_table (dept_id, total_salary)\r\n   SELECT department_id, SUM(salary)\r\n   FROM employees\r\n   GROUP BY department_id;\r\nEND //\r\n\r\nDELIMITER ;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Every day, it clears and rebuilds a summary table of total salaries per department."}),"\n",(0,r.jsx)(n.h2,{id:"managing-events",children:"Managing Events"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["View all events: ",(0,r.jsx)(n.code,{children:"SHOW EVENTS;"})]}),"\n",(0,r.jsxs)(n.li,{children:["View event definition: ",(0,r.jsx)(n.code,{children:"SHOW CREATE EVENT archive_orders"})]}),"\n",(0,r.jsxs)(n.li,{children:["Drop event: ",(0,r.jsx)(n.code,{children:"DROP EVENT archive_orders;"})]}),"\n",(0,r.jsxs)(n.li,{children:["Disable event (without deleting): ",(0,r.jsx)(n.code,{children:"ALTER EVENT archive_orders DISABLE;"})]}),"\n",(0,r.jsxs)(n.li,{children:["Enable event again: ",(0,r.jsx)(n.code,{children:"ALTER EVENT archive_orders ENABLE;"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);