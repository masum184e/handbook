"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[6623],{28453(n,e,i){i.d(e,{R:()=>c,x:()=>o});var s=i(96540);const l={},r=s.createContext(l);function c(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(r.Provider,{value:e},n.children)}},36221(n,e,i){i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"nginx/Configuration","title":"Configuration","description":"NGINX uses a centralized, hierarchical configuration system.","source":"@site/docs/nginx/4. Configuration.md","sourceDirName":"nginx","slug":"/nginx/Configuration","permalink":"/handbook/docs/nginx/Configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"nginxApiSidebar","previous":{"title":"Installation","permalink":"/handbook/docs/nginx/Installation"}}');var l=i(74848),r=i(28453);const c={sidebar_position:5},o=void 0,t={},d=[{value:"<code>nginx.conf</code> (Main Configuration File)",id:"nginxconf-main-configuration-file",level:2},{value:"<code>sites-available</code> Directory",id:"sites-available-directory",level:2},{value:"Example: Website Configuration in <code>sites-available</code>",id:"example-website-configuration-in-sites-available",level:3},{value:"<code>sites-enabled</code> Directory",id:"sites-enabled-directory",level:2},{value:"Example: Enable a Site",id:"example-enable-a-site",level:3},{value:"How These Files Work Together",id:"how-these-files-work-together",level:2}];function a(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:["NGINX uses a centralized, hierarchical configuration system.\r\nInstead of per-directory files (like Apache\u2019s ",(0,l.jsx)(e.code,{children:".htaccess"}),"), all behavior is controlled from configuration files."]}),"\n",(0,l.jsx)(e.p,{children:"Main Configuration Components"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"nginx.conf"})," \u2192 Global & core settings"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"sites-available/"})," \u2192 All website configurations (inactive & active)"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"sites-enabled/"})," \u2192 Active websites (symbolic links)"]}),"\n"]}),"\n",(0,l.jsxs)(e.h2,{id:"nginxconf-main-configuration-file",children:[(0,l.jsx)(e.code,{children:"nginx.conf"})," (Main Configuration File)"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Location"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"/etc/nginx/nginx.conf\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Purpose"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Main entry point for NGINX"}),"\n",(0,l.jsx)(e.li,{children:"Defines global settings"}),"\n",(0,l.jsxs)(e.li,{children:["Controls:","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"User & worker processes"}),"\n",(0,l.jsx)(e.li,{children:"Event handling"}),"\n",(0,l.jsx)(e.li,{children:"HTTP behavior"}),"\n",(0,l.jsx)(e.li,{children:"Inclusion of other config files"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:["Basic ",(0,l.jsx)(e.code,{children:"nginx.conf"})," Structure"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"user www-data;\r\nworker_processes auto;\r\npid /run/nginx.pid;\r\n\r\nevents {\r\n    worker_connections 1024;\r\n}\r\n\r\nhttp {\r\n    include /etc/nginx/mime.types;\r\n    default_type application/octet-stream;\r\n\r\n    sendfile on;\r\n    keepalive_timeout 65;\r\n\r\n    include /etc/nginx/sites-enabled/*;\r\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"user www-data;"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"User that NGINX worker processes run as"}),"\n",(0,l.jsx)(e.li,{children:"Improves security by avoiding root privileges"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"worker_processes auto;"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Automatically uses the number of CPU cores"}),"\n",(0,l.jsx)(e.li,{children:"Improves performance"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"events { }"}),"\r\nControls how NGINX handles connections."]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"events {\r\n    worker_connections 1024;\r\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"One worker can handle 1024 connections"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Total connections = workers \xd7 connections"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"http { }"}),"\r\nMain HTTP configuration block."]}),"\n",(0,l.jsx)(e.p,{children:"Inside it:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Logging"}),"\n",(0,l.jsx)(e.li,{children:"Compression"}),"\n",(0,l.jsx)(e.li,{children:"Virtual hosts"}),"\n",(0,l.jsx)(e.li,{children:"MIME types"}),"\n",(0,l.jsx)(e.li,{children:"Caching"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.code,{children:"include /etc/nginx/sites-enabled/\\*;"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Loads all active websites"}),"\n",(0,l.jsx)(e.li,{children:"Critical line for enabling virtual hosts"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.h2,{id:"sites-available-directory",children:[(0,l.jsx)(e.code,{children:"sites-available"})," Directory"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Location"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"/etc/nginx/sites-available/\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Purpose"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Stores all website configuration files"}),"\n",(0,l.jsxs)(e.li,{children:["Can contain:","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Active sites"}),"\n",(0,l.jsx)(e.li,{children:"Inactive sites"}),"\n",(0,l.jsx)(e.li,{children:"Backup or test configs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"Files here are NOT active by default."}),"\n",(0,l.jsxs)(e.h3,{id:"example-website-configuration-in-sites-available",children:["Example: Website Configuration in ",(0,l.jsx)(e.code,{children:"sites-available"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"server {\r\nlisten 80;\r\nserver_name example.com www.example.com;\r\n\r\n    root /var/www/example;\r\n    index index.html index.htm;\r\n\r\n    location / {\r\n        try_files $uri $uri/ =404;\r\n    }\r\n\r\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"server"})," \u2192 Virtual host"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"listen"})," 80 \u2192 HTTP port"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"server_name"})," \u2192 Domain names"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"root"})," \u2192 Website directory"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"location"})," / \u2192 Handles all requests"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"try_files"})," \u2192 Prevents invalid URLs"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"Why sites-available Is Important"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Clean organization"}),"\n",(0,l.jsx)(e.li,{children:"Easy enable/disable websites"}),"\n",(0,l.jsx)(e.li,{children:"Safe testing without affecting production"}),"\n"]}),"\n",(0,l.jsxs)(e.h2,{id:"sites-enabled-directory",children:[(0,l.jsx)(e.code,{children:"sites-enabled"})," Directory"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Location"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"/etc/nginx/sites-enabled/\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Purpose"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Contains symbolic links to files in ",(0,l.jsx)(e.code,{children:"sites-available"})]}),"\n",(0,l.jsx)(e.li,{children:"Only these configs are loaded by NGINX"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"example-enable-a-site",children:"Example: Enable a Site"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"sudo ln -s /etc/nginx/sites-available/example \\\r\n/etc/nginx/sites-enabled/\n"})}),"\n",(0,l.jsx)(e.p,{children:"This creates:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"sites-enabled/example \u2192 sites-available/example\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Symbolic link avoids duplication"}),"\n",(0,l.jsx)(e.li,{children:"Deleting the link disables the site"}),"\n",(0,l.jsx)(e.li,{children:"Original config remains safe"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Disable a Site"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"sudo rm /etc/nginx/sites-enabled/example\r\nsudo systemctl reload nginx\n"})}),"\n",(0,l.jsx)(e.h2,{id:"how-these-files-work-together",children:"How These Files Work Together"}),"\n",(0,l.jsx)(e.p,{children:"Request Flow"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Client Request\r\n      \u2193\r\nnginx.conf\r\n      \u2193\r\nhttp block\r\n      \u2193\r\nsites-enabled/*\r\n      \u2193\r\nserver block match\r\n      \u2193\r\nlocation block match\n"})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}}}]);