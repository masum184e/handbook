"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[2611],{1312(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"system-design/Replication/Replication","title":"Replication","description":"Replication in system design refers to the process of copying data or services across multiple machines (called replicas) to improve availability, fault tolerance, read scalability, and sometimes performance.","source":"@site/docs/system-design/9. Replication/1. Replication.md","sourceDirName":"system-design/9. Replication","slug":"/system-design/Replication/Replication","permalink":"/handbook/docs/system-design/Replication/Replication","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"systemDesignSidebar","previous":{"title":"Rate Limiting","permalink":"/handbook/docs/system-design/Rate Limiting"},"next":{"title":"Stateless Replication","permalink":"/handbook/docs/system-design/Replication/Stateless Replication"}}');var r=i(74848),t=i(28453);const l={},a=void 0,d={},c=[{value:"Types of Replication",id:"types-of-replication",level:2},{value:"Replication Strategies",id:"replication-strategies",level:2},{value:"Example of Replication",id:"example-of-replication",level:2},{value:"System: MySQL Master-Slave Replication",id:"system-mysql-master-slave-replication",level:3},{value:"Example Scenario",id:"example-scenario",level:3},{value:"Diagram",id:"diagram",level:3},{value:"Data Replication vs Component Replication",id:"data-replication-vs-component-replication",level:2}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Replication in system design refers to the process of copying data or services across multiple machines (called replicas) to improve availability, fault tolerance, read scalability, and sometimes performance."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why Replication?"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"High Availability:"})," If one server goes down, others can take over."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fault Tolerance:"})," Protects against data loss due to hardware/software failure."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability:"})," Allows horizontal scaling of read operations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Low Latency:"})," Serve data from geographically closer replicas."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"How It Works"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client writes to the primary/master node."}),"\n",(0,r.jsx)(n.li,{children:"Primary node applies the change and sends it to the replicas."}),"\n",(0,r.jsx)(n.li,{children:"Replicas acknowledge the write or update once the data is received."}),"\n",(0,r.jsx)(n.li,{children:"Client reads from any replica."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"When to Use Replication?"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You need high availability."}),"\n",(0,r.jsx)(n.li,{children:"You want to scale read operations."}),"\n",(0,r.jsx)(n.li,{children:"You require geo-redundancy."}),"\n",(0,r.jsx)(n.li,{children:"You want disaster recovery and backup redundancy."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Notes"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always pair replication with consistency strategies like eventual consistency, quorum reads/writes, or consensus protocols (e.g., Paxos, Raft)."}),"\n",(0,r.jsx)(n.li,{children:"Be aware of replication lag and how it might affect user experience."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"types-of-replication",children:"Types of Replication"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Master-Slave"})}),(0,r.jsx)(n.td,{children:"One master (primary) node handles writes; slaves (replicas) handle reads."}),(0,r.jsx)(n.td,{children:"Databases with high read-to-write ratio"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Multi-Master"})}),(0,r.jsx)(n.td,{children:"Multiple nodes can handle both reads and writes."}),(0,r.jsx)(n.td,{children:"Distributed databases like Cassandra"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Peer-to-Peer"})}),(0,r.jsx)(n.td,{children:"All nodes are equal; data is replicated among all."}),(0,r.jsx)(n.td,{children:"P2P file systems like BitTorrent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Log Shipping"})}),(0,r.jsx)(n.td,{children:"Changes are sent via logs to replicas."}),(0,r.jsx)(n.td,{children:"PostgreSQL streaming replication"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"replication-strategies",children:"Replication Strategies"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Strategy"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Synchronous"})}),(0,r.jsx)(n.td,{children:"Master waits for acknowledgment from replicas."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Asynchronous"})}),(0,r.jsx)(n.td,{children:"Master does not wait; replicas update later."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Semi-synchronous"})}),(0,r.jsx)(n.td,{children:"Waits for acknowledgment from at least one replica."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"example-of-replication",children:"Example of Replication"}),"\n",(0,r.jsx)(n.h3,{id:"system-mysql-master-slave-replication",children:"System: MySQL Master-Slave Replication"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Master Node"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Handles all write operations."}),"\n",(0,r.jsx)(n.li,{children:"Maintains a binary log of changes."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Slave Nodes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Connect to the master and replicate data from the binary log."}),"\n",(0,r.jsx)(n.li,{children:"Used primarily for read operations (queries, reports)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-scenario",children:"Example Scenario"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["User A writes a new blog post.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This write hits the Master MySQL node."}),"\n",(0,r.jsx)(n.li,{children:"The post is stored and logged."}),"\n",(0,r.jsx)(n.li,{children:"The Slaves read the binary log and update their copies."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["User B visits the blog.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Their read request is routed to a Slave."}),"\n",(0,r.jsx)(n.li,{children:"They see the newly posted blog (with some delay if async)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"diagram",children:"Diagram"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"             +--------+\r\n             | Client |\r\n             +--------+\r\n                  |\r\n        +---------+---------+\r\n        |                   |\r\n   +---------+         +---------+\r\n   | Master  |  ----\x3e   |  Slave  |\r\n   | DB Node |   Log    | DB Node |\r\n   +---------+  Replay  +---------+\r\n                        (Read-Only)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"data-replication-vs-component-replication",children:"Data Replication vs Component Replication"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"Data Replication"}),(0,r.jsx)(n.th,{children:"Component Replication"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Scope"})}),(0,r.jsx)(n.td,{children:"Data layer (DB, file system)"}),(0,r.jsx)(n.td,{children:"Application layer (services, APIs)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Purpose"})}),(0,r.jsx)(n.td,{children:"Ensure data availability & consistency"}),(0,r.jsx)(n.td,{children:"Ensure service availability & scalability"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Typical Technologies"})}),(0,r.jsx)(n.td,{children:"MongoDB, PostgreSQL, Cassandra, Redis"}),(0,r.jsx)(n.td,{children:"Docker, Kubernetes, NGINX, ECS, EC2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Example"})}),(0,r.jsx)(n.td,{children:"Read from multiple DB replicas"}),(0,r.jsx)(n.td,{children:"Load balance between 5 backend API replicas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Failure Handling"})}),(0,r.jsx)(n.td,{children:"Another replica serves data"}),(0,r.jsx)(n.td,{children:"Another service instance handles traffic"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);