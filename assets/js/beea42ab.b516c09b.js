"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[42881],{28453(e,r,n){n.d(r,{R:()=>i,x:()=>l});var s=n(96540);const t={},d=s.createContext(t);function i(e){const r=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(d.Provider,{value:r},e.children)}},91932(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"nodejs/Core Modules/HTTP","title":"HTTP","description":"The http module is a core Node.js module that allows you to:","source":"@site/docs/nodejs/5. Core Modules/3. HTTP.md","sourceDirName":"nodejs/5. Core Modules","slug":"/nodejs/Core Modules/HTTP","permalink":"/handbook/docs/nodejs/Core Modules/HTTP","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"nodejsApiSidebar","previous":{"title":"Path","permalink":"/handbook/docs/nodejs/Core Modules/Path"},"next":{"title":"Events","permalink":"/handbook/docs/nodejs/Core Modules/Events"}}');var t=n(74848),d=n(28453);const i={},l=void 0,o={},c=[{value:"How HTTP works in Node (Mental Model)",id:"how-http-works-in-node-mental-model",level:2},{value:"Creating a Basic HTTP Server",id:"creating-a-basic-http-server",level:2},{value:"Understanding the <code>req</code> (Request) Object",id:"understanding-the-req-request-object",level:2},{value:"Routing (Handling Different URLs)",id:"routing-handling-different-urls",level:2},{value:"Setting Status Codes &amp; Headers",id:"setting-status-codes--headers",level:2},{value:"Sending Different Response Types",id:"sending-different-response-types",level:2},{value:"Reading Request Body (POST Data)",id:"reading-request-body-post-data",level:2},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Serving Static Files (Basic Example)",id:"serving-static-files-basic-example",level:2},{value:"Streams with HTTP (Performance)",id:"streams-with-http-performance",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Why Frameworks Exist (Express, Fastify)",id:"why-frameworks-exist-express-fastify",level:2},{value:"Summary Cheat Sheet",id:"summary-cheat-sheet",level:2}];function a(e){const r={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"http"})," module is a core Node.js module that allows you to:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Create an HTTP server"}),"\n",(0,t.jsx)(r.li,{children:"Listen for incoming requests"}),"\n",(0,t.jsx)(r.li,{children:"Read request data (URL, method, headers, body)"}),"\n",(0,t.jsx)(r.li,{children:"Send responses (status codes, headers, body)"}),"\n",(0,t.jsx)(r.li,{children:"No installation required"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"how-http-works-in-node-mental-model",children:"How HTTP works in Node (Mental Model)"}),"\n",(0,t.jsx)(r.p,{children:"Every request follows this flow:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"Client (Browser / Postman)\r\n        \u2193\r\nHTTP Request (method, url, headers, body)\r\n        \u2193\r\nNode.js HTTP Server\r\n        \u2193\r\nYour request handler (req, res)\r\n        \u2193\r\nHTTP Response (status, headers, body)\r\n        \u2193\r\nClient\n"})}),"\n",(0,t.jsx)(r.p,{children:"Node gives you two objects for every request:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"req"})," \u2192 IncomingMessage (request)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"res"})," \u2192 ServerResponse (response)"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"creating-a-basic-http-server",children:"Creating a Basic HTTP Server"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const http = require("http");\r\n\r\nconst server = http.createServer((req, res) => {\r\n  res.end("Hello World");\r\n});\r\n\r\nserver.listen(3000, () => {\r\n  console.log("Server running on http://localhost:3000");\r\n});\n'})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"http.createServer()"})," creates a server"]}),"\n",(0,t.jsx)(r.li,{children:"Callback runs for every request"}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"res.end()"})," sends the response and closes it"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"listen()"})," binds the server to a port"]}),"\n"]}),"\n",(0,t.jsxs)(r.h2,{id:"understanding-the-req-request-object",children:["Understanding the ",(0,t.jsx)(r.code,{children:"req"})," (Request) Object"]}),"\n",(0,t.jsx)(r.p,{children:"Common Request Properties"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const server = http.createServer((req, res) => {\r\n  console.log(req.method);   // GET, POST, PUT...\r\n  console.log(req.url);      // /about?name=John\r\n  console.log(req.headers);  // request headers\r\n\r\n  res.end("Check console");\r\n});\n'})}),"\n",(0,t.jsx)(r.p,{children:"Example Output"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"GET\r\n/about?name=John\r\n{ host: 'localhost:3000', user-agent: '...' }\n"})}),"\n",(0,t.jsx)(r.h2,{id:"routing-handling-different-urls",children:"Routing (Handling Different URLs)"}),"\n",(0,t.jsx)(r.p,{children:"Node does not provide routing out of the box \u2014 you handle it manually."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const http = require("http");\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.url === "/" && req.method === "GET") {\r\n    res.end("Home Page");\r\n  } else if (req.url === "/about") {\r\n    res.end("About Page");\r\n  } else {\r\n    res.statusCode = 404;\r\n    res.end("Page Not Found");\r\n  }\r\n});\r\n\r\nserver.listen(3000);\n'})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"URL + HTTP method determine behavior"}),"\n",(0,t.jsx)(r.li,{children:"This is what frameworks automate for you"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"setting-status-codes--headers",children:"Setting Status Codes & Headers"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Status Code: ",(0,t.jsx)(r.code,{children:"res.statusCode = 200;"})]}),"\n",(0,t.jsxs)(r.li,{children:["Headers: ",(0,t.jsx)(r.code,{children:'res.setHeader("Content-Type", "text/plain");'})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Combined Example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'res.writeHead(200, {\r\n  "Content-Type": "application/json",\r\n});\r\nres.end(JSON.stringify({ message: "Success" }));\n'})}),"\n",(0,t.jsx)(r.h2,{id:"sending-different-response-types",children:"Sending Different Response Types"}),"\n",(0,t.jsx)(r.p,{children:"HTML Response"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'res.writeHead(200, { "Content-Type": "text/html" });\r\nres.end("<h1>Hello HTML</h1>");\n'})}),"\n",(0,t.jsx)(r.p,{children:"JSON Response (API style)"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'res.writeHead(200, { "Content-Type": "application/json" });\r\nres.end(JSON.stringify({ name: "Node", type: "Runtime" }));\n'})}),"\n",(0,t.jsx)(r.h2,{id:"reading-request-body-post-data",children:"Reading Request Body (POST Data)"}),"\n",(0,t.jsx)(r.p,{children:"Unlike Express, Node does not parse body automatically."}),"\n",(0,t.jsx)(r.p,{children:"Example: Reading JSON body"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const http = require("http");\r\n\r\nconst server = http.createServer((req, res) => {\r\n  if (req.method === "POST" && req.url === "/data") {\r\n    let body = "";\r\n\r\n    req.on("data", chunk => {\r\n      body += chunk;\r\n    });\r\n\r\n    req.on("end", () => {\r\n      const parsed = JSON.parse(body);\r\n      res.end(`Received: ${parsed.name}`);\r\n    });\r\n  }\r\n});\r\n\r\nserver.listen(3000);\n'})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Request body arrives in chunks"}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"data"})," event \u2192 collect chunks"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"end"})," event \u2192 full body received"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const url = require("url");\r\n\r\nconst server = http.createServer((req, res) => {\r\n  const parsedUrl = url.parse(req.url, true);\r\n\r\n  console.log(parsedUrl.query);\r\n  res.end("Check console");\r\n});\n'})}),"\n",(0,t.jsxs)(r.p,{children:["For ",(0,t.jsx)(r.code,{children:"/search?term=node&page=1"}),":"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"{ term: 'node', page: '1' }\n"})}),"\n",(0,t.jsx)(r.h2,{id:"serving-static-files-basic-example",children:"Serving Static Files (Basic Example)"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const fs = require("fs");\r\nconst path = require("path");\r\nconst http = require("http");\r\n\r\nconst server = http.createServer((req, res) => {\r\n  const filePath = path.join(__dirname, "public", req.url);\r\n\r\n  fs.readFile(filePath, (err, data) => {\r\n    if (err) {\r\n      res.statusCode = 404;\r\n      res.end("File not found");\r\n      return;\r\n    }\r\n    res.end(data);\r\n  });\r\n});\r\n\r\nserver.listen(3000);\n'})}),"\n",(0,t.jsx)(r.p,{children:"This is educational only (security issues exist)."}),"\n",(0,t.jsx)(r.h2,{id:"streams-with-http-performance",children:"Streams with HTTP (Performance)"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const fs = require("fs");\r\nconst http = require("http");\r\n\r\nhttp.createServer((req, res) => {\r\n  const stream = fs.createReadStream("bigfile.txt");\r\n  stream.pipe(res);\r\n}).listen(3000);\n'})}),"\n",(0,t.jsx)(r.p,{children:"Why this matters"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"No buffering entire file"}),"\n",(0,t.jsx)(r.li,{children:"Faster and memory efficient"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'const server = http.createServer((req, res) => {\r\n  try {\r\n    res.end("Safe response");\r\n  } catch (err) {\r\n    res.statusCode = 500;\r\n    res.end("Server Error");\r\n  }\r\n});\n'})}),"\n",(0,t.jsx)(r.h2,{id:"why-frameworks-exist-express-fastify",children:"Why Frameworks Exist (Express, Fastify)"}),"\n",(0,t.jsxs)(r.p,{children:["The raw ",(0,t.jsx)(r.code,{children:"http"})," module:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"No routing system"}),"\n",(0,t.jsx)(r.li,{children:"No body parsing"}),"\n",(0,t.jsx)(r.li,{children:"No middleware"}),"\n",(0,t.jsx)(r.li,{children:"Manual error handling"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Frameworks wrap ",(0,t.jsx)(r.code,{children:"http"})," and provide:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Routing"}),"\n",(0,t.jsx)(r.li,{children:"Middleware"}),"\n",(0,t.jsx)(r.li,{children:"JSON parsing"}),"\n",(0,t.jsx)(r.li,{children:"Better DX"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["But learning ",(0,t.jsx)(r.code,{children:"http"})," helps you:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Understand performance"}),"\n",(0,t.jsx)(r.li,{children:"Debug server issues"}),"\n",(0,t.jsx)(r.li,{children:"Write lightweight services"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"summary-cheat-sheet",children:"Summary Cheat Sheet"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Concept"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"http.createServer()"})}),(0,t.jsx)(r.td,{children:"Create server"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"req"})}),(0,t.jsx)(r.td,{children:"Incoming request"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"res"})}),(0,t.jsx)(r.td,{children:"Outgoing response"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"req.method"})}),(0,t.jsx)(r.td,{children:"HTTP method"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"req.url"})}),(0,t.jsx)(r.td,{children:"Requested path"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"res.end()"})}),(0,t.jsx)(r.td,{children:"Send response"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"res.writeHead()"})}),(0,t.jsx)(r.td,{children:"Status + headers"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Streams"}),(0,t.jsx)(r.td,{children:"High-performance responses"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);