"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[46420],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>c});var r=s(96540);const i={},d=r.createContext(i);function l(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(d.Provider,{value:n},e.children)}},82538(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"rust/Project Structure/use Keyword","title":"use Keyword","description":"The use keyword brings a path into the current scope.","source":"@site/docs/rust/13. Project Structure/3. use Keyword.md","sourceDirName":"rust/13. Project Structure","slug":"/rust/Project Structure/use Keyword","permalink":"/handbook/docs/rust/Project Structure/use Keyword","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"rustApiSidebar","previous":{"title":"Crates","permalink":"/handbook/docs/rust/Project Structure/Crates"},"next":{"title":"Visibility","permalink":"/handbook/docs/rust/Project Structure/Visibility"}}');var i=s(74848),d=s(28453);const l={},c=void 0,t={},o=[{value:"Where <code>use</code> Fits in Project Structure",id:"where-use-fits-in-project-structure",level:2},{value:"Basic Example: Without vs With <code>use</code>",id:"basic-example-without-vs-with-use",level:2},{value:"Importing from Nested Modules",id:"importing-from-nested-modules",level:2},{value:"use with External Crates",id:"use-with-external-crates",level:2},{value:"<code>use</code> and Visibility Rules",id:"use-and-visibility-rules",level:2},{value:"<code>use</code> with <code>crate</code>, <code>self</code>, and <code>super</code>",id:"use-with-crate-self-and-super",level:2},{value:"Grouped Imports (Clean &amp; Idiomatic)",id:"grouped-imports-clean--idiomatic",level:2},{value:"Glob Imports (<code>*</code>) \u2013 Use Carefully",id:"glob-imports---use-carefully",level:2},{value:"Aliasing with <code>as</code>",id:"aliasing-with-as",level:2},{value:"Re-exporting with <code>pub use</code>",id:"re-exporting-with-pub-use",level:2},{value:"<code>use</code> Scope Rules",id:"use-scope-rules",level:2},{value:"Idiomatic Placement of <code>use</code>",id:"idiomatic-placement-of-use",level:2},{value:"<code>use</code> vs <code>mod</code> (Common Confusion)",id:"use-vs-mod-common-confusion",level:2},{value:"Real-World Example (Binary + Library)",id:"real-world-example-binary--library",level:2}];function a(e){const n={br:"br",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"use"})," keyword brings a path into the current scope."]}),"\n",(0,i.jsx)(n.p,{children:"Instead of writing long paths like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"crate::math::operations::add\n"})}),"\n",(0,i.jsx)(n.p,{children:"everywhere, you can write:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use crate::math::operations::add;\n"})}),"\n",(0,i.jsx)(n.p,{children:"and then just call:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"add(2, 3);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use"})," does not create or move code.",(0,i.jsx)(n.br,{}),"\n","It only creates a shortcut (alias) to an existing item."]}),"\n",(0,i.jsxs)(n.h2,{id:"where-use-fits-in-project-structure",children:["Where ",(0,i.jsx)(n.code,{children:"use"})," Fits in Project Structure"]}),"\n",(0,i.jsx)(n.p,{children:"Recall the hierarchy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Crate\r\n \u2514\u2500\u2500 Modules\r\n      \u2514\u2500\u2500 Items (functions, structs, enums, traits)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use"})," works at any level to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"import items from modules"}),"\n",(0,i.jsx)(n.li,{children:"import items from other crates"}),"\n",(0,i.jsx)(n.li,{children:"improve readability and API design"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"basic-example-without-vs-with-use",children:["Basic Example: Without vs With ",(0,i.jsx)(n.code,{children:"use"})]}),"\n",(0,i.jsx)(n.p,{children:"Project structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 main.rs\r\n \u2514\u2500\u2500 math.rs\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"math.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub fn add(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Without ",(0,i.jsx)(n.code,{children:"use"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'mod math;\r\n\r\nfn main() {\r\n    println!("{}", math::add(2, 3));\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"With use"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'mod math;\r\nuse math::add;\r\n\r\nfn main() {\r\n    println!("{}", add(2, 3));\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"use math::add;"})," brings ",(0,i.jsx)(n.code,{children:"add"})," into scope"]}),"\n",(0,i.jsx)(n.li,{children:"Cleaner and easier to read"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"importing-from-nested-modules",children:"Importing from Nested Modules"}),"\n",(0,i.jsx)(n.p,{children:"Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 main.rs\r\n \u2514\u2500\u2500 math/\r\n      \u251c\u2500\u2500 mod.rs\r\n      \u2514\u2500\u2500 operations.rs\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"math/mod.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub mod operations;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"math/operations.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub fn add(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"main.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'mod math;\r\nuse math::operations::add;\r\n\r\nfn main() {\r\n    println!("{}", add(5, 3));\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"use-with-external-crates",children:"use with External Crates"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Cargo.toml"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[dependencies]\r\nrand = "0.8"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Importing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use rand::Rng;\r\n\r\nfn main() {\r\n    let n = rand::thread_rng().gen_range(1..=10);\r\n    println!("{}", n);\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rand"})," is an external crate"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"use rand::Rng;"})," imports a trait"]}),"\n",(0,i.jsxs)(n.li,{children:["Required so ",(0,i.jsx)(n.code,{children:".gen_range()"})," works"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"use-and-visibility-rules",children:[(0,i.jsx)(n.code,{children:"use"})," and Visibility Rules"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use"})," does not bypass privacy."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"mod secret {\r\n    fn hidden() {}\r\n}\r\nuse secret::hidden; // \u274c error: private function\n"})}),"\n",(0,i.jsx)(n.p,{children:"To fix:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"mod secret {\r\n    pub fn hidden() {}\r\n}\r\n\r\nuse secret::hidden; // \u2705\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"use-with-crate-self-and-super",children:[(0,i.jsx)(n.code,{children:"use"})," with ",(0,i.jsx)(n.code,{children:"crate"}),", ",(0,i.jsx)(n.code,{children:"self"}),", and ",(0,i.jsx)(n.code,{children:"super"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"crate::"})," \u2013 from crate root"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use crate::math::add;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"self::"})," \u2013 current module"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use self::helpers::log;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"super::"})," \u2013 parent module"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use super::config::Settings;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"grouped-imports-clean--idiomatic",children:"Grouped Imports (Clean & Idiomatic)"}),"\n",(0,i.jsx)(n.p,{children:"Without grouping"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use std::fs::File;\r\nuse std::io::Read;\r\nuse std::io::Write;\n"})}),"\n",(0,i.jsx)(n.p,{children:"With grouping"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"use std::io::{Read, Write};\r\nuse std::fs::File;\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"glob-imports---use-carefully",children:["Glob Imports (",(0,i.jsx)(n.code,{children:"*"}),") \u2013 Use Carefully"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use std::collections::*;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Pros"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Less typing"}),"\n",(0,i.jsx)(n.li,{children:"Useful in tests or small modules"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Cons"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can cause name conflicts"}),"\n",(0,i.jsx)(n.li,{children:"Reduces readability"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Best practice: Avoid in public APIs."}),"\n",(0,i.jsxs)(n.h2,{id:"aliasing-with-as",children:["Aliasing with ",(0,i.jsx)(n.code,{children:"as"})]}),"\n",(0,i.jsx)(n.p,{children:"Use aliases when names collide or are too long."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use std::io::Result as IoResult;\r\n\r\nfn read_file() -> IoResult<()> {\r\n    Ok(())\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Another example (name conflict)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use std::fmt::Result;\r\nuse std::io::Result as IoResult;\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"re-exporting-with-pub-use",children:["Re-exporting with ",(0,i.jsx)(n.code,{children:"pub use"})]}),"\n",(0,i.jsx)(n.p,{children:"This is very important for library design."}),"\n",(0,i.jsx)(n.p,{children:"Example: Re-exporting API"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 lib.rs\r\n \u2514\u2500\u2500 internal.rs\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"internal.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub struct User {\r\n    pub name: String,\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"lib.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"mod internal;\r\npub use internal::User;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use my_lib::User;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Why this matters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hides internal module structure"}),"\n",(0,i.jsx)(n.li,{children:"Creates a clean public API"}),"\n",(0,i.jsx)(n.li,{children:"Common in professional Rust libraries"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"use-scope-rules",children:[(0,i.jsx)(n.code,{children:"use"})," Scope Rules"]}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.code,{children:"use"})," statement applies:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"only to the module it is written in"}),"\n",(0,i.jsx)(n.li,{children:"not automatically to submodules"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"mod a {\r\n    use crate::utils::log;\r\n}\r\n\r\nmod b {\r\n    // log is NOT available here\r\n}\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"idiomatic-placement-of-use",children:["Idiomatic Placement of ",(0,i.jsx)(n.code,{children:"use"})]}),"\n",(0,i.jsx)(n.p,{children:"Rust convention:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use std::fs::File;\r\nuse std::io::{Read, Write};\r\n\r\nfn main() {\r\n    // logic here\r\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Place ",(0,i.jsx)(n.code,{children:"use"})," statements at the top of the module"]}),"\n",(0,i.jsxs)(n.li,{children:["After ",(0,i.jsx)(n.code,{children:"mod"})," declarations"]}),"\n",(0,i.jsx)(n.li,{children:"Before code"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"use-vs-mod-common-confusion",children:[(0,i.jsx)(n.code,{children:"use"})," vs ",(0,i.jsx)(n.code,{children:"mod"})," (Common Confusion)"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Keyword"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mod"})}),(0,i.jsx)(n.td,{children:"Defines or loads a module"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"use"})}),(0,i.jsx)(n.td,{children:"Imports items into scope"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"mod math;        // declares module\r\nuse math::add;  // imports function\n"})}),"\n",(0,i.jsx)(n.h2,{id:"real-world-example-binary--library",children:"Real-World Example (Binary + Library)"}),"\n",(0,i.jsx)(n.p,{children:"Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 main.rs\r\n \u251c\u2500\u2500 lib.rs\r\n \u2514\u2500\u2500 auth/\r\n      \u251c\u2500\u2500 mod.rs\r\n      \u2514\u2500\u2500 login.rs\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"lib.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub mod auth;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"auth/login.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'pub fn login() {\r\n    println!("Login successful");\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"main.rs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use my_app::auth::login::login;\r\n\r\nfn main() {\r\n    login();\r\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);