"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[94699],{28453(e,n,r){r.d(n,{R:()=>c,x:()=>o});var s=r(96540);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},90604(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reactjs/Unnecessary Re-Renders","title":"Unnecessary Re-Renders","description":"Why unnecessary re-renders happen","source":"@site/docs/reactjs/22. Unnecessary Re-Renders.md","sourceDirName":"reactjs","slug":"/reactjs/Unnecessary Re-Renders","permalink":"/handbook/docs/reactjs/Unnecessary Re-Renders","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"sidebar_position":23},"sidebar":"reactjsApiSidebar","previous":{"title":"Deployment","permalink":"/handbook/docs/reactjs/Deployment"},"next":{"title":"Memoizing Components","permalink":"/handbook/docs/reactjs/Memoizing Components"}}');var t=r(74848),i=r(28453);const c={sidebar_position:23},o=void 0,l={},d=[{value:"Unnecessary re-renders in action",id:"unnecessary-re-renders-in-action",level:2},{value:"Problematic version (unoptimized)",id:"problematic-version-unoptimized",level:3},{value:"Preventing the re-render",id:"preventing-the-re-render",level:3},{value:"1. Memoize the child component",id:"1-memoize-the-child-component",level:4},{value:"2. Stabilize the function prop with <code>useCallback</code>",id:"2-stabilize-the-function-prop-with-usecallback",level:4}];function a(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Why unnecessary re-renders happen"}),"\n",(0,t.jsx)(n.p,{children:"A React component re-renders when:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Its state changes"}),"\n",(0,t.jsx)(n.li,{children:"Its props change"}),"\n",(0,t.jsx)(n.li,{children:"Its parent re-renders (even if the props are logically the same)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The last point is where many performance issues sneak in."}),"\n",(0,t.jsx)(n.p,{children:"If the data a component depends on hasn\u2019t changed, React shouldn\u2019t re-render it."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"To achieve this, React gives us tools like:"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"React.memo"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"useCallback"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"useMemo"})}),"\n",(0,t.jsx)(n.li,{children:"Proper state placement"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"unnecessary-re-renders-in-action",children:"Unnecessary re-renders in action"}),"\n",(0,t.jsx)(n.h3,{id:"problematic-version-unoptimized",children:"Problematic version (unoptimized)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'function Parent() {\r\n  const [count, setCount] = React.useState(0);\r\n\r\n  const handleClick = () => {\r\n    console.log("Button clicked");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button onClick={() => setCount(count + 1)}>Count: {count}</button>\r\n      <Child onClick={handleClick} />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Child({ onClick }) {\r\n  console.log("Child rendered");\r\n  return <button onClick={onClick}>Child Button</button>;\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Clicking the Count button updates ",(0,t.jsx)(n.code,{children:"count"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Parent"})," re-renders (expected)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Child"})," also re-renders"]}),"\n",(0,t.jsxs)(n.li,{children:["Why? Because ",(0,t.jsx)(n.code,{children:"handleClick"})," is re-created on every render"]}),"\n",(0,t.jsxs)(n.li,{children:["From React\u2019s perspective, ",(0,t.jsx)(n.code,{children:"onClick"})," is a new prop"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"preventing-the-re-render",children:"Preventing the re-render"}),"\n",(0,t.jsx)(n.h4,{id:"1-memoize-the-child-component",children:"1. Memoize the child component"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'const Child = React.memo(function Child({ onClick }) {\r\n  console.log("Child rendered");\r\n  return <button onClick={onClick}>Child Button</button>;\r\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"React.memo"})," tells React:"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u201cOnly re-render this component if its props change.\u201d"}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"2-stabilize-the-function-prop-with-usecallback",children:["2. Stabilize the function prop with ",(0,t.jsx)(n.code,{children:"useCallback"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'function Parent() {\r\n  const [count, setCount] = React.useState(0);\r\n\r\n  const handleClick = React.useCallback(() => {\r\n    console.log("Button clicked");\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <button onClick={() => setCount(count + 1)}>Count: {count}</button>\r\n      <Child onClick={handleClick} />\r\n    </>\r\n  );\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Clicking Count updates the parent"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"handleClick"})," keeps the same reference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Child"})," does not re-render"]}),"\n",(0,t.jsx)(n.li,{children:"Console output confirms it"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why this works"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"React.memo"})," \u2192 skips re-render if props are shallowly equal"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useCallback"})," \u2192 prevents new function instances on every render"]}),"\n",(0,t.jsx)(n.li,{children:"Together \u2192 stable props + memoized component = fewer renders"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);