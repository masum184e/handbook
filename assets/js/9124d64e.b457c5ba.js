"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[7712],{5815(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>d,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"javascript/Closure","title":"Closure","description":"A closure is a feature in JavaScript (and many other programming languages) where an inner function \\"remembers\\" the variables and scope of its outer function, even after the outer function has finished executing.","source":"@site/docs/javascript/13. Closure.md","sourceDirName":"javascript","slug":"/javascript/Closure","permalink":"/handbook/docs/javascript/Closure","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"javascriptSidebar","previous":{"title":"Scope","permalink":"/handbook/docs/javascript/Scope"},"next":{"title":"Expression and Statement","permalink":"/handbook/docs/javascript/Expression and Statement"}}');var s=r(4848),o=r(8453);const c={sidebar_position:14},t=void 0,l={},a=[{value:"Why Closures Exist?",id:"why-closures-exist",level:2},{value:"Basic Example of Clousure",id:"basic-example-of-clousure",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Closure passing argment to child",id:"closure-passing-argment-to-child",level:2},{value:"How It Works",id:"how-it-works-1",level:2},{value:"Closure passing argment to child",id:"closure-passing-argment-to-child-1",level:2},{value:"Closure with Private Variables",id:"closure-with-private-variables",level:2},{value:"Closure in Loops",id:"closure-in-loops",level:2}];function u(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:'A closure is a feature in JavaScript (and many other programming languages) where an inner function "remembers" the variables and scope of its outer function, even after the outer function has finished executing.'}),"\n",(0,s.jsx)(n.p,{children:"In other words:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A function inside another function forms a closure."}),"\n",(0,s.jsxs)(n.li,{children:["The inner function can access:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Its own variables"}),"\n",(0,s.jsx)(n.li,{children:"The outer function\u2019s variables"}),"\n",(0,s.jsx)(n.li,{children:"Global variables"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"why-closures-exist",children:"Why Closures Exist?"}),"\n",(0,s.jsx)(n.p,{children:"Closures happen because of lexical scoping."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JavaScript uses lexical scope, meaning a function\u2019s scope is determined by where it is written in the code, not where it\u2019s called."}),"\n",(0,s.jsx)(n.li,{children:"The inner function keeps a reference to the outer function\u2019s scope."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-example-of-clousure",children:"Basic Example of Clousure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function outerFunction() {\r\n  let outerVar = "I am from outer function";\r\n\r\n  function innerFunction() {\r\n    console.log(outerVar); // accessing outer function\'s variable\r\n  }\r\n\r\n  return innerFunction;\r\n}\r\n\r\nconst closureExample = outerFunction();\r\nclosureExample(); // Output: I am from outer function\n'})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"outerFunction"})," defines a variable ",(0,s.jsx)(n.code,{children:"outerVar"})," and an ",(0,s.jsx)(n.code,{children:"innerFunction"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["When ",(0,s.jsx)(n.code,{children:"outerFunction"})," returns ",(0,s.jsx)(n.code,{children:"innerFunction"}),", normally ",(0,s.jsx)(n.code,{children:"outerVar"})," should be gone (because ",(0,s.jsx)(n.code,{children:"outerFunction"})," finished execution)."]}),"\n",(0,s.jsxs)(n.li,{children:["But because of closure, ",(0,s.jsx)(n.code,{children:"innerFunction"})," \u201cremembers\u201d the environment in which it was created, so it still has access to ",(0,s.jsx)(n.code,{children:"outerVar"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Closure creates due to lexical scoping"}),"\n",(0,s.jsx)(n.li,{children:"Child function can access everything from parent function due to closure"}),"\n",(0,s.jsx)(n.li,{children:"We want to return something which required something which is not in its scope, in its parent scope"}),"\n",(0,s.jsx)(n.li,{children:"That's why all the required things packed up and return together and we can access it"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"closure-passing-argment-to-child",children:"Closure passing argment to child"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'function outerFunction() {\r\nlet outerVar = "I am from outer function";\r\n\r\nfunction innerFunction() {\r\nconsole.log(outerVar); // accessing outer function\'s variable\r\n}\r\n\r\nreturn innerFunction;\r\n}\r\n\r\nconst closureExample = outerFunction();\r\nclosureExample(); // Output: I am from outer function\r\n\n'})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"outerFunction"})," defines a variable ",(0,s.jsx)(n.code,{children:"outerVar"})," and an ",(0,s.jsx)(n.code,{children:"innerFunction"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["When ",(0,s.jsx)(n.code,{children:"outerFunction"})," returns ",(0,s.jsx)(n.code,{children:"innerFunction"}),", normally ",(0,s.jsx)(n.code,{children:"outerVar"})," should be gone (because ",(0,s.jsx)(n.code,{children:"outerFunction"})," finished execution)."]}),"\n",(0,s.jsxs)(n.li,{children:["But because of closure, ",(0,s.jsx)(n.code,{children:"innerFunction"})," \u201cremembers\u201d the environment in which it was created, so it still has access to ",(0,s.jsx)(n.code,{children:"outerVar"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works-1",children:"How It Works"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Closure creates due to lexical scoping"}),"\n",(0,s.jsx)(n.li,{children:"Child function can access everything from parent function due to closure"}),"\n",(0,s.jsx)(n.li,{children:"We want to return something which required something which is not in its scope, in its parent scope"}),"\n",(0,s.jsx)(n.li,{children:"That's why all the required things packed up and return together and we can access it"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"closure-passing-argment-to-child-1",children:"Closure passing argment to child"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function parent(a) {\r\n  function child(b) {\r\n    console.log(`Sum: ${a + b}`);\r\n  }\r\n}\r\nparent(6)(4);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"closure-with-private-variables",children:"Closure with Private Variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function createCounter() {\r\n  let count = 0; // private variable\r\n\r\n  return {\r\n    increment: function () {\r\n      count++;\r\n      console.log(count);\r\n    },\r\n    decrement: function () {\r\n      count--;\r\n      console.log(count);\r\n    },\r\n    getValue: function () {\r\n      return count;\r\n    },\r\n  };\r\n}\r\n\r\nconst counter = createCounter();\r\ncounter.increment(); // 1\r\ncounter.increment(); // 2\r\ncounter.decrement(); // 1\r\nconsole.log(counter.getValue()); // 1\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"count"})," is not directly accessible from outside."]}),"\n",(0,s.jsxs)(n.li,{children:["But ",(0,s.jsx)(n.code,{children:"increment"}),", ",(0,s.jsx)(n.code,{children:"decrement"}),", and ",(0,s.jsx)(n.code,{children:"getValue"})," functions (inner functions) can access and modify it because of closure."]}),"\n",(0,s.jsx)(n.li,{children:"This mimics private variables in JavaScript."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"closure-in-loops",children:"Closure in Loops"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"for (var i = 1; i <= 3; i++) {\r\n  setTimeout(function () {\r\n    console.log(i);\r\n  }, 1000);\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output after 1 second:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"4\r\n4\r\n4\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Because ",(0,s.jsx)(n.code,{children:"var"})," is function-scoped, all three inner functions share the same ",(0,s.jsx)(n.code,{children:"i"})," variable."]}),"\n",(0,s.jsxs)(n.li,{children:["By the time they run, the loop has already finished, and ",(0,s.jsx)(n.code,{children:"i"})," is ",(0,s.jsx)(n.code,{children:"4"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Fix using ",(0,s.jsx)(n.code,{children:"let"})," (block scope):"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"for (let i = 1; i <= 3; i++) {\r\n  setTimeout(function () {\r\n    console.log(i);\r\n  }, 1000);\r\n}\r\n// Output: 1 2 3\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453(e,n,r){r.d(n,{R:()=>c,x:()=>t});var i=r(6540);const s={},o=i.createContext(s);function c(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);