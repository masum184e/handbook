"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[96225],{28453(e,r,n){n.d(r,{R:()=>l,x:()=>i});var s=n(96540);const a={},t=s.createContext(a);function l(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(t.Provider,{value:r},e.children)}},74980(e,r,n){n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"oop/Architecture/Clean","title":"Clean","description":"Clean Architecture, proposed by Robert C. Martin (Uncle Bob), organizes a system into concentric layers with the most important business rules at the center and less important technical details on the outside.","source":"@site/docs/oop/6. Architecture/3. Clean.md","sourceDirName":"oop/6. Architecture","slug":"/oop/Architecture/Clean","permalink":"/handbook/docs/oop/Architecture/Clean","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"oopSidebar","previous":{"title":"Hexagonal","permalink":"/handbook/docs/oop/Architecture/Hexagonal"},"next":{"title":"Onion","permalink":"/handbook/docs/oop/Architecture/Onion"}}');var a=n(74848),t=n(28453);const l={},i=void 0,d={},c=[{value:"The Four Main Layers",id:"the-four-main-layers",level:2},{value:"Entities (Enterprise Business Rules)",id:"entities-enterprise-business-rules",level:3},{value:"Use Cases (Application Business Rules)",id:"use-cases-application-business-rules",level:3},{value:"Interface Adapters",id:"interface-adapters",level:3},{value:"Frameworks &amp; Drivers",id:"frameworks--drivers",level:3},{value:"Dependency Rule",id:"dependency-rule",level:2},{value:"Example: Online Ordering System",id:"example-online-ordering-system",level:2},{value:"1. Entities Layer",id:"1-entities-layer",level:3},{value:"2. Use Cases Layer",id:"2-use-cases-layer",level:3},{value:"Input Boundary (Use Case Interface)",id:"input-boundary-use-case-interface",level:4},{value:"Request Model",id:"request-model",level:4},{value:"Use Case Interactor",id:"use-case-interactor",level:4},{value:"3. Interface Adapters Layer",id:"3-interface-adapters-layer",level:3},{value:"Output Boundary (Presenter Interface)",id:"output-boundary-presenter-interface",level:4},{value:"Response Model",id:"response-model",level:4},{value:"Controller",id:"controller",level:4},{value:"Gateways (Interfaces)",id:"gateways-interfaces",level:4},{value:"4. Frameworks &amp; Drivers Layer",id:"4-frameworks--drivers-layer",level:3},{value:"Database Implementation",id:"database-implementation",level:4},{value:"Payment API Adapter",id:"payment-api-adapter",level:4},{value:"Web UI Controller (Framework)",id:"web-ui-controller-framework",level:4},{value:"How the Flow Works",id:"how-the-flow-works",level:2},{value:"Clean Architecture vs Hexagonal vs Layered",id:"clean-architecture-vs-hexagonal-vs-layered",level:2}];function o(e){const r={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.p,{children:"Clean Architecture, proposed by Robert C. Martin (Uncle Bob), organizes a system into concentric layers with the most important business rules at the center and less important technical details on the outside."}),"\n",(0,a.jsx)(r.p,{children:"The core idea:"}),"\n",(0,a.jsxs)(r.blockquote,{children:["\n",(0,a.jsx)(r.p,{children:"Dependencies must always point inward toward the business rules."}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"This ensures:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Business logic is independent of UI, databases, frameworks, and external services."}),"\n",(0,a.jsx)(r.li,{children:"External technologies can be replaced without affecting the core."}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"the-four-main-layers",children:"The Four Main Layers"}),"\n",(0,a.jsx)(r.p,{children:"From inside \u2192 outside:"}),"\n",(0,a.jsx)(r.h3,{id:"entities-enterprise-business-rules",children:"Entities (Enterprise Business Rules)"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Represent core business objects and rules."}),"\n",(0,a.jsx)(r.li,{children:"Are independent of application logic and technology."}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"Examples: User, Order, Invoice, Account."}),"\n",(0,a.jsx)(r.h3,{id:"use-cases-application-business-rules",children:"Use Cases (Application Business Rules)"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Orchestrate how entities are used."}),"\n",(0,a.jsx)(r.li,{children:"Contain application-specific business rules."}),"\n",(0,a.jsx)(r.li,{children:"Define what the system can do."}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"Examples: PlaceOrder, TransferMoney, RegisterUser."}),"\n",(0,a.jsx)(r.h3,{id:"interface-adapters",children:"Interface Adapters"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["Convert data between formats required by:","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"UI \u2192 Use Cases"}),"\n",(0,a.jsx)(r.li,{children:"Use Cases \u2192 Database/External services"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.li,{children:"Includes controllers, presenters, gateways, repositories."}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"frameworks--drivers",children:"Frameworks & Drivers"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Outermost layer."}),"\n",(0,a.jsx)(r.li,{children:"Contains UI frameworks, databases, web servers, messaging systems, and external APIs."}),"\n",(0,a.jsx)(r.li,{children:"These are replaceable details."}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"dependency-rule",children:"Dependency Rule"}),"\n",(0,a.jsx)(r.p,{children:"All source code dependencies must point inward."}),"\n",(0,a.jsx)(r.p,{children:"That means:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Use cases depend on entities."}),"\n",(0,a.jsx)(r.li,{children:"Interface adapters depend on use cases."}),"\n",(0,a.jsx)(r.li,{children:"Frameworks depend on interface adapters."}),"\n",(0,a.jsx)(r.li,{children:"No inward layer depends on an outward layer."}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"example-online-ordering-system",children:"Example: Online Ordering System"}),"\n",(0,a.jsx)(r.p,{children:"Let\u2019s design a Place Order feature using Clean Architecture."}),"\n",(0,a.jsx)(r.h3,{id:"1-entities-layer",children:"1. Entities Layer"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class Order {\r\n    private int customerId;\r\n    private List<Item> items;\r\n\r\n    public Order(int customerId, List<Item> items) {\r\n        this.customerId = customerId;\r\n        this.items = items;\r\n    }\r\n\r\n    public double calculateTotal() {\r\n        return items.stream().mapToDouble(Item::getPrice).sum();\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(r.p,{children:"Pure business object, no frameworks, no DB, no UI."}),"\n",(0,a.jsx)(r.h3,{id:"2-use-cases-layer",children:"2. Use Cases Layer"}),"\n",(0,a.jsx)(r.h4,{id:"input-boundary-use-case-interface",children:"Input Boundary (Use Case Interface)"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public interface PlaceOrderInputBoundary {\r\n    void execute(PlaceOrderRequestModel request);\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"request-model",children:"Request Model"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class PlaceOrderRequestModel {\r\n    public int customerId;\r\n    public List<Item> items;\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"use-case-interactor",children:"Use Case Interactor"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class PlaceOrderInteractor implements PlaceOrderInputBoundary {\r\n    private final OrderGateway orderGateway;\r\n    private final PaymentGateway paymentGateway;\r\n\r\n    public PlaceOrderInteractor(OrderGateway orderGateway, PaymentGateway paymentGateway) {\r\n        this.orderGateway = orderGateway;\r\n        this.paymentGateway = paymentGateway;\r\n    }\r\n\r\n    @Override\r\n    public void execute(PlaceOrderRequestModel request) {\r\n        Order order = new Order(request.customerId, request.items);\r\n        paymentGateway.processPayment(order);\r\n        orderGateway.save(order);\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(r.p,{children:"Coordinates entities and business rules, but knows nothing about frameworks or databases."}),"\n",(0,a.jsx)(r.h3,{id:"3-interface-adapters-layer",children:"3. Interface Adapters Layer"}),"\n",(0,a.jsx)(r.h4,{id:"output-boundary-presenter-interface",children:"Output Boundary (Presenter Interface)"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public interface PlaceOrderOutputBoundary {\r\n    void present(PlaceOrderResponseModel response);\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"response-model",children:"Response Model"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class PlaceOrderResponseModel {\r\n    public String status;\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"controller",children:"Controller"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class PlaceOrderController {\r\n    private final PlaceOrderInputBoundary inputBoundary;\r\n\r\n    public PlaceOrderController(PlaceOrderInputBoundary inputBoundary) {\r\n        this.inputBoundary = inputBoundary;\r\n    }\r\n\r\n    public void handleRequest(int customerId, List<Item> items) {\r\n        PlaceOrderRequestModel request = new PlaceOrderRequestModel();\r\n        request.customerId = customerId;\r\n        request.items = items;\r\n        inputBoundary.execute(request);\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(r.p,{children:"Converts UI input into a format the use case understands."}),"\n",(0,a.jsx)(r.h4,{id:"gateways-interfaces",children:"Gateways (Interfaces)"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public interface OrderGateway {\r\n    void save(Order order);\r\n}\r\n\r\npublic interface PaymentGateway {\r\n    void processPayment(Order order);\r\n}\n"})}),"\n",(0,a.jsx)(r.p,{children:"These are defined inward, but implemented outward."}),"\n",(0,a.jsx)(r.h3,{id:"4-frameworks--drivers-layer",children:"4. Frameworks & Drivers Layer"}),"\n",(0,a.jsx)(r.h4,{id:"database-implementation",children:"Database Implementation"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class JpaOrderGateway implements OrderGateway {\r\n    @Override\r\n    public void save(Order order) {\r\n        // Save using JPA / SQL\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"payment-api-adapter",children:"Payment API Adapter"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"public class StripePaymentGateway implements PaymentGateway {\r\n    @Override\r\n    public void processPayment(Order order) {\r\n        // Call Stripe API\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(r.h4,{id:"web-ui-controller-framework",children:"Web UI Controller (Framework)"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'@RestController\r\npublic class OrderRestController {\r\n    private final PlaceOrderController controller;\r\n\r\n    @PostMapping("/orders")\r\n    public void placeOrder(@RequestBody OrderRequestDTO dto) {\r\n        controller.handleRequest(dto.getCustomerId(), dto.getItems());\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(r.p,{children:"These are replaceable technical details."}),"\n",(0,a.jsx)(r.h2,{id:"how-the-flow-works",children:"How the Flow Works"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"User sends HTTP request \u2192 Web controller."}),"\n",(0,a.jsx)(r.li,{children:"Web controller calls application controller."}),"\n",(0,a.jsx)(r.li,{children:"Controller creates request model \u2192 passes to use case."}),"\n",(0,a.jsx)(r.li,{children:"Use case creates entity \u2192 processes business rules."}),"\n",(0,a.jsx)(r.li,{children:"Use case calls gateway interfaces."}),"\n",(0,a.jsx)(r.li,{children:"Gateways are implemented by infrastructure adapters."}),"\n",(0,a.jsx)(r.li,{children:"Response flows back outward."}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.strong,{children:"Advantages of Clean Architecture"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Business logic independent of frameworks"}),"\n",(0,a.jsx)(r.li,{children:"Highly testable (mock boundaries)"}),"\n",(0,a.jsx)(r.li,{children:"Easy to change UI, database, or external services"}),"\n",(0,a.jsx)(r.li,{children:"Encourages SOLID principles"}),"\n",(0,a.jsx)(r.li,{children:"Long-term maintainability"}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.strong,{children:"Disadvantages"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"More boilerplate code"}),"\n",(0,a.jsx)(r.li,{children:"Steeper learning curve"}),"\n",(0,a.jsx)(r.li,{children:"Overkill for very small projects"}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"clean-architecture-vs-hexagonal-vs-layered",children:"Clean Architecture vs Hexagonal vs Layered"}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Feature"}),(0,a.jsx)(r.th,{children:"Layered"}),(0,a.jsx)(r.th,{children:"Hexagonal"}),(0,a.jsx)(r.th,{children:"Clean Architecture"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Structure"}),(0,a.jsx)(r.td,{children:"Horizontal layers"}),(0,a.jsx)(r.td,{children:"Core + ports/adapters"}),(0,a.jsx)(r.td,{children:"Concentric rings"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Dependency Direction"}),(0,a.jsx)(r.td,{children:"Top \u2192 Down"}),(0,a.jsx)(r.td,{children:"Inward"}),(0,a.jsx)(r.td,{children:"Inward"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Core independent of frameworks"}),(0,a.jsx)(r.td,{children:"\u274c Sometimes"}),(0,a.jsx)(r.td,{children:"\u2705 Yes"}),(0,a.jsx)(r.td,{children:"\u2705 Yes"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Emphasis"}),(0,a.jsx)(r.td,{children:"Technical separation"}),(0,a.jsx)(r.td,{children:"Boundary isolation"}),(0,a.jsx)(r.td,{children:"Business rules first"})]})]})]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}}}]);