"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[8592],{28453(e,s,r){r.d(s,{R:()=>i,x:()=>a});var t=r(96540);const n={},l=t.createContext(n);function i(e){const s=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(l.Provider,{value:s},e.children)}},77472(e,s,r){r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"system-design/Replication/Master-Slave Architecture","title":"Master-Slave Architecture","description":"Master-Slave Replication (also called Primary-Secondary) is a design pattern where one node (master/primary) handles write operations, and one or more slave/secondary nodes replicate the data and serve read operations.","source":"@site/docs/system-design/9. Replication/4. Master-Slave Architecture.md","sourceDirName":"system-design/9. Replication","slug":"/system-design/Replication/Master-Slave Architecture","permalink":"/handbook/docs/system-design/Replication/Master-Slave Architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"systemDesignSidebar","previous":{"title":"Stateful Replication","permalink":"/handbook/docs/system-design/Replication/Stateful Replication"},"next":{"title":"Master-Master Architecture","permalink":"/handbook/docs/system-design/Replication/Master-Master Architecture"}}');var n=r(74848),l=r(28453);const i={},a=void 0,d={},o=[{value:"Key Concepts of Master-Slave",id:"key-concepts-of-master-slave",level:2},{value:"How it works",id:"how-it-works",level:2},{value:"Replication Modes",id:"replication-modes",level:2},{value:"Example: MySQL Master-Slave Setup",id:"example-mysql-master-slave-setup",level:2},{value:"Flow Example",id:"flow-example",level:3},{value:"Diagram",id:"diagram",level:3},{value:"Tools that Use Master-Slave",id:"tools-that-use-master-slave",level:2},{value:"Pros and Cons of Master Slave",id:"pros-and-cons-of-master-slave",level:2},{value:"Compared to Multi-Master",id:"compared-to-multi-master",level:2}];function c(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Master-Slave Replication (also called Primary-Secondary) is a design pattern where one node (master/primary) handles write operations, and one or more slave/secondary nodes replicate the data and serve read operations."}),"\n",(0,n.jsx)(s.p,{children:"It is commonly used in databases, file systems, caches, and message brokers to improve scalability, read performance, and fault tolerance."}),"\n",(0,n.jsx)(s.h2,{id:"key-concepts-of-master-slave",children:"Key Concepts of Master-Slave"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Concept"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Master (Primary)"})}),(0,n.jsx)(s.td,{children:"The node that handles all write operations and propagates updates."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Slave (Secondary)"})}),(0,n.jsx)(s.td,{children:"One or more nodes that replicate data from the master and serve reads."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Replication"})}),(0,n.jsx)(s.td,{children:"The process of copying data from master to slave (sync or async)."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Failover"})}),(0,n.jsx)(s.td,{children:"A mechanism to promote a slave to master in case the master fails."})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Client writes data to the master."}),"\n",(0,n.jsx)(s.li,{children:"The master stores the data and logs the changes."}),"\n",(0,n.jsx)(s.li,{children:"Slaves pull or receive changes from the master (depending on the replication mode)."}),"\n",(0,n.jsx)(s.li,{children:"Clients read data from slave nodes (or optionally from the master)."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"replication-modes",children:"Replication Modes"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Mode"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Synchronous"})}),(0,n.jsx)(s.td,{children:"Master waits until slaves confirm the write. Strong consistency."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Asynchronous"})}),(0,n.jsx)(s.td,{children:"Master writes immediately; slaves update later. Faster but can lag."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Semi-synchronous"})}),(0,n.jsxs)(s.td,{children:["Master waits for ",(0,n.jsx)(s.strong,{children:"one"})," slave to confirm. Balance between consistency and performance."]})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"example-mysql-master-slave-setup",children:"Example: MySQL Master-Slave Setup"}),"\n",(0,n.jsx)(s.p,{children:"Let\u2019s consider an e-commerce application using MySQL:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Master MySQL node: receives all INSERT, UPDATE, and DELETE operations."}),"\n",(0,n.jsx)(s.li,{children:"Two Slave nodes: replicate changes from the master using binary log (binlog)."}),"\n",(0,n.jsxs)(s.li,{children:["The app:","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Sends writes (e.g., orders, user registrations) to the master."}),"\n",(0,n.jsx)(s.li,{children:"Sends reads (e.g., product catalog, order history) to the slaves."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"flow-example",children:"Flow Example"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"User places an order."}),"\n",(0,n.jsx)(s.li,{children:"API server writes the order to the master DB."}),"\n",(0,n.jsx)(s.li,{children:"Master writes to disk and appends to binlog."}),"\n",(0,n.jsx)(s.li,{children:"Slave DBs read the binlog and replicate the change."}),"\n",(0,n.jsx)(s.li,{children:"User checks order history \u2014 the app reads it from a slave DB."}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"diagram",children:"Diagram"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"                          +-------------+\r\n                          |   Clients   |\r\n                          +------+------+\r\n                                 |\r\n                +-------------------------------+\r\n                |         Load Balancer         |\r\n                +-------------------------------+\r\n                   | Write (INSERT/UPDATE/DELETE)\r\n                   v\r\n           +------------------+         +------------------+\r\n           |   Master (DB)    | -----\x3e  |   Slave (DB)     |\r\n           |  Writes + Reads  |         |    Read-only     |\r\n           +------------------+         +------------------+\r\n                                              |\r\n                                          +------------------+\r\n                                          |   Slave (DB)     |\r\n                                          |    Read-only     |\r\n                                          +------------------+\n"})}),"\n",(0,n.jsx)(s.h2,{id:"tools-that-use-master-slave",children:"Tools that Use Master-Slave"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"System"}),(0,n.jsx)(s.th,{children:"Role"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"MySQL/PostgreSQL"})}),(0,n.jsx)(s.td,{children:"Native support for master-slave replication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Redis"})}),(0,n.jsx)(s.td,{children:"Supports primary-replica setup for caching"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"MongoDB (legacy)"})}),(0,n.jsx)(s.td,{children:"Before replica sets, Mongo used master-slave"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Kafka"})}),(0,n.jsx)(s.td,{children:"Topic partitions have a leader (master) and ISR followers"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"HDFS"})}),(0,n.jsx)(s.td,{children:"NameNode (master) and DataNodes (slaves)"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"pros-and-cons-of-master-slave",children:"Pros and Cons of Master Slave"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.th,{children:["\u2705 ",(0,n.jsx)(s.strong,{children:"Pros"})]}),(0,n.jsxs)(s.th,{children:["\u274c ",(0,n.jsx)(s.strong,{children:"Cons"})]})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Scales reads horizontally"}),(0,n.jsx)(s.td,{children:"Writes are not scalable (bottleneck at master)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Enables fault tolerance (with failover)"}),(0,n.jsx)(s.td,{children:"Replication lag in async mode"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Allows backup without impacting master"}),(0,n.jsx)(s.td,{children:"Failover handling is complex"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Can replicate to remote locations"}),(0,n.jsx)(s.td,{children:"Master is a single point of failure (unless managed)"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"compared-to-multi-master",children:"Compared to Multi-Master"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Feature"}),(0,n.jsx)(s.th,{children:"Master-Slave"}),(0,n.jsx)(s.th,{children:"Multi-Master"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Write Scaling"})}),(0,n.jsx)(s.td,{children:"Only master handles writes"}),(0,n.jsx)(s.td,{children:"All nodes can write"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Consistency"})}),(0,n.jsx)(s.td,{children:"Easier to ensure consistency"}),(0,n.jsx)(s.td,{children:"Harder (conflict resolution needed)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Complexity"})}),(0,n.jsx)(s.td,{children:"Simpler"}),(0,n.jsx)(s.td,{children:"More complex"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Example Use Case"})}),(0,n.jsx)(s.td,{children:"Traditional SQL, Redis, analytics"}),(0,n.jsx)(s.td,{children:"Collaborative apps (e.g. Google Docs)"})]})]})]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);