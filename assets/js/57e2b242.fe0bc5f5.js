"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[7672],{28453(e,s,n){n.d(s,{R:()=>c,x:()=>t});var r=n(96540);const i={},l=r.createContext(i);function c(e){const s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:s},e.children)}},86546(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>o,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"redis/Pub_Sub","title":"Pub/Sub","description":"Redis Pub/Sub (Publish/Subscribe) is a messaging paradigm where:","source":"@site/docs/redis/8. Pub_Sub.md","sourceDirName":"redis","slug":"/redis/Pub_Sub","permalink":"/handbook/docs/redis/Pub_Sub","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Pub/Sub","sidebar_position":8},"sidebar":"redisApiSidebar","previous":{"title":"Persistence","permalink":"/handbook/docs/redis/Persistence"},"next":{"title":"Transactions","permalink":"/handbook/docs/redis/Transactions"}}');var i=n(74848),l=n(28453);const c={title:"Pub/Sub",sidebar_position:8},t="Pub/Sub",d={},a=[{value:"Key Concepts",id:"key-concepts",level:2},{value:"Example",id:"example",level:2},{value:"Terminal 1: Subscriber",id:"terminal-1-subscriber",level:3},{value:"Terminal 2: Publisher",id:"terminal-2-publisher",level:3},{value:"Explanation",id:"explanation",level:3},{value:"Pattern Subscription",id:"pattern-subscription",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Supported Wildcards in Patterns",id:"supported-wildcards-in-patterns",level:3},{value:"Example Walkthrough",id:"example-walkthrough",level:3}];function h(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"pubsub",children:"Pub/Sub"})}),"\n",(0,i.jsx)(s.p,{children:"Redis Pub/Sub (Publish/Subscribe) is a messaging paradigm where:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Senders (called publishers) send messages to channels."}),"\n",(0,i.jsx)(s.li,{children:"Receivers (called subscribers) listen to channels and receive messages in real time."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This is asynchronous, fire-and-forget messaging. Messages are not stored in Redis \u2014 they are only delivered to currently active subscribers."}),"\n",(0,i.jsx)(s.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Term"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"PUBLISH"})}),(0,i.jsx)(s.td,{children:"Sends a message to a channel."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"SUBSCRIBE"})}),(0,i.jsx)(s.td,{children:"Listens for messages on a channel."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"UNSUBSCRIBE"})}),(0,i.jsx)(s.td,{children:"Stops listening to a channel."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"PSUBSCRIBE"})}),(0,i.jsx)(s.td,{children:"Subscribe to channel(s) using pattern matching."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"PUBSUB"})}),(0,i.jsx)(s.td,{children:"Inspect the state of Pub/Sub (like list of channels, etc.)."})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(s.p,{children:["Let's simulate a basic chat system using Redis Pub/Sub.\r\n",(0,i.jsx)(s.strong,{children:"Step-by-step in Redis CLI"})]}),"\n",(0,i.jsx)(s.h3,{id:"terminal-1-subscriber",children:"Terminal 1: Subscriber"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"SUBSCRIBE chatroom\n"})}),"\n",(0,i.jsx)(s.p,{children:"Output"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-s",children:'Reading messages... (blocking)\r\n\r\n1) "subscribe"\r\n2) "chatroom"\r\n3) "Hello, world!"\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Terminal 1 is now listening for all messages on the ",(0,i.jsx)(s.code,{children:"chatroom"})," channel."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Index"}),(0,i.jsx)(s.th,{children:"What it represents"}),(0,i.jsx)(s.th,{children:"Meaning"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"1)"})}),(0,i.jsx)(s.td,{children:"Event type"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:'"subscribe"'})," = you subscribed to a channel"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"2)"})}),(0,i.jsx)(s.td,{children:"Channel name"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'"chatroom"'})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"3)"})}),(0,i.jsx)(s.td,{children:"Number of channels you\u2019re subscribed to now"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"1"})})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"terminal-2-publisher",children:"Terminal 2: Publisher"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'PUBLISH chatroom "Hello, world!"\n'})}),"\n",(0,i.jsx)(s.p,{children:"Output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"(integer) 1\n"})}),"\n",(0,i.jsx)(s.p,{children:"It means 1 subscriber received the message."}),"\n",(0,i.jsx)(s.h3,{id:"explanation",children:"Explanation"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The subscriber was already listening on chatroom."}),"\n",(0,i.jsx)(s.li,{children:'When the publisher sent "Hello, world!" to chatroom, Redis delivered it instantly.'}),"\n",(0,i.jsx)(s.li,{children:"If no subscribers are listening, the message is discarded."}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"pattern-subscription",children:"Pattern Subscription"}),"\n",(0,i.jsx)(s.p,{children:"Redis provides two kinds of subscriptions:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Direct subscriptions \u2192 using ",(0,i.jsx)(s.code,{children:"SUBSCRIBE channel"})," (exact channel name)."]}),"\n",(0,i.jsxs)(s.li,{children:["Pattern-based subscriptions \u2192 using ",(0,i.jsx)(s.code,{children:"PSUBSCRIBE pattern"})," (wildcard matching)."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["With ",(0,i.jsx)(s.code,{children:"PSUBSCRIBE"}),", a client can subscribe to multiple channels at once using glob-style patterns ",(0,i.jsx)(s.code,{children:"(*"}),", ",(0,i.jsx)(s.code,{children:"?"}),", ",(0,i.jsx)(s.code,{children:"[]"}),")."]}),"\n",(0,i.jsx)(s.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"A pattern is matched against channel names."}),"\n",(0,i.jsxs)(s.li,{children:["When a ",(0,i.jsx)(s.code,{children:"PUBLISH"})," command sends a message to a channel, Redis checks if the channel name matches any active patterns."]}),"\n",(0,i.jsx)(s.li,{children:"If it matches, all pattern-subscribed clients receive the message, in addition to any direct subscribers."}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"supported-wildcards-in-patterns",children:"Supported Wildcards in Patterns"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"*"})," \u2192 matches zero or more characters.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Example: news.* matches news.sports, news.politics."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"?"})," \u2192 matches exactly one character.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Example: user.? matches user.1, user.a, but not user.10."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"[]"})," \u2192 matches one character from the set.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Example: room[123] matches room1, room2, room3."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"example-walkthrough",children:"Example Walkthrough"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Subscribe with a Pattern"}),"\n",(0,i.jsx)(s.p,{children:"In one terminal:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"redis-cli\r\n127.0.0.1:6379> PSUBSCRIBE news.*\n"})}),"\n",(0,i.jsx)(s.p,{children:"Output:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'Reading messages... (press Ctrl-C to quit)\r\n1) "psubscribe"\r\n2) "news.*"\r\n3) (integer) 1\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Publish to Matching Channels"}),"\n",(0,i.jsx)(s.p,{children:"In another terminal:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'127.0.0.1:6379> PUBLISH news.sports "Sports update: Redis is awesome!"\r\n(integer) 1\r\n\r\n127.0.0.1:6379> PUBLISH news.weather "Weather update: Sunny day!"\r\n(integer) 1\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Subscriber Receives Messages"}),"\n",(0,i.jsx)(s.p,{children:"Back in the subscriber terminal:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'1) "pmessage"\r\n2) "news.*"\r\n3) "news.sports"\r\n4) "Sports update: Redis is awesome!"\r\n\r\n1) "pmessage"\r\n2) "news.*"\r\n3) "news.weather"\r\n4) "Weather update: Sunny day!"\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"pmessage"})," \u2192 type of message (pattern-based)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"news.*"})," \u2192 the pattern that matched."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"news.sports"})," \u2192 actual channel."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'"Sports update: Redis is awesome!"'})," \u2192 message content."]}),"\n"]}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);