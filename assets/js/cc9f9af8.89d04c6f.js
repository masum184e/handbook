"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[312],{28453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},94721(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"database-design/Mapping Business Rules","title":"Mapping Business Rules","description":"To create a database from this, we need to translate requirements into ERD components:","source":"@site/docs/database-design/13. Mapping Business Rules.md","sourceDirName":"database-design","slug":"/database-design/Mapping Business Rules","permalink":"/handbook/docs/database-design/Mapping Business Rules","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14}}');var t=i(74848),r=i(28453);const l={sidebar_position:14},a=void 0,d={},o=[{value:"Steps to Map Business Rules to ERD",id:"steps-to-map-business-rules-to-erd",level:2},{value:"1. Extract Entities from Business Rules",id:"1-extract-entities-from-business-rules",level:3},{value:"2. Identify Relationships",id:"2-identify-relationships",level:3},{value:"3. Determine Cardinality and Participation",id:"3-determine-cardinality-and-participation",level:3},{value:"4. Define Attributes",id:"4-define-attributes",level:3},{value:"5. Apply Constraints",id:"5-apply-constraints",level:3},{value:"Example of Mapping Business Rules into an ERD",id:"example-of-mapping-business-rules-into-an-erd",level:2},{value:"Mapping Process",id:"mapping-process",level:3},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Mapping entities to tables",id:"mapping-entities-to-tables",level:2},{value:"1. Strong Entities \u2192 Tables",id:"1-strong-entities--tables",level:3},{value:"2. Weak Entities \u2192 Tables (with Identifying Relationship)",id:"2-weak-entities--tables-with-identifying-relationship",level:3},{value:"3.Relationships \u2192 Tables",id:"3relationships--tables",level:3},{value:"1:1 Relationship",id:"11-relationship",level:4},{value:"1 Relationship",id:"1-relationship",level:4},{value:"M Relationship",id:"m-relationship",level:4},{value:"4. Multi-Valued Attributes \u2192 Separate Tables",id:"4-multi-valued-attributes--separate-tables",level:3},{value:"5. Specialization / Generalization \u2192 Tables",id:"5-specialization--generalization--tables",level:3},{value:"One Table for Each Subclass (Disjoint strategy)",id:"one-table-for-each-subclass-disjoint-strategy",level:4},{value:"Single Table with Type Attribute",id:"single-table-with-type-attribute",level:4},{value:"Summary",id:"summary",level:3},{value:"Mapping relationships to tables",id:"mapping-relationships-to-tables",level:2},{value:"One-to-One (1:1)",id:"one-to-one-11",level:3},{value:"One-to-Many (1)",id:"one-to-many-1",level:3},{value:"Many-to-Many (M)",id:"many-to-many-m",level:3},{value:"Relationships with Attributes",id:"relationships-with-attributes",level:3},{value:"Mapping Rules Recap",id:"mapping-rules-recap",level:3},{value:"Handling weak entities composite keys",id:"handling-weak-entities-composite-keys",level:2},{value:"Mapping Weak Entities to Relational Model",id:"mapping-weak-entities-to-relational-model",level:3},{value:"Composite Keys",id:"composite-keys",level:3},{value:"Weak Entity Conversion",id:"weak-entity-conversion",level:3},{value:"Key Differences of Weak Entity and Composite Key",id:"key-differences-of-weak-entity-and-composite-key",level:3},{value:"Resolving M relationships",id:"resolving-m-relationships",level:2},{value:"General Rule for Mapping",id:"general-rule-for-mapping",level:3},{value:"Example",id:"example",level:3},{value:"Step by Step Recap",id:"step-by-step-recap",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"To create a database from this, we need to translate requirements into ERD components:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Nouns \u2192 Entities"}),"\n",(0,t.jsx)(n.li,{children:"Verbs \u2192 Relationships"}),"\n",(0,t.jsx)(n.li,{children:"Adjectives / identifiers \u2192 Attributes"}),"\n",(0,t.jsx)(n.li,{children:"Quantifiers (one, many, must, may) \u2192 Cardinalities & Participation"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"steps-to-map-business-rules-to-erd",children:"Steps to Map Business Rules to ERD"}),"\n",(0,t.jsx)(n.h3,{id:"1-extract-entities-from-business-rules",children:"1. Extract Entities from Business Rules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Look for nouns in the rules \u2192 these usually represent entities."}),"\n",(0,t.jsx)(n.li,{children:"Each entity will become a rectangle in the ER diagram."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cA university has students and courses.\u201d"}),"\n",(0,t.jsx)(n.li,{children:"Entities: Student, Course"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-identify-relationships",children:"2. Identify Relationships"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Look for verbs or action phrases \u2192 these usually represent relationships."}),"\n",(0,t.jsx)(n.li,{children:"Relationships are shown as diamonds in the ERD."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cStudents enroll in courses.\u201d"}),"\n",(0,t.jsx)(n.li,{children:"Relationship: Enrolls (between Student and Course)."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-determine-cardinality-and-participation",children:"3. Determine Cardinality and Participation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business rules often describe how many instances of one entity relate to another."}),"\n",(0,t.jsxs)(n.li,{children:["Cardinality can be:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One-to-One (1:1)"}),"\n",(0,t.jsxs)(n.li,{children:["One-to-Many (1",":N",")"]}),"\n",(0,t.jsxs)(n.li,{children:["Many-to-Many (M",":N",")"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Participation may be mandatory (total) or optional (partial)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cEach course must be taught by one instructor, but an instructor can teach many courses.\u201d"}),"\n",(0,t.jsx)(n.li,{children:"Relationship: Teaches (Instructor\u2013Course)"}),"\n",(0,t.jsxs)(n.li,{children:["Cardinality: 1 Instructor \u2192 Many Courses (1",":N",")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-define-attributes",children:"4. Define Attributes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business rules may also specify important details (adjectives, descriptors, identifiers)."}),"\n",(0,t.jsx)(n.li,{children:"These become attributes of entities or sometimes of relationships."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cEach student has a student ID, name, and date of birth.\u201d"}),"\n",(0,t.jsx)(n.li,{children:"Attributes of Student: student_id (PK), Name, DOB."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-apply-constraints",children:"5. Apply Constraints"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Some business rules describe constraints (conditions that must always be true)."}),"\n",(0,t.jsx)(n.li,{children:"These map to keys, total participation, or unique attributes in the ERD."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cEvery course must have at least one student enrolled.\u201d"}),"\n",(0,t.jsx)(n.li,{children:"Constraint: Total participation of Course in Enrolls relationship."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-of-mapping-business-rules-into-an-erd",children:"Example of Mapping Business Rules into an ERD"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A university has students, courses, and instructors."}),"\n",(0,t.jsx)(n.li,{children:"Each student can enroll in many courses, and each course can have many students."}),"\n",(0,t.jsx)(n.li,{children:"Each course is taught by one instructor, but an instructor can teach many courses."}),"\n",(0,t.jsx)(n.li,{children:"Each student has a student_id, Name, and DOB."}),"\n",(0,t.jsx)(n.li,{children:"Each course has a course_id, Title, and Credits."}),"\n",(0,t.jsx)(n.li,{children:"Each instructor has an Instructor_ID, Name, and Salary."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"mapping-process",children:"Mapping Process"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Entities: Student, Course, Instructor."}),"\n",(0,t.jsxs)(n.li,{children:["Relationships:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Enrolls (Student\u2013Course, M",":N",")."]}),"\n",(0,t.jsxs)(n.li,{children:["Teaches (Instructor\u2013Course, 1",":N",")."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Attributes:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Student \u2192 student_id (PK), Name, DOB."}),"\n",(0,t.jsx)(n.li,{children:"Course \u2192 course_id (PK), Title, Credits."}),"\n",(0,t.jsx)(n.li,{children:"Instructor \u2192 Instructor_ID (PK), Name, Salary."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Constraints:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each course must be taught by one instructor (total participation of Course in Teaches)."}),"\n",(0,t.jsx)(n.li,{children:"A student may or may not enroll in a course (optional participation)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scss",children:" Student (student_id, Name, DOB)\r\n        |M:N\r\n        |\r\n     Enrolls\r\n        |\r\n        |M:N\r\n Course (course_id, Title, Credits)\r\n        |\r\n        |1:N\r\n     Teaches\r\n        |\r\n Instructor (Instructor_ID, Name, Salary)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Treating Attributes as Entities"}),"\n",(0,t.jsx)(n.li,{children:"Ignoring Cardinality and Participation"}),"\n",(0,t.jsx)(n.li,{children:"Overusing Many-to-Many Relationships"}),"\n",(0,t.jsx)(n.li,{children:"Not Defining Primary Keys"}),"\n",(0,t.jsx)(n.li,{children:"Mixing Up Entities and Relationships"}),"\n",(0,t.jsx)(n.li,{children:"Not Handling Weak Entities Properly"}),"\n",(0,t.jsx)(n.li,{children:"Missing Attributes on Relationships"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"mapping-entities-to-tables",children:"Mapping entities to tables"}),"\n",(0,t.jsx)(n.h3,{id:"1-strong-entities--tables",children:"1. Strong Entities \u2192 Tables"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each strong entity becomes a separate table."}),"\n",(0,t.jsx)(n.li,{children:"Attributes of the entity become columns."}),"\n",(0,t.jsx)(n.li,{children:"The primary key (PK) of the entity becomes the table\u2019s primary key."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-weak-entities--tables-with-identifying-relationship",children:"2. Weak Entities \u2192 Tables (with Identifying Relationship)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A weak entity cannot exist without a strong entity."}),"\n",(0,t.jsxs)(n.li,{children:["Its table includes:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Its own attributes."}),"\n",(0,t.jsx)(n.li,{children:"The primary key of the owner entity (as a foreign key)."}),"\n",(0,t.jsx)(n.li,{children:"A partial key to uniquely identify instances."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Together, they form the composite primary key."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3relationships--tables",children:"3.Relationships \u2192 Tables"}),"\n",(0,t.jsx)(n.h4,{id:"11-relationship",children:"1:1 Relationship"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Add the primary key of one entity as a foreign key in the other."}),"\n",(0,t.jsx)(n.li,{children:"Sometimes, merge both entities into one table if they always participate together."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.p,{children:"Relationship: Each student has one student_card."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name,\r\n   DOB\r\n);\r\n\r\nSTUDENT_CARD(\r\n   Card_ID PRIMARY KEY,\r\n   Issue_Date,\r\n   student_id UNIQUE,   -- FK referencing STUDENT\r\n   FOREIGN KEY(student_id) REFERENCES STUDENT(student_id)\r\n);\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"1-relationship",children:["1",":N"," Relationship"]}),"\n",(0,t.jsx)(n.p,{children:'Add the primary key of the "1" side as a foreign key in the "N" side.'}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.p,{children:"Relationship: Each course is taught by one instructor, but an instructor can teach many courses."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSTRUCTOR(\r\n   Instructor_ID PRIMARY KEY,\r\n   Name,\r\n   Salary\r\n);\r\n\r\nCOURSE(\r\n   course_id PRIMARY KEY,\r\n   Title,\r\n   Credits,\r\n   Instructor_ID,   -- FK referencing INSTRUCTOR\r\n   FOREIGN KEY(Instructor_ID) REFERENCES INSTRUCTOR(Instructor_ID)\r\n);\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"m-relationship",children:["M",":N"," Relationship"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create a new table (associative/bridge entity)."}),"\n",(0,t.jsx)(n.li,{children:"Include the primary keys of both entities as foreign keys."}),"\n",(0,t.jsx)(n.li,{children:"Add relationship attributes (if any)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.p,{children:"Relationship: Students enroll in many courses, and each course has many students. Enrollment has a Date."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name,\r\n   DOB,\r\n   Email\r\n);\r\n\r\nCOURSE(\r\n   course_id PRIMARY KEY,\r\n   Title,\r\n   Credits\r\n);\r\n\r\nENROLLMENT(\r\n   student_id,   -- FK referencing STUDENT\r\n   course_id,    -- FK referencing COURSE\r\n   Enroll_Date,\r\n   PRIMARY KEY (student_id, course_id),\r\n   FOREIGN KEY(student_id) REFERENCES STUDENT(student_id),\r\n   FOREIGN KEY(course_id) REFERENCES COURSE(course_id)\r\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-multi-valued-attributes--separate-tables",children:"4. Multi-Valued Attributes \u2192 Separate Tables"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If an attribute can have multiple values, create a new table."}),"\n",(0,t.jsxs)(n.li,{children:["The table contains:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The primary key of the original entity."}),"\n",(0,t.jsx)(n.li,{children:"The multivalued attribute."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"The composite key ensures uniqueness."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.p,{children:"Entity: Student has multiple Phone_Numbers."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name,\r\n   DOB\r\n);\r\n\r\nSTUDENT_PHONE(\r\n   student_id,   -- FK referencing STUDENT\r\n   Phone_Number,\r\n   PRIMARY KEY (student_id, Phone_Number)\r\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-specialization--generalization--tables",children:"5. Specialization / Generalization \u2192 Tables"}),"\n",(0,t.jsx)(n.p,{children:"Two common approaches:"}),"\n",(0,t.jsx)(n.h4,{id:"one-table-for-each-subclass-disjoint-strategy",children:"One Table for Each Subclass (Disjoint strategy)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Superclass attributes \u2192 in the superclass table."}),"\n",(0,t.jsx)(n.li,{children:"Subclass-specific attributes \u2192 in separate subclass tables."}),"\n",(0,t.jsx)(n.li,{children:"Subclass table\u2019s PK = Superclass PK (and FK)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.p,{children:"Entity: Employee specialized into FullTime_Employee and PartTime_Employee."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EMPLOYEE(\r\n   Emp_ID PRIMARY KEY,\r\n   Name,\r\n   Salary\r\n);\r\n\r\nFULLTIME_EMPLOYEE(\r\n   Emp_ID PRIMARY KEY,   -- FK referencing EMPLOYEE\r\n   Benefits,\r\n   FOREIGN KEY(Emp_ID) REFERENCES EMPLOYEE(Emp_ID)\r\n);\r\n\r\nPARTTIME_EMPLOYEE(\r\n   Emp_ID PRIMARY KEY,   -- FK referencing EMPLOYEE\r\n   Hourly_Rate,\r\n   FOREIGN KEY(Emp_ID) REFERENCES EMPLOYEE(Emp_ID)\r\n);\n"})}),"\n",(0,t.jsx)(n.h4,{id:"single-table-with-type-attribute",children:"Single Table with Type Attribute"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All attributes in one table."}),"\n",(0,t.jsx)(n.li,{children:"A type discriminator column specifies which subclass applies."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EMPLOYEE(\r\n   Emp_ID PRIMARY KEY,\r\n   Name,\r\n   Salary,\r\n   Emp_Type,        -- 'F' = Fulltime, 'P' = Parttime\r\n   Benefits,        -- Null if not Fulltime\r\n   Hourly_Rate      -- Null if not Parttime\r\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Strong entities \u2192 independent tables."}),"\n",(0,t.jsx)(n.li,{children:"Weak entities \u2192 dependent tables with composite PK."}),"\n",(0,t.jsxs)(n.li,{children:["Relationships \u2192 FKs (1:1, 1",":N",") or new tables (M",":N",")."]}),"\n",(0,t.jsx)(n.li,{children:"Multivalued attributes \u2192 separate tables."}),"\n",(0,t.jsx)(n.li,{children:"Specialization/Generalization \u2192 multiple strategies (separate subclass tables or single table with type attribute)."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"mapping-relationships-to-tables",children:"Mapping relationships to tables"}),"\n",(0,t.jsx)(n.h3,{id:"one-to-one-11",children:"One-to-One (1:1)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each entity instance is related to exactly one instance of the other entity."}),"\n",(0,t.jsxs)(n.li,{children:["Implementation options:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Add the primary key of one table as a foreign key in the other."}),"\n",(0,t.jsx)(n.li,{children:"If both always participate, merge them into one table."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business Rule: Each student has one student_card."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["ERD: ",(0,t.jsx)(n.code,{children:"Student (student_id, Name) \u2014(Has)\u2014 Student_Card (Card_ID, Issue_Date)"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tables:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name\r\n);\r\n\r\nSTUDENT_CARD(\r\n   Card_ID PRIMARY KEY,\r\n   Issue_Date,\r\n   student_id UNIQUE,   -- ensures 1:1 mapping\r\n   FOREIGN KEY(student_id) REFERENCES STUDENT(student_id)\r\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, ",(0,t.jsx)(n.code,{children:"student_id"})," in ",(0,t.jsx)(n.code,{children:"STUDENT_CARD"})," ensures each student has at most one card."]}),"\n",(0,t.jsxs)(n.h3,{id:"one-to-many-1",children:["One-to-Many (1",":N",")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One entity instance relates to many instances of another entity."}),"\n",(0,t.jsxs)(n.li,{children:["Implementation:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Place the primary key of the "1" side as a foreign key in the "N" side.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business Rule: One instructor teaches many courses, but each course has only one instructor."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["ERD: ",(0,t.jsx)(n.code,{children:"Instructor (Instructor_ID, Name) \u2014(Teaches)\u2014 Course (course_id, Title)"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tables:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSTRUCTOR(\r\n   Instructor_ID PRIMARY KEY,\r\n   Name\r\n);\r\n\r\nCOURSE(\r\n   course_id PRIMARY KEY,\r\n   Title,\r\n   Instructor_ID,   -- FK from INSTRUCTOR\r\n   FOREIGN KEY(Instructor_ID) REFERENCES INSTRUCTOR(Instructor_ID)\r\n);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Each course points to one instructor, but an instructor can appear in many rows."}),"\n",(0,t.jsxs)(n.h3,{id:"many-to-many-m",children:["Many-to-Many (M",":N",")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One entity instance can relate to many instances of another, and vice versa."}),"\n",(0,t.jsxs)(n.li,{children:["Implementation:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create a new table (associative/bridge table)."}),"\n",(0,t.jsx)(n.li,{children:"Include the primary keys of both entities as foreign keys."}),"\n",(0,t.jsx)(n.li,{children:"If the relationship has attributes, they also go into this new table."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business Rule: Students enroll in many courses, and courses have many students. Enrollment has a Date."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["ERD: ",(0,t.jsx)(n.code,{children:"Student \u2014(Enrolls)\u2014 Course"})," with attribute ",(0,t.jsx)(n.code,{children:"Enroll_Date"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tables:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name,\r\n   DOB\r\n);\r\n\r\nCOURSE(\r\n   course_id PRIMARY KEY,\r\n   Title,\r\n   Credits\r\n);\r\n\r\nENROLLMENT(\r\n   student_id,   -- FK from STUDENT\r\n   course_id,    -- FK from COURSE\r\n   Enroll_Date,\r\n   PRIMARY KEY(student_id, course_id),\r\n   FOREIGN KEY(student_id) REFERENCES STUDENT(student_id),\r\n   FOREIGN KEY(course_id) REFERENCES COURSE(course_id)\r\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ENROLLMENT"})," resolves the M",":N"," relationship, and stores ",(0,t.jsx)(n.code,{children:"Enroll_Date"})," as an attribute."]}),"\n",(0,t.jsx)(n.h3,{id:"relationships-with-attributes",children:"Relationships with Attributes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If a relationship itself has attributes, it must be represented as a separate table, even if it\u2019s 1:1 or 1",":N","."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business Rule: Employee works on Project, with Hours as an attribute."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["ERD: ",(0,t.jsx)(n.code,{children:"Employee \u2014(Works_On[Hours])\u2014 Project"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tables:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EMPLOYEE(\r\n   Emp_ID PRIMARY KEY,\r\n   Name\r\n);\r\n\r\nPROJECT(\r\n   Proj_ID PRIMARY KEY,\r\n   Title\r\n);\r\n\r\nWORKS_ON(\r\n   Emp_ID,   -- FK from EMPLOYEE\r\n   Proj_ID,  -- FK from PROJECT\r\n   Hours,\r\n   PRIMARY KEY(Emp_ID, Proj_ID),\r\n   FOREIGN KEY(Emp_ID) REFERENCES EMPLOYEE(Emp_ID),\r\n   FOREIGN KEY(Proj_ID) REFERENCES PROJECT(Proj_ID)\r\n);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Relationship attributes always force a new table."}),"\n",(0,t.jsx)(n.h3,{id:"mapping-rules-recap",children:"Mapping Rules Recap"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Relationship Type"}),(0,t.jsx)(n.th,{children:"How to Map to Tables"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"1:1"})}),(0,t.jsx)(n.td,{children:"Add FK to one side (or merge if total participation)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"1:N"})}),(0,t.jsx)(n.td,{children:"Add FK from \u201c1\u201d side into \u201cN\u201d side"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"M:N"})}),(0,t.jsx)(n.td,{children:"Create new associative table with PKs as FKs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"With Attributes"})}),(0,t.jsx)(n.td,{children:"Always create new table (even for 1:1, 1:N)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"handling-weak-entities-composite-keys",children:"Handling weak entities composite keys"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A weak entity is an entity that cannot be uniquely identified by its own attributes alone."}),"\n",(0,t.jsx)(n.li,{children:"It depends on a strong (owner) entity for its identification."}),"\n",(0,t.jsxs)(n.li,{children:["Always has:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A partial key (attribute that only distinguishes instances relative to the owner)."}),"\n",(0,t.jsx)(n.li,{children:"An identifying relationship (double diamond in ERD) with its owner entity."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example (ERD):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Order (strong entity) has ",(0,t.jsx)(n.code,{children:"Order_ID"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Order_Item (weak entity) has ",(0,t.jsx)(n.code,{children:"Item_No, Quantity"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Item_No"})," alone doesn\u2019t uniquely identify an order item (two different orders may both have ",(0,t.jsx)(n.code,{children:"Item_No = 1"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"The combination of Order_ID + Item_No is needed."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"mapping-weak-entities-to-relational-model",children:"Mapping Weak Entities to Relational Model"}),"\n",(0,t.jsx)(n.p,{children:"When converting a weak entity to a relational table:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create a table for the weak entity."}),"\n",(0,t.jsxs)(n.li,{children:["Include:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The primary key of the owner entity (as a foreign key)."}),"\n",(0,t.jsx)(n.li,{children:"The partial key of the weak entity."}),"\n",(0,t.jsx)(n.li,{children:"Other attributes of the weak entity."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Together, (owner\u2019s PK + weak entity\u2019s partial key) = composite primary key."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"composite-keys",children:"Composite Keys"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A composite key is a primary key that consists of two or more attributes."}),"\n",(0,t.jsx)(n.li,{children:"Needed when no single attribute uniquely identifies a record."}),"\n",(0,t.jsxs)(n.li,{children:["Common in:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Weak entities."}),"\n",(0,t.jsxs)(n.li,{children:["Associative entities (resolving M",":N"," relationships)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Order_Item"})," \u2192 Composite Key = (Order_ID, Item_No)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Enrollment"})," (for Student\u2013Course M",":N"," relationship) \u2192 Composite Key = ",(0,t.jsx)(n.code,{children:"(student_id, course_id)"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"weak-entity-conversion",children:"Weak Entity Conversion"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A customer places many orders. Each order has an Order_ID."}),"\n",(0,t.jsx)(n.li,{children:"Each order contains multiple items. Each item has an Item_No (per order), product name, and quantity."}),"\n",(0,t.jsx)(n.li,{children:"Order_Item is a weak entity, identified by (Order_ID + Item_No)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"ERD:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scss",children:"Customer (Customer_ID, Name)\r\n      |\r\n      | places\r\n      |\r\n   Order (Order_ID, Date)\r\n      |\r\n      | contains\r\n      |\r\n   Order_Item (Item_No, Product, Quantity)   <-- Weak Entity\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CUSTOMER(\r\n   Customer_ID PRIMARY KEY,\r\n   Name\r\n);\r\n\r\nORDER(\r\n   Order_ID PRIMARY KEY,\r\n   Order_Date,\r\n   Customer_ID,\r\n   FOREIGN KEY(Customer_ID) REFERENCES CUSTOMER(Customer_ID)\r\n);\r\n\r\nORDER_ITEM(\r\n   Order_ID,   -- FK referencing ORDER\r\n   Item_No,    -- Partial key\r\n   Product,\r\n   Quantity,\r\n   PRIMARY KEY(Order_ID, Item_No),\r\n   FOREIGN KEY(Order_ID) REFERENCES ORDER(Order_ID)\r\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"key-differences-of-weak-entity-and-composite-key",children:"Key Differences of Weak Entity and Composite Key"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Concept"}),(0,t.jsx)(n.th,{children:"Weak Entity"}),(0,t.jsx)(n.th,{children:"Composite Key"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),(0,t.jsx)(n.td,{children:"Cannot exist without owner entity"}),(0,t.jsx)(n.td,{children:"A PK made of \u2265 2 attributes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Why Needed?"})}),(0,t.jsx)(n.td,{children:"Depends on strong entity for identity"}),(0,t.jsx)(n.td,{children:"No single attribute uniquely identifies a row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ERD Symbol"})}),(0,t.jsx)(n.td,{children:"Double rectangle, double diamond"}),(0,t.jsx)(n.td,{children:"Not a symbol, but implied in schema"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Example"})}),(0,t.jsx)(n.td,{children:"Order_Item depends on Order"}),(0,t.jsx)(n.td,{children:"Enrollment(student_id, course_id)"})]})]})]}),"\n",(0,t.jsxs)(n.h2,{id:"resolving-m-relationships",children:["Resolving M",":N"," relationships"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["In an ERD, we can easily draw a many-to-many (M",":N",") relationship between two entities."]}),"\n",(0,t.jsxs)(n.li,{children:["But in a relational database, we cannot directly implement M",":N"," relationships because:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A relational table must have a primary key."}),"\n",(0,t.jsx)(n.li,{children:"If we just try to add foreign keys on both sides, data redundancy and anomalies occur."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Solution \u2192 Introduce a new table (associative/bridge/junction table) to represent the M",":N"," relationship."]}),"\n",(0,t.jsx)(n.h3,{id:"general-rule-for-mapping",children:"General Rule for Mapping"}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"Entity A"})," and ",(0,t.jsx)(n.code,{children:"Entity B"})," have an M",":N"," relationship:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create separate tables for both entities."}),"\n",(0,t.jsx)(n.li,{children:"Create a new relationship table (associative entity)."}),"\n",(0,t.jsx)(n.li,{children:"In the new table:"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Include the primary keys of both entities (as foreign keys)."}),"\n",(0,t.jsx)(n.li,{children:"The combination of these foreign keys becomes the composite primary key."}),"\n",(0,t.jsx)(n.li,{children:"If the relationship has attributes, store them in this table."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Business Rule:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A student can enroll in many courses."}),"\n",(0,t.jsx)(n.li,{children:"A course can have many students."}),"\n",(0,t.jsx)(n.li,{children:"Enrollment has an attribute: Enroll_Date."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"ERD"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scss",children:"STUDENT -------- (Enrolls) -------- COURSE\r\n                    |\r\n                Enroll_Date\n"})}),"\n",(0,t.jsx)(n.p,{children:"Relational Tables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"STUDENT(\r\n   student_id PRIMARY KEY,\r\n   Name,\r\n   DOB\r\n);\r\n\r\nCOURSE(\r\n   course_id PRIMARY KEY,\r\n   Title,\r\n   Credits\r\n);\r\n\r\nENROLLMENT(                     -- Bridge table\r\n   student_id,                  -- FK from STUDENT\r\n   course_id,                   -- FK from COURSE\r\n   Enroll_Date,                 -- Relationship attribute\r\n   PRIMARY KEY(student_id, course_id),\r\n   FOREIGN KEY(student_id) REFERENCES STUDENT(student_id),\r\n   FOREIGN KEY(course_id) REFERENCES COURSE(course_id)\r\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ENROLLMENT"})," resolves the M",":N"," relationship and holds the attribute ",(0,t.jsx)(n.code,{children:"Enroll_Date"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"step-by-step-recap",children:"Step by Step Recap"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Step"}),(0,t.jsx)(n.th,{children:"Action"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"Identify M:N relationships in ERD"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"Create tables for both entities"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3"}),(0,t.jsxs)(n.td,{children:["Create a ",(0,t.jsx)(n.strong,{children:"new bridge table"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"4"}),(0,t.jsx)(n.td,{children:"Add both entities\u2019 PKs as FKs in bridge table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5"}),(0,t.jsxs)(n.td,{children:["Make ",(0,t.jsx)(n.strong,{children:"composite key"})," (PK1 + PK2) as the new table\u2019s PK"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"Include any relationship attributes in bridge table"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);