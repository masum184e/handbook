"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[63239],{28453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var r=s(96540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}},61548(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"rust/Web Application/WebAssembly","title":"WebAssembly","description":"WebAssembly (WASM) is a binary instruction format for a stack-based virtual machine that runs in modern browsers and other environments.","source":"@site/docs/rust/Web Application/4. WebAssembly.md","sourceDirName":"rust/Web Application","slug":"/rust/Web Application/WebAssembly","permalink":"/handbook/docs/rust/Web Application/WebAssembly","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{}}');var i=s(74848),l=s(28453);const t={},d=void 0,a={},c=[{value:"Why Rust + WASM?",id:"why-rust--wasm",level:2},{value:"Rust Tools for WASM Development",id:"rust-tools-for-wasm-development",level:2},{value:"Simple Rust + WASM Example",id:"simple-rust--wasm-example",level:2},{value:"Step 1: Install Tools",id:"step-1-install-tools",level:3},{value:"Step 2: Create a New Rust Library",id:"step-2-create-a-new-rust-library",level:3},{value:"Step 3: Update <code>Cargo.toml</code>",id:"step-3-update-cargotoml",level:3},{value:"Step 4: Write Rust Code (<code>src/lib.rs</code>)",id:"step-4-write-rust-code-srclibrs",level:3},{value:"Step 5: Compile to WASM",id:"step-5-compile-to-wasm",level:3},{value:"Step 6: Use WASM in HTML + JS",id:"step-6-use-wasm-in-html--js",level:3},{value:"Step 7: Run Locally",id:"step-7-run-locally",level:3},{value:"Rust WASM in Web &amp; Application Development",id:"rust-wasm-in-web--application-development",level:2},{value:"Key Benefits of Rust + WASM",id:"key-benefits-of-rust--wasm",level:2},{value:"Advanced Next Steps",id:"advanced-next-steps",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"WebAssembly (WASM) is a binary instruction format for a stack-based virtual machine that runs in modern browsers and other environments."}),"\n",(0,i.jsx)(n.p,{children:"Key points:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It\u2019s platform-independent: Runs on browsers, servers, and embedded systems."}),"\n",(0,i.jsx)(n.li,{children:"Near-native performance: Faster than JavaScript for computation-heavy tasks."}),"\n",(0,i.jsx)(n.li,{children:"Safe and sandboxed: Executes in a secure environment."}),"\n",(0,i.jsx)(n.li,{children:"Interoperable: Can be called from JavaScript and can call JavaScript functions."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"WASM use cases in web development:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Game engines in the browser"}),"\n",(0,i.jsx)(n.li,{children:"Image/video/audio processing"}),"\n",(0,i.jsx)(n.li,{children:"Mathematical simulations"}),"\n",(0,i.jsx)(n.li,{children:"High-performance web apps"}),"\n",(0,i.jsx)(n.li,{children:"Replacing slow JavaScript in performance-critical parts"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"why-rust--wasm",children:"Why Rust + WASM?"}),"\n",(0,i.jsx)(n.p,{children:"Rust is a perfect match for WASM because:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"High performance: Rust code compiles to highly optimized WASM bytecode."}),"\n",(0,i.jsx)(n.li,{children:"Memory safety: No buffer overflows or unsafe memory access."}),"\n",(0,i.jsx)(n.li,{children:"Tooling support: wasm-bindgen and wasm-pack make Rust \u2194 JS interop seamless."}),"\n",(0,i.jsx)(n.li,{children:"Ecosystem: Rust crates like yew and seed help build full web frontends."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rust-tools-for-wasm-development",children:"Rust Tools for WASM Development"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tool"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wasm-pack"})}),(0,i.jsx)(n.td,{children:"Compiles Rust \u2192 WASM, generates JS bindings"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wasm-bindgen"})}),(0,i.jsx)(n.td,{children:"Connects Rust code to JS easily"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cargo-web"})}),(0,i.jsx)(n.td,{children:"Alternative toolchain for Rust \u2192 WASM (older)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"yew"}),", ",(0,i.jsx)(n.code,{children:"seed"})]}),(0,i.jsx)(n.td,{children:"Frontend frameworks in Rust (like React)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"simple-rust--wasm-example",children:"Simple Rust + WASM Example"}),"\n",(0,i.jsx)(n.p,{children:"We\u2019ll create a Rust function compiled to WASM, called from JavaScript in the browser."}),"\n",(0,i.jsx)(n.h3,{id:"step-1-install-tools",children:"Step 1: Install Tools"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cargo install wasm-pack\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-create-a-new-rust-library",children:"Step 2: Create a New Rust Library"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cargo new --lib wasm_demo\r\ncd wasm_demo\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"step-3-update-cargotoml",children:["Step 3: Update ",(0,i.jsx)(n.code,{children:"Cargo.toml"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[package]\r\nname = "wasm_demo"\r\nversion = "0.1.0"\r\nedition = "2021"\r\n\r\n[lib]\r\ncrate-type = ["cdylib"]\r\n\r\n[dependencies]\r\nwasm-bindgen = "0.2"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'crate-type = ["cdylib"]'})," \u2192 generates WASM-compatible library."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wasm-bindgen"})," \u2192 helps JS interop."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"step-4-write-rust-code-srclibrs",children:["Step 4: Write Rust Code (",(0,i.jsx)(n.code,{children:"src/lib.rs"}),")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use wasm_bindgen::prelude::*;\r\n\r\n// Export a function to JS\r\n#[wasm_bindgen]\r\npub fn add_numbers(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\r\n\r\n// Export a greeting function\r\n#[wasm_bindgen]\r\npub fn greet(name: &str) -> String {\r\n    format!("Hello, {}! Welcome to Rust + WASM!", name)\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"#[wasm_bindgen]"})," \u2192 marks function to be available in JavaScript."]}),"\n",(0,i.jsxs)(n.li,{children:["Rust types like ",(0,i.jsx)(n.code,{children:"i32"})," and ",(0,i.jsx)(n.code,{children:"&str"})," are automatically converted to JS types."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-5-compile-to-wasm",children:"Step 5: Compile to WASM"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"wasm-pack build --target web\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--target web"})," \u2192 outputs WASM + JS bindings for web browsers."]}),"\n",(0,i.jsxs)(n.p,{children:["Result folder: ",(0,i.jsx)(n.code,{children:"pkg/"})," contains:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wasm_demo_bg.wasm"})," \u2192 compiled WASM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wasm_demo.js"})," \u2192 JS glue code"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-6-use-wasm-in-html--js",children:"Step 6: Use WASM in HTML + JS"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"index.html"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Rust + WASM Demo</title>\r\n</head>\r\n<body>\r\n    <h1>Rust + WASM Demo</h1>\r\n    <p id="result"></p>\r\n\r\n    <script type="module">\r\n        import init, { add_numbers, greet } from "./pkg/wasm_demo.js";\r\n\r\n        async function run() {\r\n            await init(); // Initialize WASM\r\n\r\n            const sum = add_numbers(5, 7);\r\n            const message = greet("Alice");\r\n\r\n            document.getElementById("result").innerHTML =\r\n                `Sum: ${sum} <br> Message: ${message}`;\r\n        }\r\n\r\n        run();\r\n    <\/script>\r\n</body>\r\n</html>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"import init, {...}"})," \u2192 imports the WASM module and functions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"await init()"})," \u2192 initializes WASM memory and environment."]}),"\n",(0,i.jsxs)(n.li,{children:["Rust functions ",(0,i.jsx)(n.code,{children:"add_numbers"})," and ",(0,i.jsx)(n.code,{children:"greet"})," are callable directly from JS."]}),"\n",(0,i.jsx)(n.li,{children:"Output is rendered in the browser."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-7-run-locally",children:"Step 7: Run Locally"}),"\n",(0,i.jsx)(n.p,{children:"You can serve the HTML using a simple HTTP server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"python -m http.server 8000\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})," to see:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Sum: 12\r\nMessage: Hello, Alice! Welcome to Rust + WASM!\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rust-wasm-in-web--application-development",children:"Rust WASM in Web & Application Development"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Frontend performance: Rust + WASM can replace heavy JS computations."}),"\n",(0,i.jsx)(n.li,{children:"Shared code: You can share logic between server (Rust backend) and client (WASM frontend)."}),"\n",(0,i.jsx)(n.li,{children:"Web frameworks: Yew or Seed allows building full SPA (Single Page Applications) using Rust + WASM."}),"\n",(0,i.jsx)(n.li,{children:"Server-side WASM: WASM can run server-side too (e.g., in wasmtime or Cloudflare Workers)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-benefits-of-rust--wasm",children:"Key Benefits of Rust + WASM"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Benefit"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Performance"}),(0,i.jsx)(n.td,{children:"Near-native speed in browser"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Safety"}),(0,i.jsx)(n.td,{children:"Memory-safe and thread-safe"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Interoperability"}),(0,i.jsx)(n.td,{children:"Can call JS functions and be called by JS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Reusability"}),(0,i.jsx)(n.td,{children:"Logic can run in browser & server"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Modern Tooling"}),(0,i.jsx)(n.td,{children:"wasm-pack, wasm-bindgen, bundlers, frameworks"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"advanced-next-steps",children:"Advanced Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Build a full SPA using Yew."}),"\n",(0,i.jsx)(n.li,{children:"Use async Rust in WASM for web requests."}),"\n",(0,i.jsx)(n.li,{children:"Integrate Rust + WASM + WebGL for games or graphics."}),"\n",(0,i.jsx)(n.li,{children:"Package WASM as npm modules for JS ecosystems."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);