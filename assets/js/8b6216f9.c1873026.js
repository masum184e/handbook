"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[3883],{28453(e,n,s){s.d(n,{R:()=>d,x:()=>l});var i=s(96540);const r={},c=i.createContext(r);function d(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(c.Provider,{value:n},e.children)}},95518(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"rest-api-design/Caching Strategies","title":"Caching","description":"Caching reduces the number of requests that need to hit the server, saving bandwidth, CPU cycles, and database queries. This is essential for highly scalable APIs, especially when serving thousands or millions of clients.","source":"@site/docs/rest-api-design/35. Caching Strategies.md","sourceDirName":"rest-api-design","slug":"/rest-api-design/Caching Strategies","permalink":"/handbook/docs/rest-api-design/Caching Strategies","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":37,"frontMatter":{"title":"Caching","sidebar_position":37},"sidebar":"restApiSidebar","previous":{"title":"API Monitoring","permalink":"/handbook/docs/rest-api-design/API Monitoring"},"next":{"title":"Rate Limiting","permalink":"/handbook/docs/rest-api-design/Rate Limiting"}}');var r=s(74848),c=s(28453);const d={title:"Caching",sidebar_position:37},l=void 0,a={},t=[{value:"ETag",id:"etag",level:2},{value:"How it works",id:"how-it-works",level:3},{value:"Last-Modified",id:"last-modified",level:2},{value:"How it works:",id:"how-it-works-1",level:3},{value:"Cache-Control",id:"cache-control",level:2},{value:"Practical Strategy for REST APIs",id:"practical-strategy-for-rest-apis",level:3},{value:"Full REST API Response with All Headers",id:"full-rest-api-response-with-all-headers",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Caching reduces the number of requests that need to hit the server, saving bandwidth, CPU cycles, and database queries. This is essential for highly scalable APIs, especially when serving thousands or millions of clients."}),"\n",(0,r.jsx)(n.p,{children:"There are two main caching types in HTTP REST APIs:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Client-side caching \u2013 handled by the client/browser."}),"\n",(0,r.jsx)(n.li,{children:"Server-side caching \u2013 handled by proxies or the server itself."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"HTTP caching uses headers to communicate caching rules between clients and servers."}),"\n",(0,r.jsx)(n.h2,{id:"etag",children:"ETag"}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.code,{children:"ETag"})," is a unique identifier (usually a hash or version string) for a specific version of a resource. The server generates it, and the client can use it to check if the resource has changed."]}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works",children:"How it works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Client requests a resource:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/users/123\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Server responds with the resource and an ",(0,r.jsx)(n.code,{children:"ETag"})," header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'HTTP/1.1 200 OK\r\nETag: "abc123"\r\nContent-Type: application/json\r\n\r\n{ "id": 123, "name": "Alice" }\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Next time, client asks if the resource has changed using ",(0,r.jsx)(n.code,{children:"If-None-Match"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'GET /api/users/123\r\nIf-None-Match: "abc123"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"If resource hasn\u2019t changed:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"HTTP/1.1 304 Not Modified\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No body is sent."}),"\n",(0,r.jsx)(n.li,{children:"Client can use cached version."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Saves bandwidth."}),"\n",(0,r.jsx)(n.li,{children:"Avoids unnecessary data transfer."}),"\n",(0,r.jsx)(n.li,{children:"Improves API scalability."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"last-modified",children:"Last-Modified"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Last-Modified"})," is an HTTP header indicating the last time the resource was changed. Clients can use it to validate cache freshness."]}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works-1",children:"How it works:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Server responds with the Last-Modified header:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"HTTP/1.1 200 OK\r\nLast-Modified: Wed, 08 Jan 2026 10:00:00 GMT\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Client sends conditional request:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"GET /api/users/123\r\nIf-Modified-Since: Wed, 08 Jan 2026 10:00:00 GMT\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Server checks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If resource has not changed, respond ",(0,r.jsx)(n.code,{children:"304 Not Modified"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If resource has changed, respond ",(0,r.jsx)(n.code,{children:"200 OK"})," with new content."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Benefits:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Simple to implement."}),"\n",(0,r.jsx)(n.li,{children:"Works well when updates are time-based."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cache-control",children:"Cache-Control"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," gives explicit instructions on how long and under what conditions a response can be cached."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common directives"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Directive"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"public"})}),(0,r.jsxs)(n.td,{children:["Response can be cached by ",(0,r.jsx)(n.strong,{children:"any cache"})," (client, proxy)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"private"})}),(0,r.jsxs)(n.td,{children:["Response can only be cached by ",(0,r.jsx)(n.strong,{children:"client"}),", not proxy."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max-age=seconds"})}),(0,r.jsx)(n.td,{children:"Maximum time (in seconds) the response is considered fresh."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"no-cache"})}),(0,r.jsx)(n.td,{children:"Client must revalidate with server before using cached data."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"no-store"})}),(0,r.jsx)(n.td,{children:"Never cache this response."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example in REST API:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'GET /api/products\r\nResponse:\r\nHTTP/1.1 200 OK\r\nCache-Control: public, max-age=3600\r\nContent-Type: application/json\r\n\r\n[\r\n  { "id": 101, "name": "Laptop" },\r\n  { "id": 102, "name": "Phone" }\r\n]\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client or proxy can cache this response for 1 hour."}),"\n",(0,r.jsx)(n.li,{children:"After 1 hour, it must check the server again."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Combination with ETag/Last-Modified:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You can combine ",(0,r.jsx)(n.code,{children:"Cache-Control"})," with ",(0,r.jsx)(n.code,{children:"ETag"})," or ",(0,r.jsx)(n.code,{children:"Last-Modified"})," for conditional caching, which maximizes performance."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"practical-strategy-for-rest-apis",children:"Practical Strategy for REST APIs"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Static resources (e.g., product catalog images)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"Cache-Control: public, max-age=86400"})," (1 day)"]}),"\n",(0,r.jsx)(n.li,{children:"Use ETag for updates."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Dynamic resources (e.g., user profiles)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"Cache-Control: private, max-age=60"})," (1 minute)"]}),"\n",(0,r.jsx)(n.li,{children:"Use ETag or Last-Modified for conditional GETs."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Sensitive resources (e.g., banking info)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"Cache-Control: no-store"})," to avoid caching."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"full-rest-api-response-with-all-headers",children:"Full REST API Response with All Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'GET /api/users/123\r\nResponse:\r\nHTTP/1.1 200 OK\r\nContent-Type: application/json\r\nETag: "a1b2c3"\r\nLast-Modified: Wed, 08 Jan 2026 10:00:00 GMT\r\nCache-Control: private, max-age=300\r\n\r\n{\r\n  "id": 123,\r\n  "name": "Alice",\r\n  "email": "alice@example.com"\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Next request after 2 minutes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'GET /api/users/123\r\nIf-None-Match: "a1b2c3"\r\nIf-Modified-Since: Wed, 08 Jan 2026 10:00:00 GMT\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If unchanged \u2192 ",(0,r.jsx)(n.code,{children:"304 Not Modified"})," \u2192 client uses cached data."]}),"\n",(0,r.jsxs)(n.li,{children:["If changed \u2192 ",(0,r.jsx)(n.code,{children:"200 OK"})," with new data \u2192 update cache."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);