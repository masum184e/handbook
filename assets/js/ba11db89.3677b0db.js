"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[26329],{14416(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"rest-api-design/Cache Control","title":"Cache Control","description":"Cache control in REST API design refers to how a server communicates caching policies to clients and intermediaries (like browsers, proxies, and CDNs) using HTTP headers. Proper cache control helps improve performance, reduce server load, and provide a better user experience by avoiding unnecessary repeat requests.","source":"@site/docs/rest-api-design/7. Cache Control.md","sourceDirName":"rest-api-design","slug":"/rest-api-design/Cache Control","permalink":"/handbook/docs/rest-api-design/Cache Control","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Cache Control","sidebar_position":9},"sidebar":"restApiSidebar","previous":{"title":"Error Response","permalink":"/handbook/docs/rest-api-design/Error Response"},"next":{"title":"E-Tag","permalink":"/handbook/docs/rest-api-design/E-Tag"}}');var i=r(74848),c=r(28453);const t={title:"Cache Control",sidebar_position:9},l=void 0,o={},a=[{value:"Importance of Cache Control",id:"importance-of-cache-control",level:2},{value:"Key Cache-Control Header Directives",id:"key-cache-control-header-directives",level:2},{value:"How Cacheability Is Controlled",id:"how-cacheability-is-controlled",level:2},{value:"Example of cache control",id:"example-of-cache-control",level:2},{value:"Static Resource",id:"static-resource",level:3},{value:"API Response",id:"api-response",level:3},{value:"Sensitive/Dynamic Data",id:"sensitivedynamic-data",level:3},{value:"Combining Directives",id:"combining-directives",level:3},{value:"How Cache-Control Fits into REST API Workflow",id:"how-cache-control-fits-into-rest-api-workflow",level:2},{value:"Implement Cache Control",id:"implement-cache-control",level:2},{value:"Other Related HTTP Headers",id:"other-related-http-headers",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Cache control in REST API design refers to how a server communicates caching policies to clients and intermediaries (like browsers, proxies, and CDNs) using HTTP headers. Proper cache control helps improve performance, reduce server load, and provide a better user experience by avoiding unnecessary repeat requests."}),"\n",(0,i.jsx)(n.h2,{id:"importance-of-cache-control",children:"Importance of Cache Control"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reduces Latency:"})," Cached responses are served faster."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Minimizes Server Load:"})," Fewer requests hit the backend."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Saves Bandwidth:"})," Avoids transferring the same data repeatedly."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistency vs. Freshness:"})," Balances performance with ensuring up-to-date information."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-cache-control-header-directives",children:"Key Cache-Control Header Directives"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Cache-Control"})," header is the primary way to control caching behavior in REST APIs."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Directive"}),(0,i.jsx)(n.th,{children:"Meaning"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"public"})}),(0,i.jsx)(n.td,{children:"Response can be cached by any cache (browser, proxy, CDN)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"private"})}),(0,i.jsx)(n.td,{children:"Response is intended for a single user (e.g., personalized content)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"no-cache"})}),(0,i.jsx)(n.td,{children:"Forces revalidation before using cached data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"no-store"})}),(0,i.jsx)(n.td,{children:"Prevents any caching at all."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"max-age=<seconds>"})}),(0,i.jsx)(n.td,{children:"Specifies how long (in seconds) the response can be cached."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"must-revalidate"})}),(0,i.jsx)(n.td,{children:"Forces caches to obey expiration times strictly."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"how-cacheability-is-controlled",children:"How Cacheability Is Controlled"}),"\n",(0,i.jsx)(n.p,{children:"Cacheability in REST APIs is mainly controlled using HTTP cache headers:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Header"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Cache-Control"})}),(0,i.jsx)(n.td,{children:"Main directive for caching policies"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ETag"})}),(0,i.jsx)(n.td,{children:"Entity Tag for validating cached responses"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Last-Modified"})}),(0,i.jsx)(n.td,{children:"Timestamp for resource freshness"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Expires"})}),(0,i.jsx)(n.td,{children:"Date-time when response becomes stale"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"example-of-cache-control",children:"Example of cache control"}),"\n",(0,i.jsx)(n.h3,{id:"static-resource",children:"Static Resource"}),"\n",(0,i.jsx)(n.p,{children:"Header Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"Cache-Control: public, max-age=31536000\n"})}),"\n",(0,i.jsx)(n.p,{children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cached for 1 year."}),"\n",(0,i.jsx)(n.li,{children:"Publicly cacheable by CDNs and browsers."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"api-response",children:"API Response"}),"\n",(0,i.jsx)(n.p,{children:"Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"GET /products\n"})}),"\n",(0,i.jsx)(n.p,{children:"Response Header"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"Cache-Control: public, max-age=60\n"})}),"\n",(0,i.jsx)(n.p,{children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cached for 60 seconds."}),"\n",(0,i.jsx)(n.li,{children:"Public caches and browsers can store the response for a short duration."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sensitivedynamic-data",children:"Sensitive/Dynamic Data"}),"\n",(0,i.jsx)(n.p,{children:"Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"GET /user/profile\n"})}),"\n",(0,i.jsx)(n.p,{children:"Response Header"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"Cache-Control: private, no-store\n"})}),"\n",(0,i.jsx)(n.p,{children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Private: Only for the specific user\u2019s browser cache."}),"\n",(0,i.jsx)(n.li,{children:"No-store: Avoid caching altogether to prevent sensitive information from being stored."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"combining-directives",children:"Combining Directives"}),"\n",(0,i.jsx)(n.p,{children:"Header Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"Cache-Control: private, max-age=0, no-cache, must-revalidate\n"})}),"\n",(0,i.jsx)(n.p,{children:"Behavior:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Private: Only for that user."}),"\n",(0,i.jsx)(n.li,{children:"max-age=0: Response expires immediately."}),"\n",(0,i.jsx)(n.li,{children:"no-cache: Client must check with the server before using cached data."}),"\n",(0,i.jsx)(n.li,{children:"must-revalidate: Cache must not serve stale content."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"how-cache-control-fits-into-rest-api-workflow",children:"How Cache-Control Fits into REST API Workflow"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server Sets the Cache-Control Header:"})," During the response."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Client or Intermediary Respects It:"})," Determines whether to use cached content or request new data."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stale Content Handling:"})," APIs can use other headers like ETag and Last-Modified for conditional requests."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implement-cache-control",children:"Implement Cache Control"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'app.get("/products", (req, res) => {\r\n  res.set("Cache-Control", "public, max-age=60");\r\n  res.json({\r\n    products: [\r\n      /* product data */\r\n    ],\r\n  });\r\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"other-related-http-headers",children:"Other Related HTTP Headers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ETag: Entity tag used to check if the cached version is still valid."}),"\n",(0,i.jsx)(n.li,{children:"Last-Modified: Timestamp indicating when the resource was last updated."}),"\n",(0,i.jsx)(n.li,{children:"Expires: Legacy header; often replaced by Cache-Control: max-age."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,r){r.d(n,{R:()=>t,x:()=>l});var s=r(96540);const i={},c=s.createContext(i);function t(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);