"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[92755],{28453(e,s,n){n.d(s,{R:()=>i,x:()=>c});var r=n(96540);const t={},a=r.createContext(t);function i(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:s},e.children)}},54904(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"system-design/Caching","title":"Caching","description":"Caching is a system design strategy used to store a copy of data in a temporary storage location \u2014 known as a cache \u2014 so future requests for that data can be served faster. The primary purpose is to reduce latency, improve performance, and reduce the load on the main data source (like a database or API).","source":"@site/docs/system-design/4. Caching.md","sourceDirName":"system-design","slug":"/system-design/Caching","permalink":"/handbook/docs/system-design/Caching","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"systemDesignSidebar","previous":{"title":"Category of Data","permalink":"/handbook/docs/system-design/Category of Data"},"next":{"title":"Reverse Proxy","permalink":"/handbook/docs/system-design/Reverse Proxy"}}');var t=n(74848),a=n(28453);const i={sidebar_position:5},c=void 0,d={},o=[{value:"How Caching Works",id:"how-caching-works",level:2},{value:"Types of Caching",id:"types-of-caching",level:2},{value:"Example of Cache",id:"example-of-cache",level:2},{value:"Code Example",id:"code-example",level:3},{value:"Cache Invalidation &amp; Expiry",id:"cache-invalidation--expiry",level:2},{value:"Challenges of Caching",id:"challenges-of-caching",level:2}];function l(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"Caching is a system design strategy used to store a copy of data in a temporary storage location \u2014 known as a cache \u2014 so future requests for that data can be served faster. The primary purpose is to reduce latency, improve performance, and reduce the load on the main data source (like a database or API)."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Caching is used to optimized read operation."}),"\n",(0,t.jsx)(s.li,{children:"Queue is used to optimized write operation."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"how-caching-works",children:"How Caching Works"}),"\n",(0,t.jsx)(s.p,{children:"When a client (like a browser or a backend system) requests data:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Check the cache:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"If the data is present (called a cache hit), it is returned immediately."}),"\n",(0,t.jsx)(s.li,{children:"If the data is absent (called a cache miss), the system fetches it from the main source, stores it in the cache, and then returns it."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Future requests"})," for the same data will be faster because they are served from the cache."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"types-of-caching",children:"Types of Caching"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"In-Memory Cache"})}),(0,t.jsx)(s.td,{children:"Fastest, stores data in RAM (e.g., Redis, Memcached)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Database Cache"})}),(0,t.jsx)(s.td,{children:"Results of DB queries cached inside or near the DB system."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Application Cache"})}),(0,t.jsx)(s.td,{children:"Cached within the application layer (e.g., objects or method results)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Browser Cache"})}),(0,t.jsx)(s.td,{children:"Stores static assets like HTML, CSS, JS on the client-side."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"CDN Cache"})}),(0,t.jsx)(s.td,{children:"Stores static resources in geographically distributed servers (CDNs)."})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"example-of-cache",children:"Example of Cache"}),"\n",(0,t.jsx)(s.p,{children:"Suppose your system shows user profiles retrieved from a database."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Without Cache:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"User Request \u2192 App Server \u2192 Database \u2192 Fetch Data \u2192 Return to User (slow)\n"})}),"\n",(0,t.jsx)(s.p,{children:"If 1000 users request the same profile, the DB is hit 1000 times."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"With Cache:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"User Request \u2192 App Server \u2192 Check Redis Cache\r\n              \u2192 [If Hit] Return Cached Data (fast)\r\n              \u2192 [If Miss] Fetch from DB \u2192 Save to Redis \u2192 Return to User\n"})}),"\n",(0,t.jsx)(s.p,{children:"Now, the DB is only hit once, and subsequent requests are served from Redis."}),"\n",(0,t.jsx)(s.h3,{id:"code-example",children:"Code Example"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'const redis = require("redis");\r\nconst express = require("express");\r\nconst app = express();\r\nconst client = redis.createClient();\r\n\r\n// Simulated database call\r\nconst getUserFromDB = async (id) => {\r\n  console.log("Fetching from database...");\r\n  return { id, name: "John Doe", age: 30 };\r\n};\r\n\r\napp.get("/user/:id", async (req, res) => {\r\n  const userId = req.params.id;\r\n\r\n  client.get(userId, async (err, cachedData) => {\r\n    if (cachedData) {\r\n      return res.send(JSON.parse(cachedData)); // Cache hit\r\n    }\r\n\r\n    const userData = await getUserFromDB(userId); // Cache miss\r\n    client.setex(userId, 3600, JSON.stringify(userData)); // Store in Redis for 1 hour\r\n    res.send(userData);\r\n  });\r\n});\r\n\r\napp.listen(3000, () => console.log("Server running"));\n'})}),"\n",(0,t.jsx)(s.p,{children:"When you perform update or delete, you should also delete the cache."}),"\n",(0,t.jsx)(s.h2,{id:"cache-invalidation--expiry",children:"Cache Invalidation & Expiry"}),"\n",(0,t.jsx)(s.p,{children:"Caching isn\u2019t useful without a strategy to expire or update data:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Time-based Expiry (TTL):"})," Data expires after a certain time."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Manual Invalidation:"})," Delete/update cache when underlying data changes."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"LRU (Least Recently Used):"})," Evict least-used items when cache is full."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"challenges-of-caching",children:"Challenges of Caching"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Cache invalidation is hard."}),"\n",(0,t.jsx)(s.li,{children:"Stale data can cause inconsistencies."}),"\n",(0,t.jsx)(s.li,{children:"Memory constraints in cache storage."}),"\n",(0,t.jsx)(s.li,{children:"Complexity in managing distributed caches."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);