"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[3166],{28453(e,r,n){n.d(r,{R:()=>t,x:()=>d});var l=n(96540);const s={},i=l.createContext(s);function t(e){const r=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(i.Provider,{value:r},e.children)}},57794(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"system-design/Security/Firewall","title":"Firewall","description":"A Firewall is a security component in system and network design that monitors, filters, and controls incoming and outgoing traffic based on pre-defined security rules. It acts as a barrier between trusted and untrusted networks, such as a corporate network and the public internet.","source":"@site/docs/system-design/21. Security/10. Firewall.md","sourceDirName":"system-design/21. Security","slug":"/system-design/Security/Firewall","permalink":"/handbook/docs/system-design/Security/Firewall","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{},"sidebar":"systemDesignSidebar","previous":{"title":"VPN","permalink":"/handbook/docs/system-design/Security/VPN"}}');var s=n(74848),i=n(28453);const t={},d=void 0,c={},o=[{value:"Types of Firewall",id:"types-of-firewall",level:2},{value:"Firewall Workflow",id:"firewall-workflow",level:2},{value:"Where Firewalls Fit",id:"where-firewalls-fit",level:2},{value:"Stateful vs Stateless Firewall",id:"stateful-vs-stateless-firewall",level:2},{value:"Firewall Rule Syntax",id:"firewall-rule-syntax",level:2},{value:"Examplf of Firewall",id:"examplf-of-firewall",level:2}];function a(e){const r={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"A Firewall is a security component in system and network design that monitors, filters, and controls incoming and outgoing traffic based on pre-defined security rules. It acts as a barrier between trusted and untrusted networks, such as a corporate network and the public internet."}),"\n",(0,s.jsx)(r.p,{children:"Think of it as a gatekeeper: it decides what traffic is allowed to pass and what should be blocked."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Why Use a Firewall in System Design?"}),"\r\nIn modern system design, firewalls are essential for:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Network security"}),"\n",(0,s.jsx)(r.li,{children:"Preventing unauthorized access"}),"\n",(0,s.jsx)(r.li,{children:"Monitoring suspicious activities"}),"\n",(0,s.jsx)(r.li,{children:"Segmenting internal services"}),"\n",(0,s.jsx)(r.li,{children:"Compliance (e.g., PCI-DSS, HIPAA)"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"types-of-firewall",children:"Types of Firewall"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Packet-filtering Firewall"})}),(0,s.jsx)(r.td,{children:"Filters traffic based on IPs, ports, protocols"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Stateful Firewall"})}),(0,s.jsx)(r.td,{children:"Tracks active connections; allows return traffic"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Application-layer Firewall (Proxy)"})}),(0,s.jsx)(r.td,{children:"Filters traffic for specific applications (e.g., HTTP, FTP)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Next-Gen Firewall (NGFW)"})}),(0,s.jsx)(r.td,{children:"Includes IDS/IPS, deep packet inspection, malware filtering"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Cloud-based Firewall (FWaaS)"})}),(0,s.jsx)(r.td,{children:"Firewall as a service for cloud-native apps"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"firewall-workflow",children:"Firewall Workflow"}),"\n",(0,s.jsx)(r.p,{children:"Typical Rules Defined in a Firewall:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Allow HTTP (port 80) and HTTPS (port 443) from public"}),"\n",(0,s.jsx)(r.li,{children:"Block all access to internal databases from outside"}),"\n",(0,s.jsx)(r.li,{children:"Only allow SSH from internal network"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"                    +------------------------+\r\n                    |    Internet (Public)   |\r\n                    +-----------+------------+\r\n                                |\r\n                                v\r\n                      +------------------+\r\n                      |   Firewall (NGFW)|\r\n                      +--------+---------+\r\n                               |\r\n        +----------------------+----------------------+\r\n        |                      |                      |\r\n        v                      v                      v\r\n  Web Server (80/443)   App Server (8080)      DB Server (3306)\r\n   [Public Access]      [Internal Access]      [No Internet Access]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Behavior:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Firewall allows HTTP/HTTPS from the internet to Web Server"}),"\n",(0,s.jsx)(r.li,{children:"App Server only accepts traffic from Web Server IPs"}),"\n",(0,s.jsx)(r.li,{children:"DB Server only accepts traffic from App Server, not from outside"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"where-firewalls-fit",children:"Where Firewalls Fit"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Layer"}),(0,s.jsx)(r.th,{children:"Example"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Network Layer"})}),(0,s.jsx)(r.td,{children:"AWS Security Groups, VPC ACLs"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Host-based"})}),(0,s.jsxs)(r.td,{children:["Linux ",(0,s.jsx)(r.code,{children:"iptables"}),", Windows Firewall"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Application Layer"})}),(0,s.jsx)(r.td,{children:"Web Application Firewall (WAF)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Cloud-native"})}),(0,s.jsx)(r.td,{children:"GCP Firewall Rules, Azure NSGs"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"stateful-vs-stateless-firewall",children:"Stateful vs Stateless Firewall"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Feature"}),(0,s.jsx)(r.th,{children:"Stateless"}),(0,s.jsx)(r.th,{children:"Stateful"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Tracks sessions"}),(0,s.jsx)(r.td,{children:"\u274c No"}),(0,s.jsx)(r.td,{children:"\u2705 Yes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Performance"}),(0,s.jsx)(r.td,{children:"\u26a1 Fast"}),(0,s.jsx)(r.td,{children:"\ud83d\udea6 Slightly slower due to tracking"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Security"}),(0,s.jsx)(r.td,{children:"Basic filtering"}),(0,s.jsx)(r.td,{children:"More intelligent, prevents spoofing"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Example Use"}),(0,s.jsx)(r.td,{children:"Edge routers"}),(0,s.jsx)(r.td,{children:"Internal firewalls, app security"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"firewall-rule-syntax",children:"Firewall Rule Syntax"}),"\n",(0,s.jsx)(r.p,{children:"In a cloud provider like AWS, this could look like:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Security Group: WebServerSG\r\nInbound:\r\n- Protocol: TCP, Port: 80, Source: 0.0.0.0/0 (Allow HTTP)\r\n- Protocol: TCP, Port: 443, Source: 0.0.0.0/0 (Allow HTTPS)\r\nOutbound:\r\n- Protocol: ALL, Destination: 0.0.0.0/0 (Allow all)\r\n\r\nSecurity Group: DBServerSG\r\nInbound:\r\n- Protocol: TCP, Port: 3306, Source: AppServerSG (Allow only app)\n"})}),"\n",(0,s.jsx)(r.h2,{id:"examplf-of-firewall",children:"Examplf of Firewall"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Problem:"})," You\u2019re building an online store with web servers, application servers, and a database. You want to:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Allow customers to browse and buy products online"}),"\n",(0,s.jsx)(r.li,{children:"Prevent hackers from directly accessing the database"}),"\n",(0,s.jsx)(r.li,{children:"Protect against DDoS or port scans"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Solution:"})," Implement a firewall with rules like:"]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Rule"}),(0,s.jsx)(r.th,{children:"Action"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Allow TCP 80/443 to web server"}),(0,s.jsx)(r.td,{children:"\u2705 Allow"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Allow TCP 3306 from App Server IP"}),(0,s.jsx)(r.td,{children:"\u2705 Allow"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Block all incoming traffic to DB"}),(0,s.jsx)(r.td,{children:"\u274c Deny"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Block all unused ports"}),(0,s.jsx)(r.td,{children:"\u274c Deny"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Limit SSH to internal IPs"}),(0,s.jsx)(r.td,{children:"\u2705 Allow"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);