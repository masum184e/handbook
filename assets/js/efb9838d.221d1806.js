"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[14150],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>l});var s=i(96540);const d={},r=s.createContext(d);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},74184(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>x,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"nginx/Auto Index","title":"Auto Index","description":"The autoindex directive enables NGINX to automatically generate a directory listing when a client requests a directory URL that does not contain an index file.","source":"@site/docs/nginx/15. Auto Index.md","sourceDirName":"nginx","slug":"/nginx/Auto Index","permalink":"/handbook/docs/nginx/Auto Index","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{},"sidebar":"nginxApiSidebar","previous":{"title":"Index Files","permalink":"/handbook/docs/nginx/Index Files"},"next":{"title":"SSL_TLS setup","permalink":"/handbook/docs/nginx/SSL_TLS setup"}}');var d=i(74848),r=i(28453);const t={},l=void 0,o={},c=[{value:"Context",id:"context",level:2},{value:"Basic Example",id:"basic-example",level:2},{value:"Autoindex with Custom Format (JSON)",id:"autoindex-with-custom-format-json",level:2},{value:"Combining autoindex with index",id:"combining-autoindex-with-index",level:2},{value:"Styling Autoindex Listings",id:"styling-autoindex-listings",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Using autoindex with try_files",id:"using-autoindex-with-try_files",level:2},{value:"Example: Production Use Case",id:"example-production-use-case",level:2},{value:"Disabling Autoindex Globally",id:"disabling-autoindex-globally",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.strong,{children:"autoindex"})," directive enables NGINX to automatically generate a directory listing when a client requests a directory URL that does not contain an index file."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"In other words:"})}),"\n",(0,d.jsx)(n.p,{children:"Instead of returning a 403/404 error for a directory with no index, NGINX lists all files and subdirectories."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Example:"})," ",(0,d.jsx)(n.a,{href:"http://example.com/downloads/",children:"http://example.com/downloads/"})]}),"\n",(0,d.jsxs)(n.p,{children:["If ",(0,d.jsx)(n.code,{children:"/downloads/"})," has no ",(0,d.jsx)(n.code,{children:"index.html"})," and ",(0,d.jsx)(n.code,{children:"autoindex on"})," is enabled, NGINX shows:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"File1.zip"}),"\n",(0,d.jsx)(n.li,{children:"File2.pdf"}),"\n",(0,d.jsx)(n.li,{children:"Subfolder/"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Syntax"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-nginx",children:"autoindex on | off;\r\nautoindex_format html | json;\n"})}),"\n",(0,d.jsx)(n.p,{children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"on"}),(0,d.jsx)(n.td,{children:"Enable directory listing"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"off"}),(0,d.jsx)(n.td,{children:"Disable directory listing (default)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"html"}),(0,d.jsx)(n.td,{children:"Generate HTML page (default)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"json"}),(0,d.jsx)(n.td,{children:"Generate JSON output (NGINX 1.7+)"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"autoindex"})," can be used in: ",(0,d.jsx)(n.code,{children:"http"})," (rare), ",(0,d.jsx)(n.code,{children:"server"}),", ",(0,d.jsx)(n.code,{children:"location"})]}),"\n",(0,d.jsx)(n.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"server {\r\n    listen 80;\r\n    server_name example.com;\r\n\r\n    root /var/www/html/downloads;\r\n\r\n    location /downloads/ {\r\n        autoindex on;\r\n    }\r\n}\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Request: ",(0,d.jsx)(n.code,{children:"http://example.com/downloads/"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"/var/www/html/downloads/"})," contains files:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"file1.zip"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"file2.pdf"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"images/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"NGINX returns HTML directory listing of all files and folders"}),"\n",(0,d.jsx)(n.h2,{id:"autoindex-with-custom-format-json",children:"Autoindex with Custom Format (JSON)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"location /files/ {\r\n    root /var/www/html;\r\n    autoindex on;\r\n    autoindex_format json;\r\n}\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Request: ",(0,d.jsx)(n.code,{children:"http://example.com/files/"})]}),"\n",(0,d.jsx)(n.p,{children:"NGINX returns a JSON array:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'[\r\n  { "name": "file1.txt", "type": "file" },\r\n  { "name": "images", "type": "directory" }\r\n]\n'})}),"\n",(0,d.jsx)(n.p,{children:"Useful for API-driven directory access."}),"\n",(0,d.jsx)(n.h2,{id:"combining-autoindex-with-index",children:"Combining autoindex with index"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"location /downloads/ {\r\n    index index.html;\r\n    autoindex on;\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"Behavior"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["If ",(0,d.jsx)(n.code,{children:"index.html"})," exists \u2192 served"]}),"\n",(0,d.jsx)(n.li,{children:"If no index \u2192 directory listing generated"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"styling-autoindex-listings",children:"Styling Autoindex Listings"}),"\n",(0,d.jsx)(n.p,{children:"NGINX provides additional directives for better listings:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"location /downloads/ {\r\n    autoindex on;\r\n    autoindex_exact_size off;  # Show sizes in KB/MB\r\n    autoindex_localtime on;    # Show modification times in local timezone\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"Example listing:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Last modified"}),(0,d.jsx)(n.th,{children:"Size"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"file1.zip"}),(0,d.jsx)(n.td,{children:"2026-01-19 10:30"}),(0,d.jsx)(n.td,{children:"1.2M"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"file2.pdf"}),(0,d.jsx)(n.td,{children:"2026-01-18 16:20"}),(0,d.jsx)(n.td,{children:"500K"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,d.jsx)(n.p,{children:"Warning: Directory listings can expose sensitive files."}),"\n",(0,d.jsx)(n.p,{children:"Best Practices:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Only enable autoindex in safe directories (downloads, public assets)"}),"\n",(0,d.jsx)(n.li,{children:"Disable in application or configuration directories"}),"\n",(0,d.jsx)(n.li,{children:"Optionally combine with authentication:"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'location /downloads/ {\r\n    autoindex on;\r\n    auth_basic "Restricted";\r\n    auth_basic_user_file /etc/nginx/.htpasswd;\r\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Avoid exposing ",(0,d.jsx)(n.code,{children:".git"}),", ",(0,d.jsx)(n.code,{children:".env"}),", or config files"]}),"\n",(0,d.jsx)(n.h2,{id:"using-autoindex-with-try_files",children:"Using autoindex with try_files"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"location /files/ {\r\n    root /var/www/html;\r\n    try_files $uri $uri/ =404;\r\n    autoindex on;\r\n}\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"try_files"})," checks if file exists"]}),"\n",(0,d.jsx)(n.li,{children:"If directory exists and no index \u2192 autoindex generates listing"}),"\n",(0,d.jsx)(n.li,{children:"Else \u2192 404"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"example-production-use-case",children:"Example: Production Use Case"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"server {\r\n    listen 80;\r\n    server_name example.com;\r\n\r\n    root /var/www/html;\r\n\r\n    location /downloads/ {\r\n        autoindex on;\r\n        autoindex_exact_size off;\r\n        autoindex_localtime on;\r\n        expires 7d;\r\n    }\r\n}\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Publicly available downloads"}),"\n",(0,d.jsx)(n.li,{children:"User-friendly listing with sizes and timestamps"}),"\n",(0,d.jsx)(n.li,{children:"Cached by client browsers"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"disabling-autoindex-globally",children:"Disabling Autoindex Globally"}),"\n",(0,d.jsxs)(n.p,{children:["By default, ",(0,d.jsx)(n.code,{children:"autoindex"})," is off, which is safest for security:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"http {\r\n    autoindex off;\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"Only enable per location where needed"}),"\n",(0,d.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Mistake"}),(0,d.jsx)(n.th,{children:"Effect"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Enabling autoindex in app root"}),(0,d.jsx)(n.td,{children:"Exposes sensitive files"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Not using index with autoindex"}),(0,d.jsx)(n.td,{children:"Users see listing instead of homepage"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:["Serving hidden files (",(0,d.jsx)(n.code,{children:".*"}),")"]}),(0,d.jsx)(n.td,{children:"Security risk"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:["Forgetting ",(0,d.jsx)(n.code,{children:"root"})," or ",(0,d.jsx)(n.code,{children:"alias"})]}),(0,d.jsx)(n.td,{children:"Directory listing fails"})]})]})]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);