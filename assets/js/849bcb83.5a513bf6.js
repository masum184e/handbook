"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[6766],{28453(e,n,r){r.d(n,{R:()=>o,x:()=>l});var s=r(96540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},39061(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"rest-api-design/API Monitoring","title":"API Monitoring","description":"API Monitoring is the continuous process of tracking the availability, performance, and correctness of your API endpoints in real-time or at scheduled intervals.","source":"@site/docs/rest-api-design/34. API Monitoring.md","sourceDirName":"rest-api-design","slug":"/rest-api-design/API Monitoring","permalink":"/handbook/docs/rest-api-design/API Monitoring","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":36,"frontMatter":{"title":"API Monitoring","sidebar_position":36},"sidebar":"restApiSidebar","previous":{"title":"Integration Testing","permalink":"/handbook/docs/rest-api-design/Integration Testing"},"next":{"title":"Caching","permalink":"/handbook/docs/rest-api-design/Caching Strategies"}}');var i=r(74848),t=r(28453);const o={title:"API Monitoring",sidebar_position:36},l=void 0,d={},a=[{value:"Key Metrics in API Monitoring",id:"key-metrics-in-api-monitoring",level:2},{value:"What Is API Logging",id:"what-is-api-logging",level:2},{value:"Logging Levels",id:"logging-levels",level:2},{value:"Logger Implementation",id:"logger-implementation",level:2},{value:"Integrating Monitoring Tools",id:"integrating-monitoring-tools",level:2}];function c(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"API Monitoring is the continuous process of tracking the availability, performance, and correctness of your API endpoints in real-time or at scheduled intervals."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Goals of API Monitoring:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure uptime \u2014 the API is available for consumers."}),"\n",(0,i.jsx)(n.li,{children:"Track performance metrics \u2014 response time, latency, throughput."}),"\n",(0,i.jsx)(n.li,{children:"Detect errors and failures \u2014 server errors, authentication failures, invalid responses."}),"\n",(0,i.jsx)(n.li,{children:"Enable alerts and notifications for operational issues."}),"\n",(0,i.jsx)(n.li,{children:"Provide insights for scaling \u2014 detect load patterns, bottlenecks."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-metrics-in-api-monitoring",children:"Key Metrics in API Monitoring"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Metric"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Uptime / Availability"})}),(0,i.jsx)(n.td,{children:"Percentage of time API is operational (e.g., 99.9%)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Response Time / Latency"})}),(0,i.jsx)(n.td,{children:"Time taken to process a request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Error Rate"})}),(0,i.jsx)(n.td,{children:"Percentage of failed requests (HTTP 4xx, 5xx)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Throughput / Requests per Second"})}),(0,i.jsx)(n.td,{children:"How many requests API handles per time unit"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"SLA Compliance"})}),(0,i.jsx)(n.td,{children:"Whether API meets Service Level Agreements"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Resource Usage"})}),(0,i.jsx)(n.td,{children:"CPU, memory, database connections"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-api-logging",children:"What Is API Logging"}),"\n",(0,i.jsx)(n.p,{children:"API Logging involves capturing detailed information about API requests, responses, and system events to facilitate debugging, auditing, and monitoring."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Logs Typically Include:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Timestamp of request"}),"\n",(0,i.jsx)(n.li,{children:"HTTP method & URL"}),"\n",(0,i.jsx)(n.li,{children:"Headers (Authorization, Content-Type)"}),"\n",(0,i.jsx)(n.li,{children:"Request body / parameters"}),"\n",(0,i.jsx)(n.li,{children:"Response status and body"}),"\n",(0,i.jsx)(n.li,{children:"Execution time"}),"\n",(0,i.jsx)(n.li,{children:"Errors or exceptions"}),"\n",(0,i.jsx)(n.li,{children:"User or service identity (optional)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"logging-levels",children:"Logging Levels"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Level"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"INFO"})}),(0,i.jsx)(n.td,{children:"General API usage (request received, successful response)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"DEBUG"})}),(0,i.jsx)(n.td,{children:"Detailed internal info for troubleshooting (DB queries, variables)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"WARN"})}),(0,i.jsx)(n.td,{children:"Non-critical issues (deprecated endpoints, slow responses)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"ERROR"})}),(0,i.jsx)(n.td,{children:"Failures or exceptions (server errors, crashes)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"FATAL"})}),(0,i.jsx)(n.td,{children:"Critical failures causing downtime"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"logger-implementation",children:"Logger Implementation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Logger Middleware"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// logger.js\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst logFile = path.join(__dirname, 'api.log');\r\n\r\nfunction logger(req, res, next) {\r\n  const start = Date.now();\r\n  const { method, url, body } = req;\r\n\r\n  res.on('finish', () => {\r\n    const duration = Date.now() - start;\r\n    const logEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      method,\r\n      url,\r\n      status: res.statusCode,\r\n      duration: `${duration}ms`,\r\n      requestBody: body,\r\n    };\r\n    fs.appendFileSync(logFile, JSON.stringify(logEntry) + '\\n');\r\n  });\r\n\r\n  next();\r\n}\r\n\r\nmodule.exports = logger;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Using Logger in App"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const express = require('express');\r\nconst logger = require('./logger');\r\nconst app = express();\r\n\r\napp.use(express.json());\r\napp.use(logger);\r\n\r\napp.post('/api/users', (req, res) => {\r\n  if (!req.body.name || !req.body.email) {\r\n    return res.status(400).json({ error: \"Name and email required\" });\r\n  }\r\n  res.status(201).json({ id: 1, ...req.body });\r\n});\r\n\r\napp.listen(3000, () => console.log(\"API running on port 3000\"));\n"})}),"\n",(0,i.jsx)(n.h2,{id:"integrating-monitoring-tools",children:"Integrating Monitoring Tools"}),"\n",(0,i.jsx)(n.p,{children:"Logging data can be sent to monitoring tools like:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ELK Stack (Elasticsearch, Logstash, Kibana)"}),"\n",(0,i.jsx)(n.li,{children:"Prometheus + Grafana (metrics collection)"}),"\n",(0,i.jsx)(n.li,{children:"Datadog, New Relic, Splunk (full observability)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Metrics Extraction"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Count all ",(0,i.jsx)(n.code,{children:"500"})," status codes \u2192 triggers alert"]}),"\n",(0,i.jsx)(n.li,{children:"Measure average response time \u2192 visualize slow endpoints"}),"\n",(0,i.jsxs)(n.li,{children:["Track ",(0,i.jsx)(n.code,{children:"POST /api/users"})," errors \u2192 SLA compliance"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);