"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[3939],{28453(e,n,s){s.d(n,{R:()=>c,x:()=>d});var r=s(96540);const i={},l=r.createContext(i);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:n},e.children)}},72985(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"redis/Security","title":"Security","description":"Redis AUTH","source":"@site/docs/redis/11. Security.md","sourceDirName":"redis","slug":"/redis/Security","permalink":"/handbook/docs/redis/Security","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{}}');var i=s(74848),l=s(28453);const c={},d=void 0,t={},o=[{value:"Redis AUTH",id:"redis-auth",level:2},{value:"Redis ACLs (Access Control Lists)",id:"redis-acls-access-control-lists",level:2},{value:"ACL Configuration",id:"acl-configuration",level:3},{value:"Network-level Security",id:"network-level-security",level:2},{value:"Key Network-Level Security Measures in Redis",id:"key-network-level-security-measures-in-redis",level:3},{value:"Summary of Measures",id:"summary-of-measures",level:3},{value:"Private Network",id:"private-network",level:2},{value:"Private Networks / VPCs",id:"private-networks--vpcs",level:3},{value:"Firewall Rules",id:"firewall-rules",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"redis-auth",children:"Redis AUTH"}),"\n",(0,i.jsx)(n.p,{children:"Redis allows you to require a password to access the server. This is the first layer of security."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"How it Works:"})}),"\n",(0,i.jsxs)(n.p,{children:["A password is defined in ",(0,i.jsx)(n.code,{children:"redis.conf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"requirepass myStrongPassword\n"})}),"\n",(0,i.jsx)(n.p,{children:"When enabled, all clients must authenticate before running commands."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Connecting with AUTH:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'redis-cli\r\n127.0.0.1:6379> AUTH myStrongPassword\r\nOK\r\n127.0.0.1:6379> SET user:1 "Masum"\r\nOK\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you try to run a command without AUTH, Redis responds:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"(error) NOAUTH Authentication required.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"redis-acls-access-control-lists",children:"Redis ACLs (Access Control Lists)"}),"\n",(0,i.jsx)(n.p,{children:"Introduced in Redis 6.0, ACLs allow fine-grained role-based access control."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You can define multiple users with different permissions."}),"\n",(0,i.jsxs)(n.li,{children:["Permissions can restrict:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Commands (",(0,i.jsx)(n.code,{children:"GET"}),", ",(0,i.jsx)(n.code,{children:"SET"}),", ",(0,i.jsx)(n.code,{children:"DEL"}),", ",(0,i.jsx)(n.code,{children:"FLUSHALL"}),", etc.)"]}),"\n",(0,i.jsxs)(n.li,{children:["Keys or key patterns (",(0,i.jsx)(n.code,{children:"user:*"}),", ",(0,i.jsx)(n.code,{children:"session:*"}),", etc.)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Provides better security than a single global password."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"acl-configuration",children:"ACL Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"redis.conf"})," or dynamically using ACL commands:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: Create a user"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ACL SETUSER alice on >AlicePass ~user:* +GET +SET\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"alice"})," \u2192 username"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"on"})," \u2192 enable the user"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:">AlicePass"})," \u2192 set password"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"~user:*"})," \u2192 can access keys matching user:*"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"+GET +SET"})," \u2192 allowed commands"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: Connect as Alice"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"redis-cli -u redis://alice@127.0.0.1:6379\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Alice can now only run ",(0,i.jsx)(n.code,{children:"GET"})," and ",(0,i.jsx)(n.code,{children:"SET"})," on keys starting with ",(0,i.jsx)(n.code,{children:"user:"})]}),"\n",(0,i.jsx)(n.li,{children:"Any other command or key is forbidden."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"View Users"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ACL LIST\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Delete or Disable User"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ACL DELUSER alice\r\nACL SETUSER alice off\n"})}),"\n",(0,i.jsx)(n.h2,{id:"network-level-security",children:"Network-level Security"}),"\n",(0,i.jsx)(n.p,{children:"Network-level security protects Redis from unauthorized access over the network. Even if your Redis server is running with proper authentication and ACLs, if the network is exposed, attackers can still try to connect."}),"\n",(0,i.jsx)(n.p,{children:"Network-level security involves controlling access to Redis via networking configurations and secure communication protocols."}),"\n",(0,i.jsx)(n.h3,{id:"key-network-level-security-measures-in-redis",children:"Key Network-Level Security Measures in Redis"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bind Address"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Redis binds to a specific network interface. By default:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bind 127.0.0.1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"127.0.0.1"})," \u2192 only accessible locally."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"To allow external access:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bind 0.0.0.0\n"})}),"\n",(0,i.jsx)(n.p,{children:"Warning: Exposing Redis to the public without security is very dangerous."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Protected Mode"}),"\n",(0,i.jsx)(n.p,{children:"Enabled by default in Redis >= 3.2:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"protected-mode yes\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Redis refuses connections from external hosts if no password is set."}),"\n",(0,i.jsx)(n.li,{children:"Provides an extra layer for safeguarding default installations."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Firewall Rules"}),"\n",(0,i.jsx)(n.p,{children:"Use firewalls to allow only trusted IPs to connect."}),"\n",(0,i.jsx)(n.p,{children:"Example: UFW on Linux"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Allow Redis port 6379 only from 192.168.1.10\r\nsudo ufw allow from 192.168.1.10 to any port 6379\n"})}),"\n",(0,i.jsx)(n.p,{children:"Example: iptables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 6379 -j ACCEPT\r\nsudo iptables -A INPUT -p tcp --dport 6379 -j DROP\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"TLS/SSL Encryption"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Redis >= 6 supports TLS for encrypted network traffic."}),"\n",(0,i.jsx)(n.li,{children:"Protects data in transit and prevents man-in-the-middle attacks."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example: Enabling TLS"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"redis.conf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tls-port 6379\r\nport 0\r\ntls-cert-file /etc/ssl/redis.crt\r\ntls-key-file /etc/ssl/redis.key\r\ntls-ca-cert-file /etc/ssl/ca.crt\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"port 0"})," disables non-TLS connections."]}),"\n",(0,i.jsx)(n.li,{children:"Clients must connect using TLS:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"redis-cli -h redis.example.com -p 6379 --tls\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Network Segmentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Place Redis in a private network or VPC."}),"\n",(0,i.jsx)(n.li,{children:"Only application servers that need Redis can access it."}),"\n",(0,i.jsx)(n.li,{children:"Avoid exposing Redis directly to the internet."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Disable Dangerous Commands"}),"\n",(0,i.jsxs)(n.p,{children:["While not strictly \u201cnetwork-level,\u201d disabling commands like ",(0,i.jsx)(n.code,{children:"FLUSHALL"})," or ",(0,i.jsx)(n.code,{children:"CONFIG"})," can prevent attackers from damaging your system if they somehow gain network access."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'rename-command FLUSHALL ""\r\nrename-command CONFIG ""\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"summary-of-measures",children:"Summary of Measures"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Security Layer"}),(0,i.jsx)(n.th,{children:"Purpose"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Bind Address"})}),(0,i.jsx)(n.td,{children:"Limit network interfaces"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bind 127.0.0.1"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Protected Mode"})}),(0,i.jsx)(n.td,{children:"Prevent unauthorized remote access"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"protected-mode yes"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Firewall / IP Whitelisting"})}),(0,i.jsx)(n.td,{children:"Restrict access to trusted IPs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ufw allow from 10.0.0.5 to any port 6379"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"TLS/SSL Encryption"})}),(0,i.jsx)(n.td,{children:"Encrypt traffic in transit"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tls-port 6379"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Network Segmentation"})}),(0,i.jsx)(n.td,{children:"Isolate Redis in private network"}),(0,i.jsx)(n.td,{children:"VPC / Private Subnet"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Disable Dangerous Commands"})}),(0,i.jsx)(n.td,{children:"Mitigate risk if network is compromised"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'rename-command FLUSHALL ""'})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"private-network",children:"Private Network"}),"\n",(0,i.jsx)(n.h3,{id:"private-networks--vpcs",children:"Private Networks / VPCs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Place Redis inside a private subnet in a Virtual Private Cloud (VPC)."}),"\n",(0,i.jsx)(n.li,{children:"Only application servers or trusted IP addresses inside the VPC can communicate with Redis."}),"\n",(0,i.jsx)(n.li,{children:"Redis is not exposed to the public internet."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example (Cloud Setup)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["AWS VPC with two subnets:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Public subnet \u2192 Web servers"}),"\n",(0,i.jsx)(n.li,{children:"Private subnet \u2192 Redis servers"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Web servers access Redis via internal IP (e.g., ",(0,i.jsx)(n.code,{children:"10.0.1.10"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"firewall-rules",children:"Firewall Rules"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Control which IPs or subnets can access Redis."}),"\n",(0,i.jsxs)(n.li,{children:["On Linux, use ",(0,i.jsx)(n.code,{children:"ufw"})," or ",(0,i.jsx)(n.code,{children:"iptables"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"In the cloud, use security groups or network ACLs."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example: Linux Firewall (UFW)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Allow only application server (10.0.1.5) to connect\r\nsudo ufw allow from 10.0.1.5 to any port 6379\r\n\r\n# Deny all other connections\r\nsudo ufw deny 6379\n"})}),"\n",(0,i.jsx)(n.p,{children:"Example: AWS Security Group"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Inbound rule: TCP 6379 \u2192 Source: 10.0.1.0/24 (private subnet)"}),"\n",(0,i.jsx)(n.li,{children:"Outbound rule: allow Redis responses back to the app servers"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Bind Redis to Private IP"})}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"redis.conf"}),", set:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bind 10.0.1.10          # Redis private IP\r\nprotected-mode yes       # Extra safeguard\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Do not use ",(0,i.jsx)(n.code,{children:"0.0.0.0"})," unless combined with strict firewall rules."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Optional: Combine with TLS"})}),"\n",(0,i.jsx)(n.p,{children:"If you must allow access across a less-trusted network, enable TLS:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tls-port 6379\r\nport 0\r\ntls-cert-file /etc/ssl/redis.crt\r\ntls-key-file /etc/ssl/redis.key\r\ntls-ca-cert-file /etc/ssl/ca.crt\n"})}),"\n",(0,i.jsx)(n.p,{children:"Encrypts traffic between client and Redis even on private networks."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);