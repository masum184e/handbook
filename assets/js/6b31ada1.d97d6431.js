"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[47194],{12917(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"reactjs/Hooks/useRef","title":"useRef","description":"The useRef hook is a powerful React Hook used to persist values across renders without causing re-renders and to directly access DOM elements.","source":"@site/docs/reactjs/11. Hooks/2. useRef.md","sourceDirName":"reactjs/11. Hooks","slug":"/reactjs/Hooks/useRef","permalink":"/handbook/docs/reactjs/Hooks/useRef","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"reactjsApiSidebar","previous":{"title":"useReducer","permalink":"/handbook/docs/reactjs/Hooks/useReducer"},"next":{"title":"useMemo","permalink":"/handbook/docs/reactjs/Hooks/useMemo"}}');var t=s(74848),l=s(28453);const i={},o=void 0,d={},c=[{value:"What is <code>useRef</code>",id:"what-is-useref",level:2},{value:"Why Do We Need <code>useRef</code>",id:"why-do-we-need-useref",level:2},{value:"Syntax of useRef",id:"syntax-of-useref",level:2},{value:"<code>useRef</code> vs <code>useState</code>",id:"useref-vs-usestate",level:2},{value:"Accessing DOM Elements (Most Common Use Case)",id:"accessing-dom-elements-most-common-use-case",level:2},{value:"Example: Auto Focus Input",id:"example-auto-focus-input",level:3},{value:"Storing Mutable Values (Without Re-render)",id:"storing-mutable-values-without-re-render",level:2},{value:"Storing Previous State Value",id:"storing-previous-state-value",level:3},{value:"Avoiding Re-render Loops",id:"avoiding-re-render-loops",level:2},{value:"Forwarding Refs (Advanced Use)",id:"forwarding-refs-advanced-use",level:2},{value:"useRef with Event Handlers (Avoid Stale Closures)",id:"useref-with-event-handlers-avoid-stale-closures",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Real-World Use Cases",id:"real-world-use-cases",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"useRef"})," hook is a powerful React Hook used to persist values across renders without causing re-renders and to directly access DOM elements."]}),"\n",(0,t.jsxs)(n.p,{children:["Unlike ",(0,t.jsx)(n.code,{children:"useState"}),", updating a ",(0,t.jsx)(n.code,{children:"useRef"})," value does not trigger a re-render."]}),"\n",(0,t.jsxs)(n.h2,{id:"what-is-useref",children:["What is ",(0,t.jsx)(n.code,{children:"useRef"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useRef"})," returns a mutable object with a ",(0,t.jsx)(n.code,{children:".current"})," property that persists for the lifetime of the component."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const ref = useRef(initialValue);\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"why-do-we-need-useref",children:["Why Do We Need ",(0,t.jsx)(n.code,{children:"useRef"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useRef"})," is mainly used for:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Accessing DOM elements directly"}),"\n",(0,t.jsx)(n.li,{children:"Storing mutable values that should not cause re-renders"}),"\n",(0,t.jsx)(n.li,{children:"Keeping previous values"}),"\n",(0,t.jsx)(n.li,{children:"Storing timers, intervals, or IDs"}),"\n",(0,t.jsx)(n.li,{children:"Avoiding re-render loops"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"syntax-of-useref",children:"Syntax of useRef"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import { useRef } from "react";\r\n\r\nconst myRef = useRef(initialValue);\n'})}),"\n",(0,t.jsx)(n.p,{children:"What It Returns"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\r\n  current: initialValue;\r\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".current"})," is mutable"]}),"\n",(0,t.jsx)(n.li,{children:"Value persists across renders"}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"useref-vs-usestate",children:[(0,t.jsx)(n.code,{children:"useRef"})," vs ",(0,t.jsx)(n.code,{children:"useState"})]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"useRef"}),(0,t.jsx)(n.th,{children:"useState"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Does NOT cause re-render"}),(0,t.jsx)(n.td,{children:"Causes re-render"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mutable"}),(0,t.jsx)(n.td,{children:"Immutable update"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stores non-UI data"}),(0,t.jsx)(n.td,{children:"Stores UI data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Direct DOM access"}),(0,t.jsx)(n.td,{children:"No DOM access"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"accessing-dom-elements-most-common-use-case",children:"Accessing DOM Elements (Most Common Use Case)"}),"\n",(0,t.jsx)(n.h3,{id:"example-auto-focus-input",children:"Example: Auto Focus Input"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import { useRef, useEffect } from "react";\r\n\r\nfunction InputFocus() {\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, []);\r\n\r\n  return <input ref={inputRef} />;\r\n}\r\n\r\nexport default InputFocus;\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inputRef.current"})," points to the input DOM element"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".focus()"})," is a DOM method"]}),"\n",(0,t.jsx)(n.li,{children:"Runs once on mount"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"storing-mutable-values-without-re-render",children:"Storing Mutable Values (Without Re-render)"}),"\n",(0,t.jsx)(n.p,{children:"Example: Render Count"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import { useRef } from "react";\r\n\r\nfunction RenderCounter() {\r\n  const renderCount = useRef(0);\r\n\r\n  renderCount.current++;\r\n\r\n  return <h2>Rendered: {renderCount.current} times</h2>;\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"renderCount.current"})," updates"]}),"\n",(0,t.jsx)(n.li,{children:"Component does NOT re-render due to ref change"}),"\n",(0,t.jsx)(n.li,{children:"Value persists"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"storing-previous-state-value",children:"Storing Previous State Value"}),"\n",(0,t.jsx)(n.p,{children:"Example: Track Previous Count"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import { useRef, useEffect, useState } from "react";\r\n\r\nfunction PreviousValue() {\r\n  const [count, setCount] = useState(0);\r\n  const prevCount = useRef(null);\r\n\r\n  useEffect(() => {\r\n    prevCount.current = count;\r\n  }, [count]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Current: {count}</h2>\r\n      <h3>Previous: {prevCount.current}</h3>\r\n      <button onClick={() => setCount(count + 1)}>+</button>\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"prevCount.current"})," stores last value"]}),"\n",(0,t.jsx)(n.li,{children:"Updated after render"}),"\n",(0,t.jsx)(n.li,{children:"Does not cause re-render"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"avoiding-re-render-loops",children:"Avoiding Re-render Loops"}),"\n",(0,t.jsxs)(n.p,{children:["Bad Approach with ",(0,t.jsx)(n.code,{children:"useState"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const [value, setValue] = useState(0);\r\nsetValue(value + 1); // infinite loop\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Safe with ",(0,t.jsx)(n.code,{children:"useRef"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const valueRef = useRef(0);\r\nvalueRef.current++;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Explanation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Updating ref does not trigger render"}),"\n",(0,t.jsx)(n.li,{children:"Useful for counters, flags"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"forwarding-refs-advanced-use",children:"Forwarding Refs (Advanced Use)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const Input = React.forwardRef((props, ref) => <input ref={ref} />);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Explanation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Allows parent to control child DOM"}),"\n",(0,t.jsx)(n.li,{children:"Common in UI libraries"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"useref-with-event-handlers-avoid-stale-closures",children:"useRef with Event Handlers (Avoid Stale Closures)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const latestValue = useRef(value);\r\n\r\nuseEffect(() => {\r\n  latestValue.current = value;\r\n}, [value]);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Explanation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always holds latest value"}),"\n",(0,t.jsx)(n.li,{children:"Useful in async callbacks"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Expecting UI updates from useRef"}),"\n",(0,t.jsx)(n.li,{children:"Mutating DOM unnecessarily"}),"\n",(0,t.jsx)(n.li,{children:"Using ref instead of state"}),"\n",(0,t.jsx)(n.li,{children:"Reading ref during render for UI logic"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"real-world-use-cases",children:"Real-World Use Cases"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Focus management"}),"\n",(0,t.jsx)(n.li,{children:"Scroll position"}),"\n",(0,t.jsx)(n.li,{children:"Form validations"}),"\n",(0,t.jsx)(n.li,{children:"Animations"}),"\n",(0,t.jsx)(n.li,{children:"Measuring DOM elements"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var r=s(96540);const t={},l=r.createContext(t);function i(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);