"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[6294],{8453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}},9671(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"mysql/Constraints","title":"Constraints","description":"Constraints are rules applied to table columns to enforce data integrity and consistency. They ensure that the data stored in a table adheres to certain rules.","source":"@site/docs/mysql/7. Constraints.md","sourceDirName":"mysql","slug":"/mysql/Constraints","permalink":"/handbook/docs/mysql/Constraints","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"mysqlSidebar","previous":{"title":"Data Types","permalink":"/handbook/docs/mysql/Data Types"}}');var i=s(4848),l=s(8453);const t={sidebar_position:8},d=void 0,c={},o=[{value:"Primary Key",id:"primary-key",level:2},{value:"Foreign Key",id:"foreign-key",level:2},{value:"<code>NOT NULL</code>",id:"not-null",level:2},{value:"<code>UNIQUE</code>",id:"unique",level:2},{value:"<code>CHECK</code>",id:"check",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Constraints are rules applied to table columns to enforce data integrity and consistency. They ensure that the data stored in a table adheres to certain rules."}),"\n",(0,i.jsx)(n.h2,{id:"primary-key",children:"Primary Key"}),"\n",(0,i.jsx)(n.p,{children:"A Primary Key is a column (or set of columns) that uniquely identifies each row in a table."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It must be unique (no duplicate values)."}),"\n",(0,i.jsx)(n.li,{children:"It cannot contain NULL values."}),"\n",(0,i.jsx)(n.li,{children:"A table can have only one primary key, but it can consist of multiple columns (called a composite primary key)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why use it?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensures that every record is uniquely identifiable."}),"\n",(0,i.jsx)(n.li,{children:"Helps MySQL internally organize data efficiently."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By default, a primary key in MySQL is treated as both UNIQUE and NOT NULL."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Colmn Level vs Table Level"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Syntax"}),(0,i.jsx)(n.th,{children:"Level"}),(0,i.jsx)(n.th,{children:"Supports Composite Key?"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"column_name DATA_TYPE PRIMARY KEY"})}),(0,i.jsx)(n.td,{children:"Column-level"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Simple and convenient for single-column keys"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PRIMARY KEY (column_name[, ...])"})}),(0,i.jsx)(n.td,{children:"Table-level"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Required for multi-column keys; more flexible"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE students (\r\n    student_id INT NOT NULL,\r\n    name VARCHAR(50),\r\n    email VARCHAR(100),\r\n    CONSTRAINT pk_student_id PRIMARY KEY (student_id)\r\n);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," is the primary key."]}),"\n",(0,i.jsxs)(n.li,{children:["Each ",(0,i.jsx)(n.code,{children:"id"})," must be unique and cannot be null."]}),"\n",(0,i.jsxs)(n.li,{children:["Constraint name ",(0,i.jsx)(n.code,{children:"pk_student_id"})," allows easy reference if we need to modify or drop it later."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"foreign-key",children:"Foreign Key"}),"\n",(0,i.jsx)(n.p,{children:"A Foreign Key is a column (or combination of columns) that establishes a relationship between two tables."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"References the primary key (or unique key) of another table."}),"\n",(0,i.jsx)(n.li,{children:"Ensures referential integrity \u2014 you cannot insert a value in the child table if it doesn\u2019t exist in the parent table."}),"\n",(0,i.jsxs)(n.li,{children:["You can define what happens to child rows when the parent row is updated or deleted using:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CASCADE"}),": Automatically updates/deletes child rows when the parent changes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SET NULL"}),": Sets the foreign key in child rows to ",(0,i.jsx)(n.code,{children:"NULL"})," when the parent is deleted/updated."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RESTRICT"}),": Prevents deletion or update of the parent row if child rows exist."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why use a Foreign Key?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Maintains consistency between related tables"}),"\n",(0,i.jsx)(n.li,{children:"Prevents orphan records"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Single-Column Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE enrollments (\r\n    enrollment_id INT PRIMARY KEY,\r\n    student_id CHAR(10),\r\n    course_name VARCHAR(100) NOT NULL,\r\n    CONSTRAINT fk_student FOREIGN KEY (student_id)\r\n        REFERENCES students(student_id)\r\n        ON DELETE CASCADE\r\n        ON UPDATE CASCADE\r\n);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"student_id"})," in ",(0,i.jsx)(n.code,{children:"enrollments"})," references ",(0,i.jsx)(n.code,{children:"student_id"})," in ",(0,i.jsx)(n.code,{children:"students"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ON DELETE CASCADE"})," ensures that deleting a student also deletes their enrollments."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Composite (Multi-Column) Foreign Key Example"})}),"\n",(0,i.jsxs)(n.p,{children:["Suppose we have a ",(0,i.jsx)(n.code,{children:"courses"})," table with ",(0,i.jsx)(n.code,{children:"course_id"})," and ",(0,i.jsx)(n.code,{children:"semester"})," as a composite primary key:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE courses (\r\n    course_id INT,\r\n    semester VARCHAR(10),\r\n    course_name VARCHAR(100),\r\n    CONSTRAINT pk_course PRIMARY KEY (course_id, semester)\r\n);\r\n\r\nCREATE TABLE enrollments (\r\n    student_id CHAR(10),\r\n    course_id INT,\r\n    semester VARCHAR(10),\r\n    CONSTRAINT pk_enrollment PRIMARY KEY (student_id, course_id, semester),\r\n    CONSTRAINT fk_course FOREIGN KEY (course_id, semester)\r\n        REFERENCES courses(course_id, semester)\r\n        ON DELETE SET NULL\r\n        ON UPDATE RESTRICT\r\n);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Here, ",(0,i.jsx)(n.code,{children:"(course_id, semester)"})," is a composite foreign key in ",(0,i.jsx)(n.code,{children:"enrollments"})," referencing ",(0,i.jsx)(n.code,{children:"courses"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pk_course"})," is the primary key constraint on ",(0,i.jsx)(n.code,{children:"(course_id, semester)"})," in ",(0,i.jsx)(n.code,{children:"courses"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pk_enrollment"})," is a composite primary key in ",(0,i.jsx)(n.code,{children:"enrollments"})," on ",(0,i.jsx)(n.code,{children:"(student_id, course_id, semester)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Naming the ",(0,i.jsx)(n.code,{children:"constraint (CONSTRAINT pk_name)"})," allows easier reference when modifying or dropping the key later."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ON DELETE SET NULL"}),": If a course is deleted, the corresponding ",(0,i.jsx)(n.code,{children:"course_id"})," and ",(0,i.jsx)(n.code,{children:"semester"})," in ",(0,i.jsx)(n.code,{children:"enrollments"})," are set to ",(0,i.jsx)(n.code,{children:"NULL"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ON UPDATE RESTRICT"}),": Prevents updating the course\u2019s ",(0,i.jsx)(n.code,{children:"course_id"})," or ",(0,i.jsx)(n.code,{children:"semester"})," if there are related enrollments."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"not-null",children:(0,i.jsx)(n.code,{children:"NOT NULL"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"NOT NULL"})," constraint ensures that a column cannot have a ",(0,i.jsx)(n.code,{children:"NULL"})," value. It enforces that every row in the table must have a value for that column."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why use it?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use Mandatory fields like ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"name"}),", ",(0,i.jsx)(n.code,{children:"email"})," in a table."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"General Syntax"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE table_name (\r\n    column_name datatype NOT NULL\r\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"unique",children:(0,i.jsx)(n.code,{children:"UNIQUE"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"UNIQUE"})," constraint ensures that all values in a column (or a set of columns) are unique. Unlike the primary key, a table can have multiple ",(0,i.jsx)(n.code,{children:"UNIQUE"})," constraints, and they allow ",(0,i.jsx)(n.code,{children:"NULL"}),"s (depending on DBMS)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why use it?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Fields that must not repeat, like ",(0,i.jsx)(n.code,{children:"email"})," or ",(0,i.jsx)(n.code,{children:"username"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"General Syntax"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE table_name (\r\n    column_name datatype UNIQUE\r\n);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Multiple ",(0,i.jsx)(n.code,{children:"UNIQUE"})," constraints can exist in a table."]}),"\n",(0,i.jsxs)(n.li,{children:["Composite Unique: ",(0,i.jsx)(n.code,{children:"UNIQUE(column_1, column_2)"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"check",children:(0,i.jsx)(n.code,{children:"CHECK"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"CHECK"})," constraint ensures that values in a column satisfy a specific condition. This helps enforce business rules at the database level."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why use it?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To validate data before it\u2019s inserted or updated."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"General Syntax"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE table_name (\r\n    column_name datatype CHECK (condition)\r\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Column-Level ",(0,i.jsx)(n.code,{children:"CHECK"})]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"age INT CHECK (age >= 18),\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Table-Level ",(0,i.jsx)(n.code,{children:"CHECK"})]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CONSTRAINT chk_cgpa_age CHECK (cgpa >= 3.5 AND age >= 18)\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CHECK"})," can be column-level (applies to a single column) or table-level (involving multiple columns)."]}),"\n",(0,i.jsx)(n.li,{children:"Helps maintain data integrity by preventing invalid entries."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);