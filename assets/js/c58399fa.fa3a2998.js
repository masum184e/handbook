"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[53493],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>t});var i=s(96540);const r={},a=i.createContext(r);function l(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:n},e.children)}},79498(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"reactjs/Lazy Loading","title":"Lazy Loading","description":"Code-splitting and lazy loading are techniques that reduce the initial JavaScript bundle size by loading code only when it\u2019s needed. In React, this is done using React.lazy and Suspense.","source":"@site/docs/reactjs/26. Lazy Loading.md","sourceDirName":"reactjs","slug":"/reactjs/Lazy Loading","permalink":"/handbook/docs/reactjs/Lazy Loading","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":27,"frontMatter":{"sidebar_position":27},"sidebar":"reactjsApiSidebar","previous":{"title":"Optimizing Event Handlers","permalink":"/handbook/docs/reactjs/Optimizing Event Handlers"}}');var r=s(74848),a=s(28453);const l={sidebar_position:27},t=void 0,o={},d=[{value:"What is <code>React.lazy</code>",id:"what-is-reactlazy",level:2},{value:"What is <code>Suspense</code>",id:"what-is-suspense",level:2},{value:"Example without code-splitting",id:"example-without-code-splitting",level:2},{value:"Optimized version with <code>React.lazy</code>",id:"optimized-version-with-reactlazy",level:2},{value:"Real-world example: Route-based lazy loading",id:"real-world-example-route-based-lazy-loading",level:2},{value:"Behind the scenes",id:"behind-the-scenes",level:3},{value:"Handling loading states gracefully",id:"handling-loading-states-gracefully",level:3},{value:"Error handling (important)",id:"error-handling-important",level:2}];function c(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Code-splitting and lazy loading are techniques that reduce the initial JavaScript bundle size by loading code only when it\u2019s needed. In React, this is done using ",(0,r.jsx)(n.code,{children:"React.lazy"})," and ",(0,r.jsx)(n.code,{children:"Suspense"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The core idea"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Don\u2019t load everything upfront.",(0,r.jsx)(n.br,{}),"\n","Load components on demand."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Large apps often have:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Routes users may never visit"}),"\n",(0,r.jsx)(n.li,{children:"Heavy components (charts, editors, dashboards)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Loading all of this at once slows down the first page load. Lazy loading fixes that."}),"\n",(0,r.jsxs)(n.h2,{id:"what-is-reactlazy",children:["What is ",(0,r.jsx)(n.code,{children:"React.lazy"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"React.lazy"})," lets you dynamically import a component:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'const Component = React.lazy(() => import("./Component"));\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The component is split into a separate chunk"}),"\n",(0,r.jsx)(n.li,{children:"It\u2019s downloaded only when rendered"}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"what-is-suspense",children:["What is ",(0,r.jsx)(n.code,{children:"Suspense"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Suspense"})," handles the loading state while the lazy component is being fetched."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"<Suspense fallback={<Loading />}>\r\n  <LazyComponent />\r\n</Suspense>\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fallback"})," \u2192 UI shown during loading"]}),"\n",(0,r.jsxs)(n.li,{children:["Required whenever you use ",(0,r.jsx)(n.code,{children:"React.lazy"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-without-code-splitting",children:"Example without code-splitting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import Dashboard from "./Dashboard";\r\nimport Settings from "./Settings";\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <Dashboard />\r\n      <Settings />\r\n    </>\r\n  );\r\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Both components are bundled together"}),"\n",(0,r.jsx)(n.li,{children:"Even if the user never opens Settings"}),"\n",(0,r.jsx)(n.li,{children:"Slower initial load"}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"optimized-version-with-reactlazy",children:["Optimized version with ",(0,r.jsx)(n.code,{children:"React.lazy"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import React, { Suspense } from "react";\r\n\r\nconst Dashboard = React.lazy(() => import("./Dashboard"));\r\nconst Settings = React.lazy(() => import("./Settings"));\r\n\r\nfunction App() {\r\n  return (\r\n    <Suspense fallback={<p>Loading...</p>}>\r\n      <Dashboard />\r\n      <Settings />\r\n    </Suspense>\r\n  );\r\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each component becomes its own bundle"}),"\n",(0,r.jsx)(n.li,{children:"Loaded only when rendered"}),"\n",(0,r.jsx)(n.li,{children:"Faster initial page load"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"real-world-example-route-based-lazy-loading",children:"Real-world example: Route-based lazy loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import { BrowserRouter, Routes, Route } from "react-router-dom";\r\nimport React, { Suspense } from "react";\r\n\r\nconst Home = React.lazy(() => import("./Home"));\r\nconst Profile = React.lazy(() => import("./Profile"));\r\nconst Settings = React.lazy(() => import("./Settings"));\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Suspense fallback={<h2>Loading page...</h2>}>\r\n        <Routes>\r\n          <Route path="/" element={<Home />} />\r\n          <Route path="/profile" element={<Profile />} />\r\n          <Route path="/settings" element={<Settings />} />\r\n        </Routes>\r\n      </Suspense>\r\n    </BrowserRouter>\r\n  );\r\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Home loads immediately"}),"\n",(0,r.jsx)(n.li,{children:"Profile and Settings load only when visited"}),"\n",(0,r.jsx)(n.li,{children:"Smaller initial bundle = faster startup"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"behind-the-scenes",children:"Behind the scenes"}),"\n",(0,r.jsx)(n.p,{children:"When React sees:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import("./Settings");\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Webpack/Vite creates a separate JS chunk"}),"\n",(0,r.jsx)(n.li,{children:"Browser downloads it on demand"}),"\n",(0,r.jsx)(n.li,{children:"Component renders once loaded"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"handling-loading-states-gracefully",children:"Handling loading states gracefully"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"<Suspense fallback={<Spinner />}>\r\n  <HeavyChart />\r\n</Suspense>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Best practices:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use skeletons or spinners"}),"\n",(0,r.jsx)(n.li,{children:"Match fallback UI to component size"}),"\n",(0,r.jsx)(n.li,{children:"Avoid blocking the whole app unnecessarily"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling-important",children:"Error handling (important)"}),"\n",(0,r.jsx)(n.p,{children:"Lazy loading can fail (network issues). Use an Error Boundary:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"<ErrorBoundary>\r\n  <Suspense fallback={<Loading />}>\r\n    <LazyComponent />\r\n  </Suspense>\r\n</ErrorBoundary>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);