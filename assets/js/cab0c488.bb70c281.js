"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[3044],{12717(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"mysql/ACID Properties","title":"ACID Properties","description":"A transaction in MySQL must follow the ACID principles to ensure data correctness and reliability:","source":"@site/docs/mysql/17. ACID Properties.md","sourceDirName":"mysql","slug":"/mysql/ACID Properties","permalink":"/handbook/docs/mysql/ACID Properties","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"sidebar_position":18},"sidebar":"mysqlSidebar","previous":{"title":"Transaction","permalink":"/handbook/docs/mysql/Transaction"},"next":{"title":"Isolation Levels","permalink":"/handbook/docs/mysql/Isolation Levels"}}');var i=t(74848),r=t(28453);const a={sidebar_position:18},c=void 0,l={},o=[{value:"Atomicity",id:"atomicity",level:2},{value:"Consistency",id:"consistency",level:2},{value:"Isolation",id:"isolation",level:2},{value:"Durability",id:"durability",level:2},{value:"Summary of ACID with Example",id:"summary-of-acid-with-example",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"A transaction in MySQL must follow the ACID principles to ensure data correctness and reliability:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Atomicity"})," \u2192 All or nothing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistency"})," \u2192 Preserve valid state of data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Isolation"})," \u2192 Transactions do not interfere with each other"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Durability"})," \u2192 Committed changes are permanent"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"atomicity",children:"Atomicity"}),"\n",(0,i.jsx)(n.p,{children:"A transaction is atomic, meaning all the SQL operations inside it succeed as one unit, or none do."}),"\n",(0,i.jsx)(n.p,{children:"If any step fails \u2192 the entire transaction is rolled back."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"START TRANSACTION;\r\n\r\n-- Deduct from Alice\r\nUPDATE accounts SET balance = balance - 1000 WHERE account_id = 1;\r\n\r\n-- Add to Bob\r\nUPDATE accounts SET balance = balance + 1000 WHERE account_id = 2;\r\n\r\n-- If both succeed, commit\r\nCOMMIT;\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If both updates succeed \u2192 changes are saved."}),"\n",(0,i.jsx)(n.li,{children:"If one fails (e.g., system crash after deduction) \u2192 transaction rolls back, leaving balances unchanged."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"consistency",children:"Consistency"}),"\n",(0,i.jsx)(n.p,{children:"A transaction must preserve the rules and constraints of the database.\r\nAfter it finishes, the database should always be in a valid state."}),"\n",(0,i.jsxs)(n.p,{children:["Suppose Alice has 5000 BDT. If she tries to transfer 6000 BDT, that would break the rule that ",(0,i.jsx)(n.code,{children:"balance >= 0"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"START TRANSACTION;\r\n\r\nUPDATE accounts SET balance = balance - 6000 WHERE account_id = 1;\r\nUPDATE accounts SET balance = balance + 6000 WHERE account_id = 2;\r\n\r\n-- Check constraint\r\nSELECT balance FROM accounts WHERE account_id = 1;\r\n\r\n-- If balance < 0 \u2192 rollback\r\nROLLBACK;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Database remains consistent \u2192 Alice\u2019s balance cannot go negative."}),"\n",(0,i.jsx)(n.h2,{id:"isolation",children:"Isolation"}),"\n",(0,i.jsx)(n.p,{children:"Multiple transactions running at the same time should not interfere with each other."}),"\n",(0,i.jsx)(n.p,{children:"Each transaction behaves as if it is executed alone, even though MySQL may run them concurrently."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.p,{children:"Two users try to withdraw from Alice\u2019s account at the same time:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Transaction A \u2192 Withdraw 2000"}),"\n",(0,i.jsx)(n.li,{children:"Transaction B \u2192 Withdraw 4000"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If not isolated properly, both might read the same starting balance (5000) and withdraw simultaneously \u2192 result could be -1000 \u274c."}),"\n",(0,i.jsx)(n.p,{children:"But with isolation, MySQL ensures correct sequence:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If Transaction A commits first \u2192 balance = 3000"}),"\n",(0,i.jsx)(n.li,{children:"Then Transaction B runs \u2192 withdrawal fails because 3000 < 4000"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Final balance remains valid."}),"\n",(0,i.jsx)(n.h2,{id:"durability",children:"Durability"}),"\n",(0,i.jsx)(n.p,{children:"Once a transaction is committed, the changes are permanent, even if the system crashes immediately after."}),"\n",(0,i.jsx)(n.p,{children:"MySQL (with InnoDB) guarantees this by writing committed changes to disk using redo logs."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"START TRANSACTION;\r\nUPDATE accounts SET balance = balance - 500 WHERE account_id = 1;\r\nCOMMIT;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Even if the server crashes right after ",(0,i.jsx)(n.code,{children:"COMMIT"}),", Alice\u2019s new balance will be safely stored when MySQL restarts."]}),"\n",(0,i.jsx)(n.h2,{id:"summary-of-acid-with-example",children:"Summary of ACID with Example"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Meaning"}),(0,i.jsx)(n.th,{children:"Banking Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Atomicity"})}),(0,i.jsx)(n.td,{children:"All operations succeed or none"}),(0,i.jsx)(n.td,{children:"Deduct from Alice & Add to Bob must happen together"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Consistency"})}),(0,i.jsx)(n.td,{children:"Database must remain valid"}),(0,i.jsx)(n.td,{children:"Balance cannot go negative"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Isolation"})}),(0,i.jsx)(n.td,{children:"Transactions don\u2019t interfere"}),(0,i.jsx)(n.td,{children:"Two withdrawals won\u2019t corrupt balance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Durability"})}),(0,i.jsx)(n.td,{children:"Once committed \u2192 permanent"}),(0,i.jsx)(n.td,{children:"After COMMIT, crash won\u2019t erase transfer"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>a,x:()=>c});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);