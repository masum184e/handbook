"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[65158],{28453(e,n,s){s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const o={},t=r.createContext(o);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},95111(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"rest-api-design/Webhooks","title":"Webhooks","description":"Webhooks are a way for a server to notify a client automatically when an event occurs or an asynchronous task completes. Instead of polling, the server calls a client-provided URL.","source":"@site/docs/rest-api-design/39. Webhooks.md","sourceDirName":"rest-api-design","slug":"/rest-api-design/Webhooks","permalink":"/handbook/docs/rest-api-design/Webhooks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":41,"frontMatter":{"title":"Webhooks","sidebar_position":41},"sidebar":"restApiSidebar","previous":{"title":"Async Processing","permalink":"/handbook/docs/rest-api-design/Async Processing"}}');var o=s(74848),t=s(28453);const i={title:"Webhooks",sidebar_position:41},l=void 0,a={},c=[{value:"How Webhooks Work",id:"how-webhooks-work",level:2},{value:"Generating a Report",id:"generating-a-report",level:2},{value:"Best Practices for Async &amp; Webhooks",id:"best-practices-for-async--webhooks",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Webhooks are a way for a server to notify a client automatically when an event occurs or an asynchronous task completes. Instead of polling, the server calls a client-provided URL."}),"\n",(0,o.jsx)(n.h2,{id:"how-webhooks-work",children:"How Webhooks Work"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Client registers a webhook:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'POST /api/webhooks\r\nContent-Type: application/json\r\n\r\n{\r\n  "event": "report.completed",\r\n  "callbackUrl": "https://client.com/webhook/reports"\r\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Server processes the task asynchronously."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"When task completes, server sends a POST request to the client\u2019s callback URL:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'POST https://client.com/webhook/reports\r\nContent-Type: application/json\r\n\r\n{\r\n  "taskId": "789",\r\n  "status": "completed",\r\n  "resultUrl": "/api/reports/789/download"\r\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"Client processes the webhook and fetches the result if needed."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Advantages of Webhooks"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"No need for polling \u2192 reduces network traffic."}),"\n",(0,o.jsx)(n.li,{children:"Real-time notifications \u2192 better user experience."}),"\n",(0,o.jsx)(n.li,{children:"Scales better \u2192 server pushes updates only when needed."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Combining Async Processing & Webhooks"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Async processing handles long-running tasks."}),"\n",(0,o.jsx)(n.li,{children:"Webhooks notify clients when tasks are complete."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Flow Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Client -> POST /api/reports -> Server returns 202 + taskId\r\nServer queues task -> background worker processes task\r\nTask completes -> Server calls client webhook\r\nClient receives webhook -> Downloads result\n"})}),"\n",(0,o.jsx)(n.h2,{id:"generating-a-report",children:"Generating a Report"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Client requests report generation"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'POST /api/reports\r\nContent-Type: application/json\r\n\r\n{\r\n  "reportType": "monthly_sales",\r\n  "format": "pdf",\r\n  "webhookUrl": "https://client.com/webhook/reports"\r\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Server responds immediately"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'HTTP/1.1 202 Accepted\r\nContent-Type: application/json\r\n\r\n{\r\n  "taskId": "1010",\r\n  "status": "pending"\r\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Server processes task in background"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Server sends webhook when done"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:'POST https://client.com/webhook/reports\r\nContent-Type: application/json\r\n\r\n{\r\n  "taskId": "1010",\r\n  "status": "completed",\r\n  "resultUrl": "/api/reports/1010/download"\r\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsx)(n.li,{children:"Client downloads report"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"GET /api/reports/1010/download\n"})}),"\n",(0,o.jsx)(n.h2,{id:"best-practices-for-async--webhooks",children:"Best Practices for Async & Webhooks"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Idempotency: Webhooks may be delivered multiple times. Clients should handle duplicates."}),"\n",(0,o.jsx)(n.li,{children:"Retries: Servers should retry webhooks if the client endpoint fails."}),"\n",(0,o.jsx)(n.li,{children:"Security: Validate webhook payloads using signatures or tokens."}),"\n",(0,o.jsx)(n.li,{children:"Status endpoints: Always provide a /status URL even if webhooks are used."}),"\n",(0,o.jsx)(n.li,{children:"Queue management: Use scalable queue systems to handle spikes in async tasks."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);