"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[31457],{28453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var r=s(96540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},85877(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"prisma/Introspection","title":"Introspection","description":"Introspection is the process of reading an existing database schema and generating a Prisma schema (schema.prisma) that matches it.","source":"@site/docs/prisma/13. Introspection.md","sourceDirName":"prisma","slug":"/prisma/Introspection","permalink":"/handbook/docs/prisma/Introspection","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"prismaApiSidebar","previous":{"title":"Prisma CLI","permalink":"/handbook/docs/prisma/Prisma CLI"},"next":{"title":"With  GraphQL","permalink":"/handbook/docs/prisma/With  GraphQL"}}');var i=s(74848),t=s(28453);const a={sidebar_position:13},o=void 0,l={},d=[{value:"When to Use Introspection",id:"when-to-use-introspection",level:2},{value:"How <code>prisma db pull</code> Works",id:"how-prisma-db-pull-works",level:2},{value:"Example Workflow of Introspection",id:"example-workflow-of-introspection",level:2},{value:"1. Setup",id:"1-setup",level:3},{value:"2. Configure <code>.env</code>",id:"2-configure-env",level:3},{value:"3. Run Introspection",id:"3-run-introspection",level:3},{value:"4. Generated Prisma Schema",id:"4-generated-prisma-schema",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Introspection is the process of reading an existing database schema and generating a Prisma schema (",(0,i.jsx)(n.code,{children:"schema.prisma"}),") that matches it."]}),"\n",(0,i.jsx)(n.p,{children:"In Prisma, introspection is done using:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-prisma",children:"npx prisma db pull\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This updates your ",(0,i.jsx)(n.code,{children:"schema.prisma"})," to reflect tables, columns, relations, and types in the database."]}),"\n",(0,i.jsx)(n.li,{children:"Essentially, it lets Prisma reverse-engineer your database into Prisma models."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use-introspection",children:"When to Use Introspection"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Working with an existing database","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You didn\u2019t start the project with Prisma, but now want Prisma Client."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Syncing Prisma schema with DB changes","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If someone else modified the DB schema, you can update your Prisma schema without manually editing it."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Exploring unfamiliar databases","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Quickly generate models for an existing DB."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"how-prisma-db-pull-works",children:["How ",(0,i.jsx)(n.code,{children:"prisma db pull"})," Works"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Reads the database connection from ",(0,i.jsx)(n.code,{children:".env"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:'DATABASE_URL="postgresql://user:password@localhost:5432/mydb"\n'})}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Connects to the database."}),"\n",(0,i.jsx)(n.li,{children:"Reads all tables, columns, indexes, foreign keys, and types."}),"\n",(0,i.jsxs)(n.li,{children:["Updates your ",(0,i.jsx)(n.code,{children:"schema.prisma"})," with models, fields, types, relations, and attributes."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-workflow-of-introspection",children:"Example Workflow of Introspection"}),"\n",(0,i.jsx)(n.h3,{id:"1-setup",children:"1. Setup"}),"\n",(0,i.jsx)(n.p,{children:"Assume you have a PostgreSQL database with these tables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Table: users\r\nCREATE TABLE users (\r\n  id SERIAL PRIMARY KEY,\r\n  name VARCHAR(255),\r\n  email VARCHAR(255) UNIQUE\r\n);\r\n\r\n-- Table: posts\r\nCREATE TABLE posts (\r\n  id SERIAL PRIMARY KEY,\r\n  title VARCHAR(255),\r\n  content TEXT,\r\n  author_id INT REFERENCES users(id)\r\n);\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"2-configure-env",children:["2. Configure ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",children:'DATABASE_URL="postgresql://postgres:password@localhost:5432/mydb"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-run-introspection",children:"3. Run Introspection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx prisma db pull\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Prisma reads the tables ",(0,i.jsx)(n.code,{children:"users"})," and ",(0,i.jsx)(n.code,{children:"posts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Generates ",(0,i.jsx)(n.code,{children:"schema.prisma"})," automatically."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-generated-prisma-schema",children:"4. Generated Prisma Schema"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-prisma",children:'generator client {\r\n  provider = "prisma-client-js"\r\n}\r\n\r\ndatasource db {\r\n  provider = "postgresql"\r\n  url      = env("DATABASE_URL")\r\n}\r\n\r\nmodel users {\r\n  id    Int    @id @default(autoincrement())\r\n  name  String\r\n  email String @unique\r\n  posts posts[]\r\n}\r\n\r\nmodel posts {\r\n  id       Int    @id @default(autoincrement())\r\n  title    String\r\n  content  String?\r\n  author_id Int\r\n  users    users @relation(fields: [author_id], references: [id])\r\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);