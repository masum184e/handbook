"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[17957],{28453(r,e,n){n.d(e,{R:()=>o,x:()=>l});var s=n(96540);const t={},i=s.createContext(t);function o(r){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:o(r.components),s.createElement(i.Provider,{value:e},r.children)}},67266(r,e,n){n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"rest-api-design/Error Tracking","title":"Error Tracking","description":"Error tracking is the process of detecting, recording, and analyzing errors that occur in a REST API, in real time or retrospectively, to help developers identify, diagnose, and fix issues quickly.","source":"@site/docs/rest-api-design/25. Error Tracking.md","sourceDirName":"rest-api-design","slug":"/rest-api-design/Error Tracking","permalink":"/handbook/docs/rest-api-design/Error Tracking","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":26,"frontMatter":{"title":"Error Tracking","sidebar_position":26},"sidebar":"restApiSidebar","previous":{"title":"Input Validation","permalink":"/handbook/docs/rest-api-design/Input Validation"},"next":{"title":"Standard Error Format","permalink":"/handbook/docs/rest-api-design/Standard Error Format"}}');var t=n(74848),i=n(28453);const o={title:"Error Tracking",sidebar_position:26},l=void 0,a={},c=[{value:"Popular Error Tracking Tools",id:"popular-error-tracking-tools",level:2},{value:"How Sentry Works",id:"how-sentry-works",level:2},{value:"Sentry Integration Example",id:"sentry-integration-example",level:3},{value:"ELK Stack for Error Tracking",id:"elk-stack-for-error-tracking",level:2},{value:"ELK Integration Example",id:"elk-integration-example",level:3},{value:"Sentry vs ELK Stack",id:"sentry-vs-elk-stack",level:2},{value:"Best Practices for Error Tracking",id:"best-practices-for-error-tracking",level:2}];function d(r){const e={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"Error tracking is the process of detecting, recording, and analyzing errors that occur in a REST API, in real time or retrospectively, to help developers identify, diagnose, and fix issues quickly."}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Goals:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Detect exceptions and failures"}),"\n",(0,t.jsx)(e.li,{children:"Capture contextual information (request, user, environment)"}),"\n",(0,t.jsx)(e.li,{children:"Reduce mean time to resolution (MTTR)"}),"\n",(0,t.jsx)(e.li,{children:"Enable root-cause analysis"}),"\n",(0,t.jsx)(e.li,{children:"Integrate with monitoring, logging, and alerting systems"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"popular-error-tracking-tools",children:"Popular Error Tracking Tools"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Tool"}),(0,t.jsx)(e.th,{children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Sentry"})}),(0,t.jsx)(e.td,{children:"Real-time error tracking, exception reporting, and performance monitoring. Supports many languages/frameworks."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"ELK Stack"})}),(0,t.jsx)(e.td,{children:"Elasticsearch, Logstash, Kibana \u2014 collects, indexes, visualizes logs; can track errors from logs and metrics."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Other Tools"})}),(0,t.jsx)(e.td,{children:"Rollbar, Bugsnag, Datadog APM"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"how-sentry-works",children:"How Sentry Works"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Key Features"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Captures unhandled exceptions"}),"\n",(0,t.jsx)(e.li,{children:"Collects context: user, request, headers, stack trace"}),"\n",(0,t.jsx)(e.li,{children:"Groups similar errors"}),"\n",(0,t.jsx)(e.li,{children:"Sends alerts via Slack, email, etc."}),"\n",(0,t.jsx)(e.li,{children:"Provides issue tracking and workflow integration"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Workflow"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"API Error \u2192 Sentry SDK \u2192 Error captured \u2192 Dashboard & Alerts\n"})}),"\n",(0,t.jsx)(e.h3,{id:"sentry-integration-example",children:"Sentry Integration Example"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Install Sentry SDK"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"npm install @sentry/node\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Initialize Sentry"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'// app.js\r\nconst express = require("express");\r\nconst Sentry = require("@sentry/node");\r\n\r\nSentry.init({\r\n  dsn: "https://<PUBLIC_KEY>@sentry.io/<PROJECT_ID>",\r\n  tracesSampleRate: 1.0, // For performance monitoring\r\n});\r\n\r\nconst app = express();\r\n\r\n// Request handler must come first\r\napp.use(Sentry.Handlers.requestHandler());\r\napp.use(express.json());\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Add Routes and Error Handling"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'app.post("/api/users", (req, res) => {\r\n  if (!req.body.name) {\r\n    throw new Error("Name is required"); // This error will be captured\r\n  }\r\n  res.status(201).json(req.body);\r\n});\r\n\r\n// Sentry error handler (must be last middleware)\r\napp.use(Sentry.Handlers.errorHandler());\r\n\r\napp.listen(3000, () => console.log("API running"));\n'})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Request comes in \u2192 Sentry request handler attaches context"}),"\n",(0,t.jsx)(e.li,{children:"Error occurs \u2192 Sentry captures stack trace, HTTP request info, and user data"}),"\n",(0,t.jsx)(e.li,{children:"Error appears in Dashboard \u2192 Developers can view detailed context and fix it"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"elk-stack-for-error-tracking",children:"ELK Stack for Error Tracking"}),"\n",(0,t.jsx)(e.p,{children:"ELK Stack (Elasticsearch, Logstash, Kibana) is mainly a log-based error tracking system."}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"How It Works"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Application Logs Errors \u2192 File, stdout, or remote"}),"\n",(0,t.jsx)(e.li,{children:"Logstash \u2192 Parses and transforms logs"}),"\n",(0,t.jsx)(e.li,{children:"Elasticsearch \u2192 Stores logs and indexes them for search"}),"\n",(0,t.jsx)(e.li,{children:"Kibana \u2192 Visualizes errors and creates dashboards"}),"\n",(0,t.jsx)(e.li,{children:"Alerts \u2192 Can be configured via Kibana or integrated tools"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"elk-integration-example",children:"ELK Integration Example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'// logger.js\r\nconst { createLogger, transports, format } = require("winston");\r\nrequire("winston-elasticsearch");\r\n\r\nconst logger = createLogger({\r\n  level: "error",\r\n  format: format.combine(format.timestamp(), format.json()),\r\n  transports: [\r\n    new transports.Console(),\r\n    new transports.Elasticsearch({\r\n      level: "error",\r\n      clientOpts: { node: "http://localhost:9200" },\r\n      indexPrefix: "api-errors",\r\n    }),\r\n  ],\r\n});\r\n\r\nmodule.exports = logger;\n'})}),"\n",(0,t.jsx)(e.p,{children:"Using Logger in Routes"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'const express = require("express");\r\nconst logger = require("./logger");\r\n\r\nconst app = express();\r\napp.use(express.json());\r\n\r\napp.post("/api/users", (req, res) => {\r\n  try {\r\n    if (!req.body.name) throw new Error("Name required");\r\n    res.status(201).json(req.body);\r\n  } catch (err) {\r\n    logger.error({\r\n      message: err.message,\r\n      route: "/api/users",\r\n      body: req.body,\r\n      stack: err.stack,\r\n    });\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\napp.listen(3000);\n'})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Error occurs \u2192 Logged in structured JSON format"}),"\n",(0,t.jsx)(e.li,{children:"Logstash/Elasticsearch ingests logs"}),"\n",(0,t.jsxs)(e.li,{children:["Kibana dashboard visualizes errors:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Frequency over time"}),"\n",(0,t.jsx)(e.li,{children:"Endpoint-specific errors"}),"\n",(0,t.jsx)(e.li,{children:"Stack traces"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"Alerts can be set for thresholds, e.g., >10 errors in 5 minutes"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"sentry-vs-elk-stack",children:"Sentry vs ELK Stack"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Feature"}),(0,t.jsx)(e.th,{children:"Sentry"}),(0,t.jsx)(e.th,{children:"ELK Stack"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Type"}),(0,t.jsx)(e.td,{children:"Exception tracking + performance"}),(0,t.jsx)(e.td,{children:"Log aggregation & visualization"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Setup"}),(0,t.jsx)(e.td,{children:"Quick, SDK-based"}),(0,t.jsx)(e.td,{children:"Requires ELK infrastructure"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Real-time Alerts"}),(0,t.jsx)(e.td,{children:"\u2705 Yes"}),(0,t.jsx)(e.td,{children:"\u2705 Yes (via Kibana/Watcher)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Error Context"}),(0,t.jsx)(e.td,{children:"Detailed (stack, user, environment)"}),(0,t.jsx)(e.td,{children:"Depends on logged info"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Performance Monitoring"}),(0,t.jsx)(e.td,{children:"\u2705 Yes"}),(0,t.jsx)(e.td,{children:"Limited (requires custom metrics)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Best Use Case"}),(0,t.jsx)(e.td,{children:"Quick bug detection & developer alerts"}),(0,t.jsx)(e.td,{children:"Enterprise logging, analytics, long-term trends"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"best-practices-for-error-tracking",children:"Best Practices for Error Tracking"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Track both handled and unhandled errors"}),"\n",(0,t.jsx)(e.li,{children:"Include context \u2014 user ID, endpoint, request payload"}),"\n",(0,t.jsx)(e.li,{children:"Do not log sensitive information"}),"\n",(0,t.jsx)(e.li,{children:"Set alerts for critical issues"}),"\n",(0,t.jsx)(e.li,{children:"Integrate with CI/CD \u2014 e.g., fail build if errors spike"}),"\n",(0,t.jsx)(e.li,{children:"Combine tools \u2014 e.g., Sentry for exceptions, ELK for analytics"}),"\n"]})]})}function h(r={}){const{wrapper:e}={...(0,i.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(d,{...r})}):d(r)}}}]);