"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[17353],{2541(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"rust/Project Structure/Modules","title":"Modules","description":"A module is a namespace that groups related code together.","source":"@site/docs/rust/13. Project Structure/1. Modules.md","sourceDirName":"rust/13. Project Structure","slug":"/rust/Project Structure/Modules","permalink":"/handbook/docs/rust/Project Structure/Modules","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{}}');var d=s(74848),l=s(28453);const i={},c=void 0,t={},o=[{value:"The <code>mod</code> Keyword \u2013 What It Does",id:"the-mod-keyword--what-it-does",level:2},{value:"Rust\u2019s Module Tree (Mental Model)",id:"rusts-module-tree-mental-model",level:2},{value:"Inline Modules (Simple Example)",id:"inline-modules-simple-example",level:2},{value:"Example: Inline module",id:"example-inline-module",level:3},{value:"Modules and Privacy Rules",id:"modules-and-privacy-rules",level:2},{value:"File-Based Modules (Real-World Style)",id:"file-based-modules-real-world-style",level:2},{value:"Nested Modules with Folders",id:"nested-modules-with-folders",level:2},{value:"use` Keyword \u2013 Cleaner Imports",id:"use-keyword--cleaner-imports",level:2},{value:"<code>pub mod</code> vs <code>mod</code>",id:"pub-mod-vs-mod",level:2},{value:"<code>crate</code>, <code>self</code>, and <code>super</code>",id:"crate-self-and-super",level:2},{value:"Library Project Structure Example",id:"library-project-structure-example",level:2},{value:"Why Rust Modules Matter",id:"why-rust-modules-matter",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"A module is a namespace that groups related code together."}),"\n",(0,d.jsx)(n.p,{children:"Think of modules as:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"folders for logic"}),"\n",(0,d.jsxs)(n.li,{children:["boundaries for visibility (",(0,d.jsx)(n.code,{children:"pub"})," vs private)"]}),"\n",(0,d.jsx)(n.li,{children:"a way to avoid name conflicts"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Rust modules help you:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"organize large projects"}),"\n",(0,d.jsx)(n.li,{children:"control what code is accessible from outside"}),"\n",(0,d.jsx)(n.li,{children:"make APIs clean and safe"}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"the-mod-keyword--what-it-does",children:["The ",(0,d.jsx)(n.code,{children:"mod"})," Keyword \u2013 What It Does"]}),"\n",(0,d.jsx)(n.p,{children:"The mod keyword tells Rust:"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"\u201cThere is a module with this name. Load it and make it part of the module tree.\u201d"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Example: ",(0,d.jsx)(n.code,{children:"mod math;"})]}),"\n",(0,d.jsx)(n.p,{children:"This means:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["A module named ",(0,d.jsx)(n.code,{children:"math"})," exists"]}),"\n",(0,d.jsxs)(n.li,{children:["Rust should look for its contents in:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"math.rs"}),", or"]}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"math/mod.rs"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"rusts-module-tree-mental-model",children:"Rust\u2019s Module Tree (Mental Model)"}),"\n",(0,d.jsx)(n.p,{children:"Rust organizes code as a tree, starting from the crate root."}),"\n",(0,d.jsx)(n.p,{children:"Crate Root"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"main.rs"})," \u2192 binary crate"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"lib.rs"})," \u2192 library crate"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Everything starts here."}),"\n",(0,d.jsx)(n.p,{children:"Example module tree:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"crate\r\n \u251c\u2500\u2500 main.rs\r\n \u251c\u2500\u2500 math\r\n \u2502    \u251c\u2500\u2500 add.rs\r\n \u2502    \u2514\u2500\u2500 sub.rs\r\n \u2514\u2500\u2500 utils.rs\n"})}),"\n",(0,d.jsx)(n.h2,{id:"inline-modules-simple-example",children:"Inline Modules (Simple Example)"}),"\n",(0,d.jsx)(n.p,{children:"You can define modules inside a file."}),"\n",(0,d.jsx)(n.h3,{id:"example-inline-module",children:"Example: Inline module"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'mod greetings {\r\n    pub fn hello() {\r\n        println!("Hello, Rust!");\r\n    }\r\n}\r\n\r\nfn main() {\r\n    greetings::hello();\r\n}\n'})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"greetings"})," is a module"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"hello()"})," is public"]}),"\n",(0,d.jsxs)(n.li,{children:["Access path: ",(0,d.jsx)(n.code,{children:"greetings::hello()"})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Without ",(0,d.jsx)(n.code,{children:"pub"}),", ",(0,d.jsx)(n.code,{children:"hello()"})," would be private"]}),"\n",(0,d.jsx)(n.h2,{id:"modules-and-privacy-rules",children:"Modules and Privacy Rules"}),"\n",(0,d.jsx)(n.p,{children:"Rust is private by default."}),"\n",(0,d.jsx)(n.p,{children:"Rule summary"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Items inside a module are private unless marked ",(0,d.jsx)(n.code,{children:"pub"})]}),"\n",(0,d.jsx)(n.li,{children:"Parent modules cannot access private items of child modules"}),"\n",(0,d.jsx)(n.li,{children:"Child modules can access parent items"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'mod bank {\r\n    fn secret_code() {\r\n        println!("1234");\r\n    }\r\n\r\n    pub fn show_code() {\r\n        secret_code();\r\n    }\r\n}\r\n\r\nfn main() {\r\n    // bank::secret_code(); \u274c private\r\n    bank::show_code();      // \u2705 public\r\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"file-based-modules-real-world-style",children:"File-Based Modules (Real-World Style)"}),"\n",(0,d.jsx)(n.p,{children:"Project structure"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"src/\r\n \u251c\u2500\u2500 main.rs\r\n \u2514\u2500\u2500 math.rs\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"main.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'mod math;\r\n\r\nfn main() {\r\n    println!("{}", math::add(2, 3));\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"math.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub fn add(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"mod math;"})," tells Rust to load ",(0,d.jsx)(n.code,{children:"math.rs"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"add"})," is public \u2192 accessible from ",(0,d.jsx)(n.code,{children:"main"})]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"nested-modules-with-folders",children:"Nested Modules with Folders"}),"\n",(0,d.jsx)(n.p,{children:"When modules get big, we use directories."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 main.rs\r\n \u2514\u2500\u2500 math/\r\n      \u251c\u2500\u2500 mod.rs\r\n      \u251c\u2500\u2500 add.rs\r\n      \u2514\u2500\u2500 subtract.rs\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Note: In modern Rust, ",(0,d.jsx)(n.code,{children:"math.rs"})," can replace ",(0,d.jsx)(n.code,{children:"math/mod.rs"}),", but ",(0,d.jsx)(n.code,{children:"mod.rs"})," is still common."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"main.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'mod math;\r\n\r\nfn main() {\r\n    println!("{}", math::add::add(5, 2));\r\n    println!("{}", math::subtract::subtract(5, 2));\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"math/mod.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub mod add;\r\npub mod subtract;\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"math/add.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub fn add(a: i32, b: i32) -> i32 {\r\n    a + b\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"math/subtract.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub fn subtract(a: i32, b: i32) -> i32 {\r\n    a - b\r\n}\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"math"})," is a module"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"add"})," and ",(0,d.jsx)(n.code,{children:"subtract"})," are submodules"]}),"\n",(0,d.jsxs)(n.li,{children:["Path:","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"math::add::add"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"math::subtract::subtract"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"use-keyword--cleaner-imports",children:"use` Keyword \u2013 Cleaner Imports"}),"\n",(0,d.jsxs)(n.p,{children:["Typing long paths gets annoying. Use ",(0,d.jsx)(n.code,{children:"use"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'mod math;\r\n\r\nuse math::add::add;\r\nuse math::subtract::subtract;\r\n\r\nfn main() {\r\n    println!("{}", add(10, 5));\r\n    println!("{}", subtract(10, 5));\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:"This:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"brings functions into scope"}),"\n",(0,d.jsx)(n.li,{children:"improves readability"}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"pub-mod-vs-mod",children:[(0,d.jsx)(n.code,{children:"pub mod"})," vs ",(0,d.jsx)(n.code,{children:"mod"})]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Keyword"}),(0,d.jsx)(n.th,{children:"Meaning"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"mod x;"})}),(0,d.jsx)(n.td,{children:"module exists, private"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pub mod x;"})}),(0,d.jsx)(n.td,{children:"module exists, public"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"If a module isn\u2019t public, its contents can\u2019t be accessed outside."}),"\n",(0,d.jsxs)(n.h2,{id:"crate-self-and-super",children:[(0,d.jsx)(n.code,{children:"crate"}),", ",(0,d.jsx)(n.code,{children:"self"}),", and ",(0,d.jsx)(n.code,{children:"super"})]}),"\n",(0,d.jsx)(n.p,{children:"These help with relative paths."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Keyword"}),(0,d.jsx)(n.th,{children:"Meaning"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"crate::"})}),(0,d.jsx)(n.td,{children:"from crate root"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"self::"})}),(0,d.jsx)(n.td,{children:"current module"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"super::"})}),(0,d.jsx)(n.td,{children:"parent module"})]})]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"mod outer {\r\n    pub fn parent() {}\r\n\r\n    mod inner {\r\n        pub fn child() {\r\n            super::parent();\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"library-project-structure-example",children:"Library Project Structure Example"}),"\n",(0,d.jsx)(n.p,{children:"Structure"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"src/\r\n \u251c\u2500\u2500 lib.rs\r\n \u251c\u2500\u2500 auth/\r\n \u2502    \u251c\u2500\u2500 mod.rs\r\n \u2502    \u2514\u2500\u2500 login.rs\r\n \u2514\u2500\u2500 utils.rs\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"lib.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub mod auth;\r\npub mod utils;\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"auth/mod.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"pub mod login;\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"auth/login.rs"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:'pub fn login_user() {\r\n    println!("User logged in");\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:"Usage (in another crate)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-rust",children:"use mylib::auth::login::login_user;\n"})}),"\n",(0,d.jsx)(n.h2,{id:"why-rust-modules-matter",children:"Why Rust Modules Matter"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Modules help you:"}),"\n",(0,d.jsx)(n.li,{children:"build clean APIs"}),"\n",(0,d.jsx)(n.li,{children:"avoid accidental access"}),"\n",(0,d.jsx)(n.li,{children:"scale projects safely"}),"\n",(0,d.jsx)(n.li,{children:"keep code readable"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Rust\u2019s module system is strict by design, forcing you to think about architecture early."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>c});var r=s(96540);const d={},l=r.createContext(d);function i(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);