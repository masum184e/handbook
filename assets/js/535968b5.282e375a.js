"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[43196],{28453(e,n,i){i.d(n,{R:()=>d,x:()=>t});var r=i(96540);const s={},l=r.createContext(s);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(l.Provider,{value:n},e.children)}},37032(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"prisma/Prisma Schema","title":"Prisma Schema","description":"Datasource Block","source":"@site/docs/prisma/3. Prisma Schema.md","sourceDirName":"prisma","slug":"/prisma/Prisma Schema","permalink":"/handbook/docs/prisma/Prisma Schema","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"prismaApiSidebar","previous":{"title":"Installation","permalink":"/handbook/docs/prisma/Installation"},"next":{"title":"Migration","permalink":"/handbook/docs/prisma/Migration"}}');var s=i(74848),l=i(28453);const d={sidebar_position:3},t=void 0,c={},o=[{value:"Datasource Block",id:"datasource-block",level:2},{value:"Generator Block",id:"generator-block",level:2},{value:"Model",id:"model",level:2},{value:"Scalar Types",id:"scalar-types",level:2},{value:"Attributes with Scalars",id:"attributes-with-scalars",level:2},{value:"Relations Between Models",id:"relations-between-models",level:2},{value:"One-to-One",id:"one-to-one",level:3},{value:"One to Many",id:"one-to-many",level:3},{value:"Many to Many",id:"many-to-many",level:3},{value:"Optional vs Required Relations",id:"optional-vs-required-relations",level:3},{value:"Model-Level Attributes",id:"model-level-attributes",level:2},{value:"Enum",id:"enum",level:2},{value:"Indexes",id:"indexes",level:2},{value:"Unique Constraints",id:"unique-constraints",level:2},{value:"Primary Key",id:"primary-key",level:2},{value:"Single-field",id:"single-field",level:3},{value:"Compound (Multi-field)",id:"compound-multi-field",level:3},{value:"Best Practices",id:"best-practices",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"datasource-block",children:"Datasource Block"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"datasource"})," block defines the connection between Prisma and your database.\r\nIt tells Prisma:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Which database provider you\u2019re using (PostgreSQL, MySQL, SQLite, MongoDB, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Where the database is located (connection URL)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:'datasource db {\r\n  provider = "postgresql"\r\n  url      = env("DATABASE_URL")\r\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"db"})," \u2192 the name of the datasource (commonly just ",(0,s.jsx)(n.code,{children:"db"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"provider"})," \u2192 which database engine Prisma should use. Options include: ",(0,s.jsx)(n.code,{children:'"postgresql"'}),",",(0,s.jsx)(n.code,{children:'"mysql"'}),",",(0,s.jsx)(n.code,{children:'"sqlite"'}),",",(0,s.jsx)(n.code,{children:'"mongodb"'}),",",(0,s.jsx)(n.code,{children:'"cockroachdb"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"url"})," \u2192 tells Prisma where to connect. Usually ",(0,s.jsx)(n.code,{children:'env("DATABASE_URL")'})," is used to load it from ",(0,s.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"MongoDB support in Prisma is different \u2014 relations work differently since MongoDB is NoSQL."}),"\n",(0,s.jsx)(n.h2,{id:"generator-block",children:"Generator Block"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"generator"})," block defines what Prisma should generate based on your schema."]}),"\n",(0,s.jsx)(n.p,{children:"Most common generator:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:'generator client {\r\n  provider = "prisma-client-js"\r\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This generates the Prisma Client \u2192 a type-safe database client you can import in your code (",(0,s.jsx)(n.code,{children:"import { PrismaClient } from '@prisma/client'"}),")."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"client"})," \u2192 the name of the generator."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"provider"})," \u2192 the tool to generate. Options:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"prisma-client-js"'})," \u2192 generates Prisma Client (JS/TS API)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"prisma-client-go"'})," (community) \u2192 generates Prisma Client for Go."]}),"\n",(0,s.jsx)(n.li,{children:"Other community generators: GraphQL schema, JSON schema, etc."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Optional configs:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"previewFeatures"})," \u2192 enable experimental features."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"binaryTargets"})," \u2192 specify environments to generate for (useful in deployment)."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"model",children:"Model"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A model in Prisma describes the structure of a table in your database."}),"\n",(0,s.jsxs)(n.li,{children:["Each model becomes:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A table in SQL databases (PostgreSQL, MySQL, SQLite)."}),"\n",(0,s.jsx)(n.li,{children:"A collection in MongoDB."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Each field inside the model becomes a column (SQL) or a document property (MongoDB)."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model User {\r\n  id    Int     @id @default(autoincrement())\r\n  name  String\r\n  email String  @unique\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"model User {}"})," \u2192 defines a table called User."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id Int @id @default(autoincrement())"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id"})," \u2192 field name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Int"})," \u2192 data type"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@id"})," \u2192 marks this as primary key"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@default(autoincrement())"})," \u2192 automatically increases for each new row"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name String"})," \u2192 required string column"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"email String @unique"})," \u2192 column must be unique (like an email should be)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"scalar-types",children:"Scalar Types"}),"\n",(0,s.jsx)(n.p,{children:"Prisma supports common scalar types:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Prisma Type"}),(0,s.jsx)(n.th,{children:"Maps To (SQL)"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Int"})}),(0,s.jsx)(n.td,{children:"INTEGER"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id Int"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"String"})}),(0,s.jsx)(n.td,{children:"VARCHAR/TEXT"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name String"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Boolean"})}),(0,s.jsx)(n.td,{children:"BOOLEAN"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isActive Boolean"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DateTime"})}),(0,s.jsx)(n.td,{children:"TIMESTAMP/DateTime"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"createdAt DateTime"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Float"})}),(0,s.jsx)(n.td,{children:"FLOAT/DOUBLE"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"price Float"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Decimal"})}),(0,s.jsx)(n.td,{children:"DECIMAL (exact)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"amount Decimal"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Json"})}),(0,s.jsx)(n.td,{children:"JSON column"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"meta Json"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Bytes"})}),(0,s.jsx)(n.td,{children:"BLOB/BYTEA"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file Bytes"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Prisma also supports lists (",(0,s.jsx)(n.code,{children:"String[]"}),", ",(0,s.jsx)(n.code,{children:"Int[]"}),") for multi-value fields and for optional field ",(0,s.jsx)(n.code,{children:"?"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Scalar = primitive type (like ",(0,s.jsx)(n.code,{children:"String"}),", ",(0,s.jsx)(n.code,{children:"Int"}),", ",(0,s.jsx)(n.code,{children:"Boolean"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"They describe the shape of a single field in your Prisma model."}),"\n",(0,s.jsx)(n.li,{children:"Prisma maps these scalars to the closest database-native column types depending on your provider (PostgreSQL, MySQL, SQLite, MongoDB)."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"attributes-with-scalars",children:"Attributes with Scalars"}),"\n",(0,s.jsx)(n.p,{children:"Attributes add extra rules to fields."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Attribute"}),(0,s.jsx)(n.th,{children:"Meaning"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@id"})}),(0,s.jsx)(n.td,{children:"Primary key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@unique"})}),(0,s.jsx)(n.td,{children:"Unique constraint"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@default(value)"})}),(0,s.jsxs)(n.td,{children:["Default value (e.g. ",(0,s.jsx)(n.code,{children:'@default("Guest")'}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@default(now())"})}),(0,s.jsx)(n.td,{children:"Default timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@updatedAt"})}),(0,s.jsx)(n.td,{children:"Auto-update timestamp on update"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'@map("db_column_name")'})}),(0,s.jsx)(n.td,{children:"Map to different DB column name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@relation(...)"})}),(0,s.jsx)(n.td,{children:"Define foreign keys/relations"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"relations-between-models",children:"Relations Between Models"}),"\n",(0,s.jsx)(n.h3,{id:"one-to-one",children:"One-to-One"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model User {\r\n  id     Int     @id @default(autoincrement())\r\n  email  String  @unique\r\n  profile Profile?\r\n}\r\n\r\nmodel Profile {\r\n  id     Int    @id @default(autoincrement())\r\n  bio    String?\r\n  user   User   @relation(fields: [userId], references: [id])\r\n  userId Int    @unique\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"User"})," has one Profile (not required, so ",(0,s.jsx)(n.code,{children:"Profile?"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Profile"})," belongs to one User (",(0,s.jsx)(n.code,{children:"userId Int"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@unique"})," on ",(0,s.jsx)(n.code,{children:"userId"})," ensures 1:1 (each profile can only link to one user)."]}),"\n",(0,s.jsxs)(n.li,{children:["Foreign key: ",(0,s.jsx)(n.code,{children:"Profile.userId \u2192 User.id"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"SQL result:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"User"})," table \u2192 has no direct profileId."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Profile"})," table \u2192 has userId foreign key pointing to User.id."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"one-to-many",children:"One to Many"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model User {\r\n  id    Int    @id @default(autoincrement())\r\n  name  String\r\n  posts Post[]\r\n}\r\n\r\nmodel Post {\r\n  id       Int   @id @default(autoincrement())\r\n  title    String\r\n  content  String?\r\n  author   User  @relation(fields: [authorId], references: [id])\r\n  authorId Int\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"User"})," has many ",(0,s.jsx)(n.code,{children:"posts"})," \u2192 (",(0,s.jsx)(n.code,{children:"posts Post[]"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.code,{children:"Post"})," belongs to one ",(0,s.jsx)(n.code,{children:"User"})," \u2192 (",(0,s.jsx)(n.code,{children:"authorId Int"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@relation(fields: [authorId], references: [id])"})," defines the foreign key."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"SQL result:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"User"})," table \u2192 normal table with user info."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Post"})," table \u2192 includes ",(0,s.jsx)(n.code,{children:"authorId"})," foreign key."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"many-to-many",children:"Many to Many"}),"\n",(0,s.jsx)(n.p,{children:"Prisma creates a join table automatically (if not customized)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:'model Student {\r\n  id      Int      @id @default(autoincrement())\r\n  name    String\r\n  courses Course[] @relation("Enrollments")\r\n}\r\n\r\nmodel Course {\r\n  id       Int       @id @default(autoincrement())\r\n  title    String\r\n  students Student[] @relation("Enrollments")\r\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.code,{children:"Student"})," can enroll in many Courses."]}),"\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.code,{children:"Course"})," can have many Students."]}),"\n",(0,s.jsxs)(n.li,{children:["Prisma automatically creates a join table:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"_StudentToCourse\r\n----------------\r\nstudentId\r\ncourseId\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:'@relation("Enrollments")'})," is optional, but naming helps when multiple relations exist between same models."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"optional-vs-required-relations",children:"Optional vs Required Relations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Optional relation \u2192 ",(0,s.jsx)(n.code,{children:"fieldName?"})," \u2192 can be null."]}),"\n",(0,s.jsxs)(n.li,{children:["Required relation \u2192 ",(0,s.jsx)(n.code,{children:"fieldName"})," \u2192 must exist."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"model-level-attributes",children:"Model-Level Attributes"}),"\n",(0,s.jsx)(n.p,{children:"Applied to the whole model."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Attribute"}),(0,s.jsx)(n.th,{children:"Meaning"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'@@map("table")'})}),(0,s.jsx)(n.td,{children:"Map to custom table name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@@unique([a,b])"})}),(0,s.jsx)(n.td,{children:"Composite unique constraint"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@@index([a,b])"})}),(0,s.jsx)(n.td,{children:"Index on fields"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@@id([a,b])"})}),(0,s.jsx)(n.td,{children:"Composite primary key"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model Order {\r\n  orderId   Int\r\n  productId Int\r\n  quantity  Int\r\n  @@id([orderId, productId])   // composite primary key\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"enum",children:"Enum"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An enum defines a set of constant values."}),"\n",(0,s.jsx)(n.li,{children:"Prisma generates a TypeScript enum when you use Prisma Client, so you get type-safety in your queries."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:"schema.prisma"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"enum Role {\r\n  USER\r\n  ADMIN\r\n  MODERATOR\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"enum Role {}"})," \u2192 defines an enum called ",(0,s.jsx)(n.code,{children:"Role"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Possible values: ",(0,s.jsx)(n.code,{children:"USER"}),", ",(0,s.jsx)(n.code,{children:"ADMIN"}),", ",(0,s.jsx)(n.code,{children:"MODERATOR"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"These values are stored as strings in the DB (depending on the provider)."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Enums in a Model"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model User {\r\n  id    Int   @id @default(autoincrement())\r\n  name  String\r\n  role  Role  @default(USER)\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Querying Enums with Prisma Client"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'await prisma.user.create({\r\n  data: {\r\n    name: "Alice",\r\n    role: Role.ADMIN,\r\n  },\r\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"indexes",children:"Indexes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Index: A database structure that speeds up queries for specific columns.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Does not enforce uniqueness by default."}),"\n",(0,s.jsx)(n.li,{children:"Useful for searching, filtering, and sorting."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Single-field Index"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model Post {\r\n  id        Int      @id @default(autoincrement())\r\n  title     String\r\n  createdAt DateTime\r\n\r\n  @@index([title])\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Multi-field Index (Composite Index)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model Post {\r\n  id        Int      @id @default(autoincrement())\r\n  title     String\r\n  published Boolean\r\n  createdAt DateTime\r\n\r\n  @@index([title, published])\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"unique-constraints",children:"Unique Constraints"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Unique Constraint: Ensures that the column (or combination of columns) cannot have duplicate values.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatically creates an index."}),"\n",(0,s.jsx)(n.li,{children:"Ensures data integrity (e.g., emails, usernames)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Single-field Unique Constraint"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model User {\r\n  id    Int    @id @default(autoincrement())\r\n  email String @unique\r\n  name  String\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Multi-field Unique Constraint (Composite Unique)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model Order {\r\n  orderId   Int\r\n  productId Int\r\n  quantity  Int\r\n  @@unique([orderId, productId])\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Unique constraints automatically create an index."}),"\n",(0,s.jsx)(n.li,{children:"Indexes are for performance, uniqueness is for data integrity."}),"\n",(0,s.jsx)(n.li,{children:"You can have multiple indexes on a table without affecting uniqueness."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"primary-key",children:"Primary Key"}),"\n",(0,s.jsx)(n.h3,{id:"single-field",children:"Single-field"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@id"})," marks a field as the primary key."]}),"\n",(0,s.jsx)(n.li,{children:"The primary key uniquely identifies each row in a table."}),"\n",(0,s.jsx)(n.li,{children:"Automatically indexed by the database."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compound-multi-field",children:"Compound (Multi-field)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@@id"})," defines a primary key consisting of multiple fields."]}),"\n",(0,s.jsx)(n.li,{children:"Useful when no single field is unique, but a combination of fields is."}),"\n",(0,s.jsx)(n.li,{children:"Prisma supports this using model-level attributes."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-prisma",children:"model Order {\r\n  orderId   Int\r\n  productId Int\r\n  quantity  Int\r\n\r\n  @@id([orderId, productId])   // compound primary key\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Primary key is both ",(0,s.jsx)(n.code,{children:"orderId"})," and ",(0,s.jsx)(n.code,{children:"productId"})," together."]}),"\n",(0,s.jsxs)(n.li,{children:["A single ",(0,s.jsx)(n.code,{children:"orderId"})," or ",(0,s.jsx)(n.code,{children:"productId"})," can repeat, but the combination must be unique."]}),"\n",(0,s.jsxs)(n.li,{children:["No need for ",(0,s.jsx)(n.code,{children:"@id"})," on individual fields when using ",(0,s.jsx)(n.code,{children:"@@id"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"@id"})," for auto-increment numeric IDs \u2192 simpler and recommended for most tables."]}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"@@id"})," for join tables or when no single field is unique."]}),"\n",(0,s.jsxs)(n.li,{children:["Always consider querying patterns \u2014 compound keys may require multiple columns in ",(0,s.jsx)(n.code,{children:"WHERE"})," clauses."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);