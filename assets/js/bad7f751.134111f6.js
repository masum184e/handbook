"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[3220],{4959(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"database-design/Sharding","title":"Sharding","description":"Sharding = a form of horizontal partitioning across multiple servers (databases).","source":"@site/docs/database-design/15. Sharding.md","sourceDirName":"database-design","slug":"/database-design/Sharding","permalink":"/handbook/docs/database-design/Sharding","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16}}');var r=i(4848),a=i(8453);const d={sidebar_position:16},l=void 0,t={},h=[{value:"Sharding Strategies",id:"sharding-strategies",level:2},{value:"Range-based Sharding",id:"range-based-sharding",level:3},{value:"Hash-based Sharding",id:"hash-based-sharding",level:3},{value:"Geographic Sharding",id:"geographic-sharding",level:3},{value:"Example of Sharding",id:"example-of-sharding",level:2},{value:"Partitioning vs Sharding",id:"partitioning-vs-sharding",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Advantages",id:"advantages",level:3},{value:"Disadvantages",id:"disadvantages",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Sharding = a form of horizontal partitioning across multiple servers (databases)."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"While partitioning usually happens inside a single database server,"}),"\n",(0,r.jsx)(n.li,{children:"Sharding distributes the data across multiple servers (shards)."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Difference:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Partitioning = within one database."}),"\n",(0,r.jsx)(n.li,{children:"Sharding = across multiple databases/servers."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"sharding-strategies",children:"Sharding Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"range-based-sharding",children:"Range-based Sharding"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each shard stores a specific range of values."}),"\n",(0,r.jsxs)(n.li,{children:["Example:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Shard 1 \u2192 ",(0,r.jsx)(n.code,{children:"CustomerID 1\u201310000"})]}),"\n",(0,r.jsxs)(n.li,{children:["Shard 2 \u2192 ",(0,r.jsx)(n.code,{children:"CustomerID 10001\u201320000"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"hash-based-sharding",children:"Hash-based Sharding"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use a hash function to decide which shard stores the row."}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:"MOD(CustomerID, 4)"})," \u2192 distribute across 4 shards."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"geographic-sharding",children:"Geographic Sharding"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Shard data based on geography."}),"\n",(0,r.jsx)(n.li,{children:"Example: EU users stored in European servers, US users in US servers."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-of-sharding",children:"Example of Sharding"}),"\n",(0,r.jsx)(n.p,{children:"Imagine an E-commerce platform with millions of users:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User Table (UserID, Name, Email, Region)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sharding by region:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Shard 1 \u2192 Users in North America."}),"\n",(0,r.jsx)(n.li,{children:"Shard 2 \u2192 Users in Europe."}),"\n",(0,r.jsx)(n.li,{children:"Shard 3 \u2192 Users in Asia."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Benefits:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Load distributed across servers."}),"\n",(0,r.jsx)(n.li,{children:"Queries run only on the relevant shard."}),"\n",(0,r.jsx)(n.li,{children:"Better scalability and fault isolation."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"partitioning-vs-sharding",children:"Partitioning vs Sharding"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"Partitioning"}),(0,r.jsx)(n.th,{children:"Sharding"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scope"}),(0,r.jsx)(n.td,{children:"Within one database server"}),(0,r.jsx)(n.td,{children:"Across multiple servers/databases"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Transparency"}),(0,r.jsx)(n.td,{children:"Database engine handles it"}),(0,r.jsx)(n.td,{children:"Application or middleware handles it"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Purpose"}),(0,r.jsx)(n.td,{children:"Query optimization, maintenance"}),(0,r.jsx)(n.td,{children:"Scalability, distributing workload"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Example"}),(0,r.jsxs)(n.td,{children:["Splitting ",(0,r.jsx)(n.code,{children:"Orders"})," by year"]}),(0,r.jsxs)(n.td,{children:["Splitting ",(0,r.jsx)(n.code,{children:"Users"})," across regions"]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"advantages",children:"Advantages"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Partitioning:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Faster queries (only relevant partition scanned)."}),"\n",(0,r.jsx)(n.li,{children:"Easier archiving & maintenance."}),"\n",(0,r.jsxs)(n.li,{children:["Enables parallel query execution.\r\n",(0,r.jsx)(n.strong,{children:"Sharding:"})]}),"\n",(0,r.jsx)(n.li,{children:"Massive scalability (data spread across servers)."}),"\n",(0,r.jsx)(n.li,{children:"High availability (failure in one shard doesn\u2019t kill the whole system)."}),"\n",(0,r.jsx)(n.li,{children:"Distributes write-heavy workloads."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"disadvantages",children:"Disadvantages"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Partitioning:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Still limited by a single server\u2019s hardware."}),"\n",(0,r.jsxs)(n.li,{children:["Complex queries spanning many partitions may be slower.\r\n",(0,r.jsx)(n.strong,{children:"Sharding:"})]}),"\n",(0,r.jsx)(n.li,{children:"More complex application logic (need to know which shard to query)."}),"\n",(0,r.jsx)(n.li,{children:"Rebalancing shards is difficult."}),"\n",(0,r.jsx)(n.li,{children:"Joins across shards are hard."}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>l});var s=i(6540);const r={},a=s.createContext(r);function d(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);