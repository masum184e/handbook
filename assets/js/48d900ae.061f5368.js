"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[50284],{28398(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"design-patterns/SOLID Principles/LSP","title":"LSP","description":"Many developers think LSP is just:","source":"@site/docs/design-patterns/2. SOLID Principles/3. LSP.md","sourceDirName":"design-patterns/2. SOLID Principles","slug":"/design-patterns/SOLID Principles/LSP","permalink":"/handbook/docs/design-patterns/SOLID Principles/LSP","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"designPatternsSidebar","previous":{"title":"OCP","permalink":"/handbook/docs/design-patterns/SOLID Principles/OCP"},"next":{"title":"ISP","permalink":"/handbook/docs/design-patterns/SOLID Principles/ISP"}}');var r=i(74848),l=i(28453);const t={},a=void 0,c={},d=[{value:"Why LSP Exists",id:"why-lsp-exists",level:2},{value:"The Rectangle\u2013Square Problem (Classic LSP Violation)",id:"the-rectanglesquare-problem-classic-lsp-violation",level:2},{value:"What Actually Broke?",id:"what-actually-broke",level:2},{value:"The Three Core Rules of LSP",id:"the-three-core-rules-of-lsp",level:2},{value:"Not strengthen preconditions",id:"not-strengthen-preconditions",level:3},{value:"Not weaken postconditions",id:"not-weaken-postconditions",level:3},{value:"Preserve invariants",id:"preserve-invariants",level:3},{value:"Real-World Example: Bird Problem",id:"real-world-example-bird-problem",level:2},{value:"Why LSP Is So Important",id:"why-lsp-is-so-important",level:2},{value:"Real-World Tradeoffs",id:"real-world-tradeoffs",level:2},{value:"Strict LSP Reduces Inheritance Use",id:"strict-lsp-reduces-inheritance-use",level:3},{value:"Overengineering Risk",id:"overengineering-risk",level:3},{value:"Domain vs Behavior Conflict",id:"domain-vs-behavior-conflict",level:3},{value:"Subtle Real Example: Read-Only Collection",id:"subtle-real-example-read-only-collection",level:2},{value:"LSP and SOLID",id:"lsp-and-solid",level:2},{value:"Deep Insight",id:"deep-insight",level:2},{value:"When Breaking LSP Might Be Acceptable",id:"when-breaking-lsp-might-be-acceptable",level:2},{value:"Practical Rule of Thumb",id:"practical-rule-of-thumb",level:2},{value:"Final Summary",id:"final-summary",level:2}];function h(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Many developers think LSP is just:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u201cA subclass should be usable wherever its superclass is used.\u201d"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"That\u2019s only the surface."}),"\n",(0,r.jsx)(n.p,{children:"Let\u2019s go deep."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"If S is a subtype of T, then objects of type T should be replaceable with objects of type S without altering the correctness of the program."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In simpler terms:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Subtypes must honor the contract of their base type."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Not just method signatures.\r\nNot just inheritance."}),"\n",(0,r.jsx)(n.p,{children:"But behavior."}),"\n",(0,r.jsx)(n.h2,{id:"why-lsp-exists",children:"Why LSP Exists"}),"\n",(0,r.jsx)(n.p,{children:"Inheritance creates trust."}),"\n",(0,r.jsx)(n.p,{children:"When you accept a base type:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"void process(Shape shape)\n"})}),"\n",(0,r.jsx)(n.p,{children:"You are trusting:"}),"\n",(0,r.jsx)(n.p,{children:"Its invariants hold"}),"\n",(0,r.jsx)(n.p,{children:"Its methods behave as promised"}),"\n",(0,r.jsx)(n.p,{children:"It doesn\u2019t break assumptions"}),"\n",(0,r.jsx)(n.p,{children:"If a subtype violates those assumptions \u2192 system breaks."}),"\n",(0,r.jsx)(n.h2,{id:"the-rectanglesquare-problem-classic-lsp-violation",children:"The Rectangle\u2013Square Problem (Classic LSP Violation)"}),"\n",(0,r.jsx)(n.p,{children:"Base class:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class Rectangle {\r\n    protected int width;\r\n    protected int height;\r\n\r\n    public void setWidth(int width) {\r\n        this.width = width;\r\n    }\r\n\r\n    public void setHeight(int height) {\r\n        this.height = height;\r\n    }\r\n\r\n    public int getArea() {\r\n        return width * height;\r\n    }\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now someone writes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class Square extends Rectangle {\r\n\r\n    @Override\r\n    public void setWidth(int width) {\r\n        this.width = width;\r\n        this.height = width;\r\n    }\r\n\r\n    @Override\r\n    public void setHeight(int height) {\r\n        this.width = height;\r\n        this.height = height;\r\n    }\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Looks mathematically valid."}),"\n",(0,r.jsx)(n.p,{children:"But now:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Rectangle r = new Square();\r\nr.setWidth(5);\r\nr.setHeight(10);\r\n\r\nSystem.out.println(r.getArea());\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Expected (based on Rectangle logic):",(0,r.jsx)(n.br,{}),"\n","5 \xd7 10 = 50"]}),"\n",(0,r.jsxs)(n.p,{children:["Actual:",(0,r.jsx)(n.br,{}),"\n","10 \xd7 10 = 100"]}),"\n",(0,r.jsx)(n.p,{children:"The program\u2019s correctness changed."}),"\n",(0,r.jsx)(n.p,{children:"LSP is violated."}),"\n",(0,r.jsx)(n.h2,{id:"what-actually-broke",children:"What Actually Broke?"}),"\n",(0,r.jsx)(n.p,{children:"Rectangle\u2019s implicit contract:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Width and height are independent."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Square\u2019s invariant:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Width == Height."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"These invariants conflict."}),"\n",(0,r.jsx)(n.p,{children:"Inheritance created a logical contradiction."}),"\n",(0,r.jsx)(n.h2,{id:"the-three-core-rules-of-lsp",children:"The Three Core Rules of LSP"}),"\n",(0,r.jsx)(n.p,{children:"A subtype must:"}),"\n",(0,r.jsx)(n.h3,{id:"not-strengthen-preconditions",children:"Not strengthen preconditions"}),"\n",(0,r.jsx)(n.p,{children:"If base method accepts any positive number:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"void withdraw(double amount)\n"})}),"\n",(0,r.jsx)(n.p,{children:"The subclass cannot restrict it further."}),"\n",(0,r.jsx)(n.p,{children:"Bad:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Override\r\nvoid withdraw(double amount) {\r\n    if (amount < 100) throw new IllegalArgumentException();\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now callers that worked before break."}),"\n",(0,r.jsx)(n.h3,{id:"not-weaken-postconditions",children:"Not weaken postconditions"}),"\n",(0,r.jsx)(n.p,{children:"If base guarantees:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Withdrawal reduces balance."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Subclass cannot change that behavior."}),"\n",(0,r.jsx)(n.h3,{id:"preserve-invariants",children:"Preserve invariants"}),"\n",(0,r.jsx)(n.p,{children:"If base ensures:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Balance \u2265 0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Subclass must not violate it."}),"\n",(0,r.jsx)(n.h2,{id:"real-world-example-bird-problem",children:"Real-World Example: Bird Problem"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'class Bird {\r\n    public void fly() {\r\n        System.out.println("Flying");\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Subclass:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class Penguin extends Bird {\r\n    @Override\r\n    public void fly() {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"void makeBirdFly(Bird bird) {\r\n    bird.fly();\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you pass a Penguin \u2192 crash."}),"\n",(0,r.jsx)(n.p,{children:"Penguin is biologically a bird."}),"\n",(0,r.jsx)(n.p,{children:"But not behaviorally substitutable."}),"\n",(0,r.jsx)(n.p,{children:"Inheritance was wrong."}),"\n",(0,r.jsx)(n.p,{children:"Better design:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"interface Bird { }\r\n\r\ninterface FlyingBird extends Bird {\r\n    void fly();\r\n}\r\n\r\nclass Eagle implements FlyingBird { ... }\r\nclass Penguin implements Bird { ... }\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now contracts match reality."}),"\n",(0,r.jsx)(n.h2,{id:"why-lsp-is-so-important",children:"Why LSP Is So Important"}),"\n",(0,r.jsx)(n.p,{children:"Without LSP:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Polymorphism becomes unsafe"}),"\n",(0,r.jsx)(n.li,{children:"OCP breaks down"}),"\n",(0,r.jsx)(n.li,{children:"Systems become fragile"}),"\n",(0,r.jsx)(n.li,{children:"Hidden bugs appear"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"LSP is what makes inheritance reliable."}),"\n",(0,r.jsx)(n.h2,{id:"real-world-tradeoffs",children:"Real-World Tradeoffs"}),"\n",(0,r.jsx)(n.p,{children:"LSP is idealistic.\r\nReal systems are messy."}),"\n",(0,r.jsx)(n.p,{children:"Let\u2019s talk tradeoffs."}),"\n",(0,r.jsx)(n.h3,{id:"strict-lsp-reduces-inheritance-use",children:"Strict LSP Reduces Inheritance Use"}),"\n",(0,r.jsx)(n.p,{children:"If you follow LSP strictly:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You\u2019ll use less inheritance."}),"\n",(0,r.jsx)(n.li,{children:"You\u2019ll favor composition."}),"\n",(0,r.jsx)(n.li,{children:"You\u2019ll create smaller, more precise interfaces."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This increases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Number of types"}),"\n",(0,r.jsx)(n.li,{children:"Design complexity"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"But increases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Predictability"}),"\n",(0,r.jsx)(n.li,{children:"Maintainability"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"overengineering-risk",children:"Overengineering Risk"}),"\n",(0,r.jsx)(n.p,{children:"If you try to perfectly model every contract:"}),"\n",(0,r.jsx)(n.p,{children:"You may create:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Too many abstractions"}),"\n",(0,r.jsx)(n.li,{children:"Microscopic interfaces"}),"\n",(0,r.jsx)(n.li,{children:"Hard-to-understand hierarchies"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Balance matters."}),"\n",(0,r.jsx)(n.h3,{id:"domain-vs-behavior-conflict",children:"Domain vs Behavior Conflict"}),"\n",(0,r.jsx)(n.p,{children:"Sometimes domain hierarchy \u2260 behavioral hierarchy."}),"\n",(0,r.jsx)(n.p,{children:"Mathematically: Square is a Rectangle."}),"\n",(0,r.jsx)(n.p,{children:"Behaviorally: Square cannot substitute Rectangle safely."}),"\n",(0,r.jsx)(n.p,{children:"OOP models behavior, not taxonomy."}),"\n",(0,r.jsx)(n.p,{children:"That\u2019s a mental shift many struggle with."}),"\n",(0,r.jsx)(n.h2,{id:"subtle-real-example-read-only-collection",children:"Subtle Real Example: Read-Only Collection"}),"\n",(0,r.jsx)(n.p,{children:"Imagine:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"interface List {\r\n    void add(String item);\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now someone creates:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class ReadOnlyList implements List {\r\n    @Override\r\n    public void add(String item) {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This compiles.\r\nBut violates LSP."}),"\n",(0,r.jsx)(n.p,{children:"Because base type contract implied:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"add()"})," works."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Better design:"}),"\n",(0,r.jsx)(n.p,{children:"Split interface:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"interface ReadableList { ... }\r\ninterface ModifiableList extends ReadableList {\r\n    void add(String item);\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now contracts are honest."}),"\n",(0,r.jsx)(n.h2,{id:"lsp-and-solid",children:"LSP and SOLID"}),"\n",(0,r.jsx)(n.p,{children:"LSP supports:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"OCP (safe extension)"}),"\n",(0,r.jsx)(n.li,{children:"DIP (safe substitution)"}),"\n",(0,r.jsx)(n.li,{children:"SRP (clear responsibilities)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If LSP fails:\r\nEverything collapses."}),"\n",(0,r.jsx)(n.h2,{id:"deep-insight",children:"Deep Insight"}),"\n",(0,r.jsx)(n.p,{children:"LSP is about behavioral compatibility."}),"\n",(0,r.jsx)(n.p,{children:"Not structure.\r\nNot inheritance syntax.\r\nNot code reuse."}),"\n",(0,r.jsx)(n.p,{children:"Behavior."}),"\n",(0,r.jsx)(n.p,{children:"It forces you to ask:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"What promises does this type make?"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If the subtype cannot fully keep those promises,\r\nit should not inherit."}),"\n",(0,r.jsx)(n.h2,{id:"when-breaking-lsp-might-be-acceptable",children:"When Breaking LSP Might Be Acceptable"}),"\n",(0,r.jsx)(n.p,{children:"In:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Internal, small systems"}),"\n",(0,r.jsx)(n.li,{children:"Controlled environments"}),"\n",(0,r.jsx)(n.li,{children:"Performance-critical code"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sometimes you knowingly bend it."}),"\n",(0,r.jsxs)(n.p,{children:["But in large evolving systems?",(0,r.jsx)(n.br,{}),"\n","Violating LSP becomes expensive."]}),"\n",(0,r.jsx)(n.h2,{id:"practical-rule-of-thumb",children:"Practical Rule of Thumb"}),"\n",(0,r.jsx)(n.p,{children:"Before using inheritance, ask:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Can I replace parent with child without changing expectations?"}),"\n",(0,r.jsx)(n.li,{children:"Does the child strengthen preconditions?"}),"\n",(0,r.jsx)(n.li,{children:"Does the child weaken guarantees?"}),"\n",(0,r.jsx)(n.li,{children:"Are invariants compatible?"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If unsure \u2192 use composition."}),"\n",(0,r.jsx)(n.h2,{id:"final-summary",children:"Final Summary"}),"\n",(0,r.jsx)(n.p,{children:"Liskov Substitution Principle ensures:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Safe polymorphism"}),"\n",(0,r.jsx)(n.li,{children:"Reliable inheritance"}),"\n",(0,r.jsx)(n.li,{children:"Stable contracts"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"It prevents:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fragile hierarchies"}),"\n",(0,r.jsx)(n.li,{children:"Hidden runtime failures"}),"\n",(0,r.jsx)(n.li,{children:"Behavioral contradictions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"It pushes you toward:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Clear contracts"}),"\n",(0,r.jsx)(n.li,{children:"Smaller interfaces"}),"\n",(0,r.jsx)(n.li,{children:"Composition over inheritance"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);