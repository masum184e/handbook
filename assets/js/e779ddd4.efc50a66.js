"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[57847],{28453(e,n,r){r.d(n,{R:()=>c,x:()=>t});var s=r(96540);const i={},l=s.createContext(i);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(l.Provider,{value:n},e.children)}},67672(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"rust/Error Handling.md/Unwrap and Expect","title":"Unwrap and Expect","description":"Extract the value from Option or Result.","source":"@site/docs/rust/12. Error Handling.md/3. Unwrap and Expect.md","sourceDirName":"rust/12. Error Handling.md","slug":"/rust/Error Handling.md/Unwrap and Expect","permalink":"/handbook/docs/rust/Error Handling.md/Unwrap and Expect","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"rustApiSidebar","previous":{"title":"Result & Option","permalink":"/handbook/docs/rust/Error Handling.md/Result & Option"},"next":{"title":"Error Propagation","permalink":"/handbook/docs/rust/Error Handling.md/Error Propagation"}}');var i=r(74848),l=r(28453);const c={},t=void 0,d={},a=[{value:"<code>unwrap()</code>",id:"unwrap",level:2},{value:"<code>expect()</code>",id:"expect",level:2},{value:"Key Differences",id:"key-differences",level:2},{value:"When should you use them?",id:"when-should-you-use-them",level:2},{value:"Example: unwrap vs expect in practice",id:"example-unwrap-vs-expect-in-practice",level:3},{value:"Best Practice",id:"best-practice",level:2}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Extract the value from ",(0,i.jsx)(n.code,{children:"Option<T>"})," or ",(0,i.jsx)(n.code,{children:"Result<T, E>"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Panic if the value is not present (",(0,i.jsx)(n.code,{children:"None"})," or ",(0,i.jsx)(n.code,{children:"Err"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"Are meant for situations where failure is truly unexpected or impossible."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"unwrap",children:(0,i.jsx)(n.code,{children:"unwrap()"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Returns the inner value if it exists."}),"\n",(0,i.jsx)(n.li,{children:"Panics with a generic error message if it doesn\u2019t."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'fn main() {\r\n    let x = Some(5);\r\n    let value = x.unwrap();\r\n    println!("Value: {}", value);\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If it fails:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"let x: Option<i32> = None;\r\nlet value = x.unwrap(); // panic!\n"})}),"\n",(0,i.jsx)(n.p,{children:"Panic message (simplified):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"thread 'main' panicked at 'called `Option::unwrap()` on a `None` value'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Example with ",(0,i.jsx)(n.code,{children:"Result"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'fn main() {\r\n    let result: Result<i32, &str> = Ok(10);\r\n    let value = result.unwrap();\r\n    println!("Value: {}", value);\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"Err"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"expect",children:(0,i.jsx)(n.code,{children:"expect()"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Same as ",(0,i.jsx)(n.code,{children:"unwrap()"}),", but lets you provide a custom panic message."]}),"\n",(0,i.jsx)(n.li,{children:"This makes debugging much easier."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Example with ",(0,i.jsx)(n.code,{children:"Option"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'fn main() {\r\n    let x: Option<i32> = None;\r\n    let value = x.expect("Expected a number, but got None");\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Panic message:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"thread 'main' panicked at 'Expected a number, but got None'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Example with ",(0,i.jsx)(n.code,{children:"Result"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use std::fs::File;\r\n\r\nfn main() {\r\n    let file = File::open("config.txt")\r\n        .expect("Failed to open config file");\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If the file doesn\u2019t exist:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"thread 'main' panicked at 'Failed to open config file: ...'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"key-differences",children:"Key Differences"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"unwrap()"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"expect(msg)"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Panic message"}),(0,i.jsx)(n.td,{children:"Generic and fixed"}),(0,i.jsx)(n.td,{children:"Custom, developer-defined"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Debugging"}),(0,i.jsx)(n.td,{children:"Less helpful"}),(0,i.jsx)(n.td,{children:"More informative"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Use case"}),(0,i.jsx)(n.td,{children:"Quick tests, prototypes"}),(0,i.jsx)(n.td,{children:"Production code where panic is acceptable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Behavior"}),(0,i.jsx)(n.td,{children:"Panic on failure"}),(0,i.jsx)(n.td,{children:"Panic on failure"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"when-should-you-use-them",children:"When should you use them?"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"unwrap()"})," or ",(0,i.jsx)(n.code,{children:"expect()"})," when:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You are 100% sure the value exists."}),"\n",(0,i.jsx)(n.li,{children:"A failure indicates a bug, not a normal runtime error."}),"\n",(0,i.jsx)(n.li,{children:"Writing tests, examples, or quick scripts."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Avoid them when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Failure is possible due to user input, files, networks, etc."}),"\n",(0,i.jsx)(n.li,{children:"You want your program to recover gracefully."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-unwrap-vs-expect-in-practice",children:"Example: unwrap vs expect in practice"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'use std::env;\r\n\r\nfn main() {\r\n    let args: Vec<String> = env::args().collect();\r\n\r\n    // Using unwrap (bad message if missing)\r\n    let filename1 = args.get(1).unwrap();\r\n\r\n    // Using expect (good message)\r\n    let filename2 = args.get(2).expect("Please provide a second filename");\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"If the user forgets to pass arguments:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"unwrap()"})," \u2192 generic panic message."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"expect()"})," \u2192 helpful, user-friendly message."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practice",children:"Best Practice"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Prefer ",(0,i.jsx)(n.code,{children:"expect()"})," over ",(0,i.jsx)(n.code,{children:"unwrap()"})," when you must panic."]}),"\n",(0,i.jsxs)(n.li,{children:["Prefer returning ",(0,i.jsx)(n.code,{children:"Result"})," over panicking whenever possible."]}),"\n",(0,i.jsxs)(n.li,{children:["Reserve ",(0,i.jsx)(n.code,{children:"unwrap()"})," for:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests"}),"\n",(0,i.jsx)(n.li,{children:"Examples"}),"\n",(0,i.jsx)(n.li,{children:"One-off tools"}),"\n",(0,i.jsx)(n.li,{children:"Places where failure is truly impossible."}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);