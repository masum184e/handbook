"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[5225],{1053(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>a,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"expressjs/Response","title":"Response","description":"Redirection","source":"@site/docs/expressjs/5. Response.md","sourceDirName":"expressjs","slug":"/expressjs/Response","permalink":"/handbook/docs/expressjs/Response","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Response","sidebar_position":5},"sidebar":"expressSidebar","previous":{"title":"Middleware","permalink":"/handbook/docs/expressjs/Middleware"},"next":{"title":"Template Engine","permalink":"/handbook/docs/expressjs/Template Engine"}}');var t=s(4848),d=s(8453);const i={title:"Response",sidebar_position:5},o=void 0,l={},c=[{value:"Redirection",id:"redirection",level:2},{value:"Common Status Codes for Redirects",id:"common-status-codes-for-redirects",level:3},{value:"301 \u2013 Moved Permanently",id:"301--moved-permanently",level:4},{value:"302 \u2013 Found (Temporary Redirect, old default)",id:"302--found-temporary-redirect-old-default",level:4},{value:"307 \u2013 Temporary Redirect (method preserved)",id:"307--temporary-redirect-method-preserved",level:4},{value:"308 \u2013 Permanent Redirect (method preserved)",id:"308--permanent-redirect-method-preserved",level:4},{value:"Setting Headers",id:"setting-headers",level:2}];function h(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"redirection",children:"Redirection"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"res.redirect()"})," tells the client (browser or HTTP client) to make a new request to a different URL."]}),"\n",(0,t.jsxs)(n.li,{children:["It sends an HTTP 3xx status code along with the ",(0,t.jsx)(n.code,{children:"Location"})," header."]}),"\n",(0,t.jsx)(n.li,{children:"Express automatically sets 302 Found by default if no status code is provided."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"res.redirect([statusCode], path);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"statusCode"})," \u2192 Optional. The HTTP status code for the redirect (default: 302)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"path"})," \u2192 The URL or route to redirect to."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"common-status-codes-for-redirects",children:"Common Status Codes for Redirects"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Meaning"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"301"}),(0,t.jsx)(n.td,{children:"Moved Permanently"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"302"}),(0,t.jsx)(n.td,{children:"Found (temporary, default)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"307"}),(0,t.jsx)(n.td,{children:"Temporary Redirect (preserve HTTP method)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"308"}),(0,t.jsx)(n.td,{children:"Permanent Redirect (preserve HTTP method)"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"301--moved-permanently",children:"301 \u2013 Moved Permanently"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Meaning:"})," The resource has been moved permanently to a new URL."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Browser behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Search engines update their index to the new URL."}),"\n",(0,t.jsx)(n.li,{children:"Browsers may cache the redirection aggressively."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTTP Method handling:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Some clients may change non-GET methods (like ",(0,t.jsx)(n.code,{children:"POST"}),") to ",(0,t.jsx)(n.code,{children:"GET"})," when following a 301 (this is not strictly correct but is common)."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use case:"})," When a page or resource has a permanent new home (e.g., changing domain name)."]}),"\n",(0,t.jsx)(n.h4,{id:"302--found-temporary-redirect-old-default",children:"302 \u2013 Found (Temporary Redirect, old default)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Meaning:"})," The resource is temporarily at another URL."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Browser behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Search engines generally do not update their index (they keep the old URL)."}),"\n",(0,t.jsx)(n.li,{children:"Browsers treat it as temporary."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTTP Method handling:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Historically, many clients convert ",(0,t.jsx)(n.code,{children:"POST"})," \u2192 ",(0,t.jsx)(n.code,{children:"GET"}),", which is not ideal."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use case:"})," Short-term redirects (e.g., A/B testing, maintenance)."]}),"\n",(0,t.jsx)(n.h4,{id:"307--temporary-redirect-method-preserved",children:"307 \u2013 Temporary Redirect (method preserved)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Meaning:"})," Resource temporarily resides at a different URL, but\u2026"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTTP Method handling:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Unlike 302, it guarantees the same HTTP method and body are preserved."}),"\n",(0,t.jsxs)(n.li,{children:["Example: A ",(0,t.jsx)(n.code,{children:"POST"})," request remains a ",(0,t.jsx)(n.code,{children:"POST"})," request after redirection."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use case:"})," When the redirect is temporary, but you want to make sure the request method and data are not lost (e.g., login ",(0,t.jsx)(n.code,{children:"POST"})," requests)."]}),"\n",(0,t.jsx)(n.h4,{id:"308--permanent-redirect-method-preserved",children:"308 \u2013 Permanent Redirect (method preserved)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Meaning:"})," Resource has been permanently moved, like 301."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTTP Method handling:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Like 307, it preserves the HTTP method and body."}),"\n",(0,t.jsxs)(n.li,{children:["Example: A ",(0,t.jsx)(n.code,{children:"PUT"})," or ",(0,t.jsx)(n.code,{children:"POST"})," request stays the same after redirection."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use case:"})," Permanent changes where the request method must be preserved (e.g., moving an API endpoint to a new path)."]}),"\n",(0,t.jsx)(n.h2,{id:"setting-headers",children:"Setting Headers"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"res.set()"})," allows you to manually set HTTP headers on the response."]}),"\n",(0,t.jsx)(n.li,{children:"Headers provide metadata about the response (e.g., content type, caching, authentication)."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"res.set(field: string | object, value?: string | string[]): this\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"field"})," \u2192 Name of the header (or an object with multiple headers)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"value"})," \u2192 Value of the header (optional if using object)."]}),"\n",(0,t.jsxs)(n.li,{children:["Returns: the response object so you can chain methods like ",(0,t.jsx)(n.code,{children:".status()"})," and ",(0,t.jsx)(n.code,{children:".send()"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'res.set({\r\n  "X-App-Version": "1.0.0",\r\n  "Cache-Control": "no-store",\r\n  "X-Powered-By": "Express",\r\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common Use Cases"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Setting ",(0,t.jsx)(n.code,{children:"Content-Type"})," (text, JSON(",(0,t.jsx)(n.code,{children:'res.set("Content-Type", "application/json");'}),"), HTML)"]}),"\n",(0,t.jsx)(n.li,{children:"Adding security headers (custom or for CORS)"}),"\n",(0,t.jsxs)(n.li,{children:["Controlling caching (",(0,t.jsx)(n.code,{children:"Cache-Control"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Setting custom headers for APIs (like ",(0,t.jsx)(n.code,{children:"X-Rate-Limit"}),")"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var r=s(6540);const t={},d=r.createContext(t);function i(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);