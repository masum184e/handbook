"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[74502],{28453(e,n,s){s.d(n,{R:()=>a,x:()=>t});var i=s(96540);const l={},r=i.createContext(l);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},45830(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"typescript/Type Declaration","title":"Type Declaration","description":"Ambient Declarations","source":"@site/docs/typescript/8. Type Declaration.md","sourceDirName":"typescript","slug":"/typescript/Type Declaration","permalink":"/handbook/docs/typescript/Type Declaration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"typescriptSidebar","previous":{"title":"Modules","permalink":"/handbook/docs/typescript/Modules"},"next":{"title":"Advance Features","permalink":"/handbook/docs/typescript/Advance Features"}}');var l=s(74848),r=s(28453);const a={},t=void 0,c={},d=[{value:"Ambient Declarations",id:"ambient-declarations",level:2},{value:"Why Do We Need <code>.d.ts</code> Files?",id:"why-do-we-need-dts-files",level:3},{value:"Syntax of Ambient Declarations",id:"syntax-of-ambient-declarations",level:3},{value:"Declaring a Global Variable",id:"declaring-a-global-variable",level:3},{value:"Declaring a Module",id:"declaring-a-module",level:3},{value:"Declaring a Namespace",id:"declaring-a-namespace",level:3},{value:"Merging with Existing Types",id:"merging-with-existing-types",level:3},{value:"Key Rules of <code>.d.ts</code> Files",id:"key-rules-of-dts-files",level:3},{value:"DefinitelyTyped",id:"definitelytyped",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Using Lodash with <code>@types/lodash</code>",id:"using-lodash-with-typeslodash",level:3},{value:"Using Express with @types/express",id:"using-express-with-typesexpress",level:3},{value:"Declaring types for external libraries",id:"declaring-types-for-external-libraries",level:2},{value:"Why Do We Need to Declare Types?",id:"why-do-we-need-to-declare-types",level:3},{value:"Ways to Declare Types for External Libraries",id:"ways-to-declare-types-for-external-libraries",level:3},{value:"Declaring a Module as <code>any</code>",id:"declaring-a-module-as-any",level:3},{value:"Declaring a Module with Specific Functions",id:"declaring-a-module-with-specific-functions",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"ambient-declarations",children:"Ambient Declarations"}),"\n",(0,l.jsx)(n.p,{children:"In TypeScript, ambient declarations are a way to tell the compiler about the existence and shape of code that\u2019s defined outside TypeScript \u2014 like in JavaScript libraries, global variables, or external APIs."}),"\n",(0,l.jsxs)(n.p,{children:["They live inside ",(0,l.jsx)(n.code,{children:".d.ts"})," files (declaration files), and do not generate JavaScript output.\r\nThey\u2019re purely for type checking and editor IntelliSense."]}),"\n",(0,l.jsx)(n.p,{children:"Think of them as \u201ctype definitions without implementation\u201d."}),"\n",(0,l.jsxs)(n.h3,{id:"why-do-we-need-dts-files",children:["Why Do We Need ",(0,l.jsx)(n.code,{children:".d.ts"})," Files?"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"TypeScript needs type information, but plain JavaScript libraries don\u2019t provide it."}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:".d.ts"})," files bridge the gap: they describe the types of values, functions, and classes that come from elsewhere."]}),"\n",(0,l.jsxs)(n.li,{children:["Popular JS libraries (React, Express, Lodash, etc.) ship with ",(0,l.jsx)(n.code,{children:".d.ts"})," files, or you can install them via DefinitelyTyped (",(0,l.jsx)(n.code,{children:"npm install @types/react"}),")."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"syntax-of-ambient-declarations",children:"Syntax of Ambient Declarations"}),"\n",(0,l.jsx)(n.p,{children:"They often use the declare keyword. Examples:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"declare var"})," \u2192 for global variables"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"declare function"})," \u2192 for global functions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"declare class"})," \u2192 for global classes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"declare module"})," \u2192 for modules"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"declare namespace"})," \u2192 for grouping related declarations"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"declaring-a-global-variable",children:"Declaring a Global Variable"}),"\n",(0,l.jsx)(n.p,{children:"Suppose a JavaScript file adds a global variable:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'// script.js\r\nwindow.myGlobal = "Hello world!";\n'})}),"\n",(0,l.jsx)(n.p,{children:"In TypeScript, we can declare it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"// globals.d.ts\r\ndeclare var myGlobal: string;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"declaring-a-module",children:"Declaring a Module"}),"\n",(0,l.jsx)(n.p,{children:"If you\u2019re using a JavaScript library that doesn\u2019t have types, you can declare a module:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'// lodash.d.ts\r\ndeclare module "lodash" {\r\n  export function chunk<T>(array: T[], size?: number): T[][];\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Now in your TypeScript code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import { chunk } from "lodash";\r\n\r\nlet result = chunk([1, 2, 3, 4], 2); // [[1, 2], [3, 4]]\n'})}),"\n",(0,l.jsx)(n.p,{children:"Even though Lodash is written in JS, you get type safety + autocomplete."}),"\n",(0,l.jsx)(n.h3,{id:"declaring-a-namespace",children:"Declaring a Namespace"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"// myLib.d.ts\r\ndeclare namespace MyLib {\r\n  function greet(name: string): void;\r\n  let version: string;\r\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Usage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'MyLib.greet("Alice");\r\nconsole.log(MyLib.version);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"merging-with-existing-types",children:"Merging with Existing Types"}),"\n",(0,l.jsx)(n.p,{children:"You can augment existing modules:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'// express-custom.d.ts\r\nimport "express";\r\n\r\ndeclare module "express" {\r\n  interface Request {\r\n    user?: { id: number; name: string };\r\n  }\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Now in Express code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'app.use((req, res, next) => {\r\n  req.user = { id: 1, name: "Alice" }; // \u2705 recognized\r\n  next();\r\n});\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"key-rules-of-dts-files",children:["Key Rules of ",(0,l.jsx)(n.code,{children:".d.ts"})," Files"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"They don\u2019t generate JS output \u2014 only types."}),"\n",(0,l.jsxs)(n.li,{children:["They must use ",(0,l.jsx)(n.code,{children:"declare"})," for globals, modules, etc."]}),"\n",(0,l.jsx)(n.li,{children:"You can place them:"}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["in your project (",(0,l.jsx)(n.code,{children:"src/types/"})," or ",(0,l.jsx)(n.code,{children:"@types/"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["or install from DefinitelyTyped (",(0,l.jsx)(n.code,{children:"@types/*"})," packages)."]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["TypeScript automatically picks up ",(0,l.jsx)(n.code,{children:".d.ts"})," files if they\u2019re in your project or ",(0,l.jsx)(n.code,{children:"node_modules/@types"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"definitelytyped",children:"DefinitelyTyped"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["DefinitelyTyped is a huge open-source repository that contains type declaration files (",(0,l.jsx)(n.code,{children:".d.ts"}),") for popular JavaScript libraries."]}),"\n",(0,l.jsx)(n.li,{children:"Since many JS libraries don\u2019t ship with TypeScript support, the community maintains these declaration files separately."}),"\n",(0,l.jsxs)(n.li,{children:["You can install them via npm as ",(0,l.jsx)(n.code,{children:"@types/<library-name>"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Example:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"React itself is plain JS (historically)."}),"\n",(0,l.jsxs)(n.li,{children:["To use React in TypeScript, you install:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install react react-dom\r\nnpm install --save-dev @types/react @types/react-dom\n"})}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Now your TS project knows the types of React components, hooks, etc."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Install a JS library (",(0,l.jsx)(n.code,{children:"npm install lodash"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["Install its type declarations (",(0,l.jsx)(n.code,{children:"npm install --save-dev @types/lodash"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["TypeScript automatically finds the ",(0,l.jsx)(n.code,{children:".d.ts"})," file in ",(0,l.jsx)(n.code,{children:"node_modules/@types"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"You get type safety + IntelliSense without writing your own declarations."}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"using-lodash-with-typeslodash",children:["Using Lodash with ",(0,l.jsx)(n.code,{children:"@types/lodash"})]}),"\n",(0,l.jsxs)(n.p,{children:["Without types, TypeScript doesn\u2019t know what ",(0,l.jsx)(n.code,{children:"_.chunk"})," does:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import _ from "lodash";\r\n\r\nlet result = _.chunk([1, 2, 3, 4], 2);\r\nconsole.log(result);\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.code,{children:"@types/lodash"})," is installed:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["TypeScript knows ",(0,l.jsx)(n.code,{children:"chunk<T>(array: T[], size?: number): T[][]"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"result"})," is correctly inferred as ",(0,l.jsx)(n.code,{children:"number[][]"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"If you misuse it:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"_.chunk(123, 2); // \u274c Error: Argument of type 'number' is not assignable to parameter of type 'any[]'\n"})}),"\n",(0,l.jsx)(n.p,{children:"TypeScript catches the error at compile time."}),"\n",(0,l.jsx)(n.h3,{id:"using-express-with-typesexpress",children:"Using Express with @types/express"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install express\r\nnpm install --save-dev @types/express\n"})}),"\n",(0,l.jsx)(n.p,{children:"Now in TypeScript:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import express, { Request, Response } from "express";\r\n\r\nconst app = express();\r\n\r\napp.get("/", (req: Request, res: Response) => {\r\n  res.send("Hello World");\r\n});\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Request"})," and ",(0,l.jsx)(n.code,{children:"Response"})," come from ",(0,l.jsx)(n.code,{children:"@types/express"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"You get full IntelliSense for Express APIs."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"declaring-types-for-external-libraries",children:"Declaring types for external libraries"}),"\n",(0,l.jsx)(n.p,{children:"This is needed when you use a JavaScript library with no built-in types and no @types/... package.\r\nIn such cases, you must declare the types yourself so TypeScript knows how to handle the library."}),"\n",(0,l.jsx)(n.h3,{id:"why-do-we-need-to-declare-types",children:"Why Do We Need to Declare Types?"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"TypeScript only understands types it has definitions for."}),"\n",(0,l.jsxs)(n.li,{children:["Many modern libraries include their own ",(0,l.jsx)(n.code,{children:".d.ts"})," files \u2705"]}),"\n",(0,l.jsxs)(n.li,{children:["Others rely on DefinitelyTyped (",(0,l.jsx)(n.code,{children:"@types/..."}),") \u2705"]}),"\n",(0,l.jsxs)(n.li,{children:["But sometimes: \u274c no built-in types, \u274c no ",(0,l.jsx)(n.code,{children:"@types"})," available \u2192 you must declare types manually."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ways-to-declare-types-for-external-libraries",children:"Ways to Declare Types for External Libraries"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Quick and dirty: declare the module as ",(0,l.jsx)(n.code,{children:"any"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Create a ",(0,l.jsx)(n.code,{children:".d.ts"})," file with basic type definitions."]}),"\n",(0,l.jsxs)(n.li,{children:["Write a full declaration file (",(0,l.jsx)(n.code,{children:"index.d.ts"}),") with detailed typings."]}),"\n",(0,l.jsx)(n.li,{children:"Publish to DefinitelyTyped if it\u2019s useful for the community."}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"declaring-a-module-as-any",children:["Declaring a Module as ",(0,l.jsx)(n.code,{children:"any"})]}),"\n",(0,l.jsxs)(n.p,{children:["Suppose you import a JS library called ",(0,l.jsx)(n.code,{children:"cool-lib"}),", but TS has no idea about it:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import cool from \"cool-lib\"; // \u274c Error: Cannot find module 'cool-lib'\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Fix with a quick ",(0,l.jsx)(n.code,{children:".d.ts"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'// cool-lib.d.ts\r\ndeclare module "cool-lib";\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Now TypeScript stops complaining, but everything is ",(0,l.jsx)(n.code,{children:"any"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"cool.doSomething(); // no IntelliSense, no type safety\n"})}),"\n",(0,l.jsx)(n.p,{children:"Useful as a temporary fix, but not recommended long term."}),"\n",(0,l.jsx)(n.h3,{id:"declaring-a-module-with-specific-functions",children:"Declaring a Module with Specific Functions"}),"\n",(0,l.jsxs)(n.p,{children:["Suppose ",(0,l.jsx)(n.code,{children:"cool-lib"})," exports a function ",(0,l.jsx)(n.code,{children:"greet(name: string): string"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'// cool-lib.d.ts\r\ndeclare module "cool-lib" {\r\n  export function greet(name: string): string;\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Now in your TS code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import { greet } from "cool-lib";\r\n\r\nconsole.log(greet("Alice")); // \u2705 typed as string\n'})}),"\n",(0,l.jsxs)(n.p,{children:["TypeScript knows ",(0,l.jsx)(n.code,{children:"greet"})," takes a string and returns a string."]}),"\n",(0,l.jsx)(n.p,{children:"If you misuse it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"greet(123); // \u274c Error: Argument of type 'number' is not assignable to parameter of type 'string'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);