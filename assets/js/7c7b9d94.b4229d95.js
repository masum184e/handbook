"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[9002],{5252(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"nextjs/8.5. Performance Optimization","title":"Performance Optimization","description":"Lazy Loading","source":"@site/docs/nextjs/8.5. Performance Optimization.md","sourceDirName":"nextjs","slug":"/nextjs/8.5. Performance Optimization","permalink":"/handbook/docs/nextjs/8.5. Performance Optimization","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Performance Optimization","sidebar_position":10},"sidebar":"nextjsSidebar","previous":{"title":"Font Optimization","permalink":"/handbook/docs/nextjs/Font Optimization"},"next":{"title":"SEO & Meta Data","permalink":"/handbook/docs/nextjs/SEO & Meta Data"}}');var i=r(4848),t=r(8453);const a={title:"Performance Optimization",sidebar_position:10},l=void 0,d={},o=[{value:"Lazy Loading",id:"lazy-loading",level:2},{value:"How Next.js Supports Lazy Loading",id:"how-nextjs-supports-lazy-loading",level:3},{value:"Prefetching",id:"prefetching",level:2},{value:"How Next.js Handles Prefetching",id:"how-nextjs-handles-prefetching",level:3},{value:"Preloading",id:"preloading",level:2},{value:"Preloading Data with <code>getStaticProps</code> + Link Prefetch",id:"preloading-data-with-getstaticprops--link-prefetch",level:3},{value:"Preloading Data with SWR / React Query",id:"preloading-data-with-swr--react-query",level:3},{value:"Preloading Components with <code>next/dynamic</code>",id:"preloading-components-with-nextdynamic",level:3},{value:"Prefetching vs Preloading Data",id:"prefetching-vs-preloading-data",level:3},{value:"Performance Challenges in SSR",id:"performance-challenges-in-ssr",level:2},{value:"Performance Challenges in CSR",id:"performance-challenges-in-csr",level:2},{value:"When to Use SSR vs CSR (Performance Trade-offs)",id:"when-to-use-ssr-vs-csr-performance-trade-offs",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"lazy-loading",children:"Lazy Loading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Lazy loading (or dynamic importing) is a way to defer loading of non-critical code until it\u2019s actually needed."}),"\n",(0,i.jsxs)(n.li,{children:["Useful for:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Heavy components (charts, maps, editors, video players)"}),"\n",(0,i.jsx)(n.li,{children:"Rarely used UI parts (modals, sidebars)"}),"\n",(0,i.jsx)(n.li,{children:"Third-party libraries"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-nextjs-supports-lazy-loading",children:"How Next.js Supports Lazy Loading"}),"\n",(0,i.jsxs)(n.p,{children:["Next.js provides a built-in function ",(0,i.jsx)(n.code,{children:"next/dynamic"})," to load components lazily."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import dynamic from "next/dynamic";\r\n\r\nconst Chart = dynamic(() => import("../components/Chart"));\n'})}),"\n",(0,i.jsx)(n.p,{children:"By default:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Chart"})," will not be included in the initial JavaScript bundle."]}),"\n",(0,i.jsxs)(n.li,{children:["It will be loaded only when rendered.\r\n",(0,i.jsx)(n.code,{children:"pages/dashboard.ts"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import dynamic from "next/dynamic";\r\n\r\n// Lazy load the Chart component\r\nconst Chart = dynamic(() => import("../components/Chart"), {\r\n  loading: () => <p>Loading chart...</p>, // Optional fallback\r\n  ssr: false, // Disable server-side rendering for client-only libs\r\n});\r\n\r\nexport default function Dashboard() {\r\n  return (\r\n    <div>\r\n      <h1>Welcome to Dashboard</h1>\r\n      <p>User Info: John Doe</p>\r\n\r\n      {/* Chart loads only when this line is rendered */}\r\n      <Chart />\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"The initial load only includes Dashboard\u2019s basic UI (small bundle)."}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"Chart"})," code is split into a separate bundle."]}),"\n",(0,i.jsxs)(n.li,{children:["When the Dashboard renders ",(0,i.jsx)(n.code,{children:"<Chart />"}),", Next.js dynamically fetches that bundle."]}),"\n",(0,i.jsxs)(n.li,{children:["The user sees ",(0,i.jsx)(n.code,{children:'"Loading chart..."'})," until the Chart is ready."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prefetching",children:"Prefetching"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prefetching means downloading resources (like code or data) for future navigation before the user explicitly requests them."}),"\n",(0,i.jsx)(n.li,{children:"This makes navigations faster because Next.js already has the JavaScript bundle and/or data ready."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-nextjs-handles-prefetching",children:"How Next.js Handles Prefetching"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["By default, when you use the built-in ",(0,i.jsx)(n.code,{children:"<Link>"})," component, Next.js prefetches the JS bundle for the linked page when it appears in the viewport."]}),"\n",(0,i.jsxs)(n.li,{children:["This is done using ",(0,i.jsx)(n.code,{children:'<link rel="prefetch">'}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Result: The next page loads almost instantly when the user clicks."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Prefetching Page Bundles"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import Link from "next/link";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div>\r\n      <h1>Home Page</h1>\r\n\r\n      {/* Next.js automatically prefetches About.js bundle */}\r\n      <Link href="/about">Go to About</Link>\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"<Link>"})," is visible in the viewport, Next.js prefetches ",(0,i.jsx)(n.code,{children:"about.js"})," in the background."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When the user clicks, navigation is instant\u2014no waiting for network fetch."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Prefetch Control"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prefetch is enabled by default in production (not in dev mode)."}),"\n",(0,i.jsx)(n.li,{children:"You can disable it if you don\u2019t want background prefetching:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'<Link href="/about" prefetch={false}>\r\n  Go to About\r\n</Link>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"preloading",children:"Preloading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"While prefetching handles the JS bundle, preloading data means fetching server-side or client-side data ahead of time so it\u2019s ready when needed."}),"\n",(0,i.jsxs)(n.li,{children:["Useful for:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pages that need API data"}),"\n",(0,i.jsx)(n.li,{children:"Avoiding loading spinners on navigation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Next.js provides multiple strategies to preload both data and components, depending on where your data lives and how you fetch it."}),"\n",(0,i.jsxs)(n.h3,{id:"preloading-data-with-getstaticprops--link-prefetch",children:["Preloading Data with ",(0,i.jsx)(n.code,{children:"getStaticProps"})," + Link Prefetch"]}),"\n",(0,i.jsxs)(n.p,{children:["When a page uses Static Generation (",(0,i.jsx)(n.code,{children:"getStaticProps"}),"), Next.js can prefetch both the JavaScript bundle and the JSON data in advance when using ",(0,i.jsx)(n.code,{children:"<Link>"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: Blog Posts"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"pages/blog/[id].js"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"export async function getStaticProps({ params }) {\r\n  const res = await fetch(\r\n    `https://jsonplaceholder.typicode.com/posts/${params.id}`\r\n  );\r\n  const post = await res.json();\r\n\r\n  return { props: { post } };\r\n}\r\n\r\nexport async function getStaticPaths() {\r\n  const res = await fetch(\r\n    `https://jsonplaceholder.typicode.com/posts?_limit=5`\r\n  );\r\n  const posts = await res.json();\r\n\r\n  return {\r\n    paths: posts.map((p) => ({ params: { id: p.id.toString() } })),\r\n    fallback: false,\r\n  };\r\n}\r\n\r\nexport default function BlogPost({ post }) {\r\n  return (\r\n    <div>\r\n      <h1>{post.title}</h1>\r\n      <p>{post.body}</p>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"pages/index.js"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import Link from "next/link";\r\n\r\nexport default function Home({ posts }) {\r\n  return (\r\n    <div>\r\n      <h1>Blog</h1>\r\n      <ul>\r\n        {posts.map((post) => (\r\n          <li key={post.id}>\r\n            {/* Prefetches both JS + JSON data */}\r\n            <Link href={`/blog/${post.id}`}>{post.title}</Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport async function getStaticProps() {\r\n  const res = await fetch(\r\n    "https://jsonplaceholder.typicode.com/posts?_limit=5"\r\n  );\r\n  const posts = await res.json();\r\n  return { props: { posts } };\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What gets preloaded?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"blog/[id].ts"})," JavaScript bundle"]}),"\n",(0,i.jsx)(n.li,{children:"The JSON data file generated by getStaticProps"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"preloading-data-with-swr--react-query",children:"Preloading Data with SWR / React Query"}),"\n",(0,i.jsx)(n.p,{children:"For client-side fetching, you can preload queries so that data is available immediately when the component renders."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import useSWR, { preload } from "swr";\r\n\r\nconst fetcher = (url) => fetch(url).then((r) => r.json());\r\n\r\nexport default function Dashboard() {\r\n  // Preload the data\r\n  preload("/api/user", fetcher);\r\n\r\n  // When rendered, it instantly has cached data\r\n  const { data, error } = useSWR("/api/user", fetcher);\r\n\r\n  if (error) return <p>Error loading</p>;\r\n  if (!data) return <p>Loading...</p>;\r\n\r\n  return <div>Welcome, {data.name}!</div>;\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"preload()"})," fetches the data in advance."]}),"\n",(0,i.jsxs)(n.li,{children:["When ",(0,i.jsx)(n.code,{children:"<Dashboard />"})," renders, SWR already has the data \u2192 no spinner."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"preloading-components-with-nextdynamic",children:["Preloading Components with ",(0,i.jsx)(n.code,{children:"next/dynamic"})]}),"\n",(0,i.jsx)(n.p,{children:"You can also preload heavy components before user action:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import dynamic from "next/dynamic";\r\n\r\nconst Chart = dynamic(() => import("../components/Chart"));\r\n\r\nChart.preload(); // Preloads the component\r\n\r\nexport default function Dashboard() {\r\n  return (\r\n    <div>\r\n      <h1>Dashboard</h1>\r\n      {/* Chart loads instantly since it was preloaded */}\r\n      <Chart />\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Useful for charts, editors, or other expensive components."}),"\n",(0,i.jsx)(n.h3,{id:"prefetching-vs-preloading-data",children:"Prefetching vs Preloading Data"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Prefetching"}),(0,i.jsx)(n.th,{children:"Preloading Data"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"What it loads"})}),(0,i.jsx)(n.td,{children:"Page JS bundles (+ static JSON if available)"}),(0,i.jsx)(n.td,{children:"API data, components, or resources"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"When it happens"})}),(0,i.jsx)(n.td,{children:"When link/component enters viewport"}),(0,i.jsx)(n.td,{children:"When you explicitly trigger preload"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Default in Next.js"})}),(0,i.jsxs)(n.td,{children:["Enabled with ",(0,i.jsx)(n.code,{children:"<Link>"})," in production"]}),(0,i.jsx)(n.td,{children:"Manual (SWR, React Query, preload())"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Goal"})}),(0,i.jsx)(n.td,{children:"Faster navigation to new page"}),(0,i.jsx)(n.td,{children:"Faster rendering with ready data/components"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Prefetching: Automatic with ",(0,i.jsx)(n.code,{children:"<Link>"})," \u2192 speeds up page navigation."]}),"\n",(0,i.jsxs)(n.li,{children:["Preloading Data: Manual (via ",(0,i.jsx)(n.code,{children:"getStaticProps"}),", SWR, or ",(0,i.jsx)(n.code,{children:"preload"}),") \u2192 avoids loading spinners."]}),"\n",(0,i.jsxs)(n.li,{children:["Combine both for blazing-fast navigation:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prefetch the page bundle + static data"}),"\n",(0,i.jsx)(n.li,{children:"Preload client-side queries or components"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-challenges-in-ssr",children:"Performance Challenges in SSR"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Every request triggers: Server fetch \u2192 render React \u2192 send HTML + JSON \u2192 hydrate on client."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bottlenecks:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Expensive DB/API queries"}),"\n",(0,i.jsx)(n.li,{children:"Unnecessary recomputation"}),"\n",(0,i.jsx)(n.li,{children:"Blocking the event loop"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Slow SSR = high Time to First Byte (TTFB)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Optimizations for SSR"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Cache responses (HTTP caching, CDN, or Next.js middleware)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use Incremental Static Regeneration (ISR) if real-time freshness isn\u2019t needed."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Stream HTML (React 18 SSR streaming in App Router)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Reduce server payload size (strip unused data)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Parallelize data fetching with ",(0,i.jsx)(n.code,{children:"Promise.all"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'export async function getServerSideProps() {\r\n  // Parallel fetching\r\n  const [headlines, weather] = await Promise.all([\r\n    fetch("https://newsapi.org/v2/top-headlines?country=us").then((r) =>\r\n      r.json()\r\n    ),\r\n    fetch("https://api.weatherapi.com/v1/current.json?q=New York").then((r) =>\r\n      r.json()\r\n    ),\r\n  ]);\r\n\r\n  return {\r\n    props: { headlines, weather },\r\n  };\r\n}\r\n\r\nexport default function News({ headlines, weather }) {\r\n  return <DisplayWeatherData />;\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Promise.all"})," \u2192 avoids sequential fetches."]}),"\n",(0,i.jsx)(n.li,{children:"Page served fresh per request."}),"\n",(0,i.jsx)(n.li,{children:"Can be paired with server/CDN caching to reduce load."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-challenges-in-csr",children:"Performance Challenges in CSR"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Slower first paint (empty HTML shell at start)."}),"\n",(0,i.jsx)(n.li,{children:"Extra network requests after page load."}),"\n",(0,i.jsx)(n.li,{children:"Bad for SEO if search engines can\u2019t wait for hydration."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Optimizations for CSR"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Lazy-load non-critical components (",(0,i.jsx)(n.code,{children:"next/dynamic"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Preload client data (SWR ",(0,i.jsx)(n.code,{children:"preload"}),", React Query ",(0,i.jsx)(n.code,{children:"prefetchQuery"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"Use Suspense (React 18 streaming + Suspense boundaries)."}),"\n",(0,i.jsx)(n.li,{children:"Cache data locally (SWR/React Query) to avoid refetching."}),"\n",(0,i.jsx)(n.li,{children:"Split bundles so only critical JS loads first."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import useSWR from "swr";\r\n\r\nconst fetcher = (url) => fetch(url).then((res) => res.json());\r\n\r\nexport default function Dashboard() {\r\n  // SWR caches and reuses data\r\n  const { data, error } = useSWR("/api/user", fetcher, {\r\n    revalidateOnFocus: false,\r\n    dedupingInterval: 10000, // Cache data for 10s\r\n  });\r\n\r\n  if (error) return <p>Error loading dashboard</p>;\r\n  if (!data) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Welcome, {data.name}</h1>\r\n      <p>Account Balance: ${data.balance}</p>\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Uses SWR to cache API data."}),"\n",(0,i.jsxs)(n.li,{children:["Prevents redundant fetches with ",(0,i.jsx)(n.code,{children:"dedupingInterval"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Only user-specific data is fetched on client."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use-ssr-vs-csr-performance-trade-offs",children:"When to Use SSR vs CSR (Performance Trade-offs)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Server-Side Rendering (SSR)"}),(0,i.jsx)(n.th,{children:"Client-Side Rendering (CSR)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"First Load"})}),(0,i.jsx)(n.td,{children:"Faster (HTML pre-rendered)"}),(0,i.jsx)(n.td,{children:"Slower (empty shell first)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"SEO"})}),(0,i.jsx)(n.td,{children:"Great for SEO"}),(0,i.jsx)(n.td,{children:"Not SEO-friendly"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Freshness"})}),(0,i.jsx)(n.td,{children:"Always fresh"}),(0,i.jsx)(n.td,{children:"Depends on client fetch"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Server Load"})}),(0,i.jsx)(n.td,{children:"Higher (compute per request)"}),(0,i.jsx)(n.td,{children:"Lower (server just serves shell)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Best Use Case"})}),(0,i.jsx)(n.td,{children:"Public pages, SEO content"}),(0,i.jsx)(n.td,{children:"User-specific dashboards, apps"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Next.js allows mixing SSR + CSR:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use SSR for initial render (SEO + fast paint)."}),"\n",(0,i.jsx)(n.li,{children:"Use CSR for interactive updates."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'import useSWR from "swr";\r\n\r\nexport async function getServerSideProps() {\r\n  const res = await fetch("https://api.example.com/posts");\r\n  const initialPosts = await res.json();\r\n  return { props: { initialPosts } };\r\n}\r\n\r\nexport default function Posts({ initialPosts }) {\r\n  const { data } = useSWR(\r\n    "/api/posts",\r\n    (url) => fetch(url).then((r) => r.json()),\r\n    {\r\n      fallbackData: initialPosts,\r\n      refreshInterval: 10000, // Keep data fresh\r\n    }\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h1>Latest Posts</h1>\r\n      <ul>\r\n        {data.map((p) => (\r\n          <li key={p.id}>{p.title}</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Page first renders with SSR (fast + SEO)."}),"\n",(0,i.jsx)(n.li,{children:"SWR then hydrates with fresh data in background (CSR)."}),"\n",(0,i.jsx)(n.li,{children:"The user sees fast + always up-to-date content."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);