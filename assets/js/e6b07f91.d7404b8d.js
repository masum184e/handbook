"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[4553],{22868(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"design-patterns/SOLID Principles/OCP","title":"OCP","description":"Software entities (classes, modules, functions) should be open for extension but closed for modification.","source":"@site/docs/design-patterns/2. SOLID Principles/2. OCP.md","sourceDirName":"design-patterns/2. SOLID Principles","slug":"/design-patterns/SOLID Principles/OCP","permalink":"/handbook/docs/design-patterns/SOLID Principles/OCP","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"designPatternsSidebar","previous":{"title":"SRP","permalink":"/handbook/docs/design-patterns/SOLID Principles/SRP"},"next":{"title":"LSP","permalink":"/handbook/docs/design-patterns/SOLID Principles/LSP"}}');var l=i(74848),r=i(28453);const c={},t=void 0,a={},d=[{value:"Why OCP Exists",id:"why-ocp-exists",level:2},{value:"Violating OCP \u2014 Classic Example",id:"violating-ocp--classic-example",level:2},{value:"Applying OCP with Polymorphism",id:"applying-ocp-with-polymorphism",level:2},{value:"What Actually Changed?",id:"what-actually-changed",level:2},{value:"Real-World Example: Notification System",id:"real-world-example-notification-system",level:2},{value:"The Hidden Mechanism Behind OCP",id:"the-hidden-mechanism-behind-ocp",level:2},{value:"Real-World Tradeoffs",id:"real-world-tradeoffs",level:2},{value:"Increased Abstraction",id:"increased-abstraction",level:3},{value:"Hard to Predict Extension Points",id:"hard-to-predict-extension-points",level:3},{value:"Indirection Cost",id:"indirection-cost",level:3},{value:"Sometimes Modification Is Fine",id:"sometimes-modification-is-fine",level:3},{value:"Real-World Case Study: Payment Gateways",id:"real-world-case-study-payment-gateways",level:2},{value:"OCP and Stability",id:"ocp-and-stability",level:2},{value:"When OCP Goes Wrong",id:"when-ocp-goes-wrong",level:2},{value:"Practical Guideline",id:"practical-guideline",level:2},{value:"Deep Insight",id:"deep-insight",level:2},{value:"Final Summary",id:"final-summary",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Software entities (classes, modules, functions) should be open for extension but closed for modification."}),"\n",(0,l.jsx)(n.p,{children:"That sounds abstract. Let\u2019s translate it:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You should be able to add new behavior"}),"\n",(0,l.jsx)(n.li,{children:"Without changing already-tested, stable code"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"In short:"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Add new code instead of editing old code."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"why-ocp-exists",children:"Why OCP Exists"}),"\n",(0,l.jsx)(n.p,{children:"Every time you modify existing code:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You risk breaking working behavior"}),"\n",(0,l.jsx)(n.li,{children:"You increase regression risk"}),"\n",(0,l.jsx)(n.li,{children:"You require retesting"}),"\n",(0,l.jsx)(n.li,{children:"You increase merge conflicts in teams"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"OCP minimizes change ripple."}),"\n",(0,l.jsx)(n.h2,{id:"violating-ocp--classic-example",children:"Violating OCP \u2014 Classic Example"}),"\n",(0,l.jsx)(n.p,{children:"Imagine an e-commerce discount system:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'class DiscountCalculator {\r\n\r\n    public double calculate(String customerType, double amount) {\r\n        if (customerType.equals("REGULAR")) {\r\n            return amount * 0.05;\r\n        } \r\n        else if (customerType.equals("VIP")) {\r\n            return amount * 0.10;\r\n        } \r\n        else if (customerType.equals("PREMIUM")) {\r\n            return amount * 0.20;\r\n        }\r\n        return 0;\r\n    }\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Problem:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Every new customer type requires editing this class."}),"\n",(0,l.jsx)(n.li,{children:"The class grows endlessly."}),"\n",(0,l.jsx)(n.li,{children:"Risk of breaking logic increases."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This is closed for extension, open for modification \u2014 the opposite of OCP."}),"\n",(0,l.jsx)(n.h2,{id:"applying-ocp-with-polymorphism",children:"Applying OCP with Polymorphism"}),"\n",(0,l.jsx)(n.p,{children:"Step 1: Define abstraction"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"interface DiscountPolicy {\r\n    double calculate(double amount);\r\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Step 2: Implement behaviors"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"class RegularDiscount implements DiscountPolicy {\r\n    public double calculate(double amount) {\r\n        return amount * 0.05;\r\n    }\r\n}\r\n\r\nclass VipDiscount implements DiscountPolicy {\r\n    public double calculate(double amount) {\r\n        return amount * 0.10;\r\n    }\r\n}\r\n\r\nclass PremiumDiscount implements DiscountPolicy {\r\n    public double calculate(double amount) {\r\n        return amount * 0.20;\r\n    }\r\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Step 3: Use abstraction"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"class DiscountCalculator {\r\n\r\n    public double calculate(DiscountPolicy policy, double amount) {\r\n        return policy.calculate(amount);\r\n    }\r\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Now:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Add ",(0,l.jsx)(n.code,{children:"StudentDiscount"})]}),"\n",(0,l.jsx)(n.li,{children:"No change to existing classes"}),"\n",(0,l.jsx)(n.li,{children:"Just create a new implementation"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The system is:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Open for extension (add new policies)"}),"\n",(0,l.jsx)(n.li,{children:"Closed for modification (existing code untouched)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"what-actually-changed",children:"What Actually Changed?"}),"\n",(0,l.jsx)(n.p,{children:"Instead of: Behavior controlled by conditionals"}),"\n",(0,l.jsx)(n.p,{children:"We now have: Behavior controlled by polymorphism"}),"\n",(0,l.jsx)(n.p,{children:"OCP often means:"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Replace ",(0,l.jsx)(n.code,{children:"if/else"})," with polymorphism."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"real-world-example-notification-system",children:"Real-World Example: Notification System"}),"\n",(0,l.jsx)(n.p,{children:"Bad Design:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'class NotificationService {\r\n    void send(String type) {\r\n        if (type.equals("EMAIL")) { ... }\r\n        else if (type.equals("SMS")) { ... }\r\n    }\r\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Every new channel \u2192 modify this class."}),"\n",(0,l.jsx)(n.p,{children:"OCP-Compliant:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"interface NotificationSender {\r\n    void send(String message);\r\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Implementations:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"EmailSender"}),"\n",(0,l.jsx)(n.li,{children:"SmsSender"}),"\n",(0,l.jsx)(n.li,{children:"PushSender"}),"\n",(0,l.jsx)(n.li,{children:"WhatsAppSender (later)"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"NotificationService"})," remains unchanged."]}),"\n",(0,l.jsx)(n.h2,{id:"the-hidden-mechanism-behind-ocp",children:"The Hidden Mechanism Behind OCP"}),"\n",(0,l.jsx)(n.p,{children:"OCP relies heavily on:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Abstraction"}),"\n",(0,l.jsx)(n.li,{children:"Polymorphism"}),"\n",(0,l.jsx)(n.li,{children:"Dependency Inversion Principle (DIP)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"High-level modules depend on abstractions, not concrete classes."}),"\n",(0,l.jsx)(n.p,{children:"That\u2019s how you avoid modifying them."}),"\n",(0,l.jsx)(n.h2,{id:"real-world-tradeoffs",children:"Real-World Tradeoffs"}),"\n",(0,l.jsx)(n.h3,{id:"increased-abstraction",children:"Increased Abstraction"}),"\n",(0,l.jsx)(n.p,{children:"More:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Interfaces"}),"\n",(0,l.jsx)(n.li,{children:"Classes"}),"\n",(0,l.jsx)(n.li,{children:"Indirection layers"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Small system: OCP may feel like overengineering."}),"\n",(0,l.jsx)(n.p,{children:"Large system: OCP prevents chaos."}),"\n",(0,l.jsx)(n.p,{children:"Tradeoff: Simplicity now vs extensibility later."}),"\n",(0,l.jsx)(n.h3,{id:"hard-to-predict-extension-points",children:"Hard to Predict Extension Points"}),"\n",(0,l.jsx)(n.p,{children:"You can\u2019t design for every possible extension."}),"\n",(0,l.jsx)(n.p,{children:"If you abstract too early:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You create useless abstractions."}),"\n",(0,l.jsx)(n.li,{children:"You complicate code unnecessarily."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This is called: Speculative generality (a design smell)."}),"\n",(0,l.jsx)(n.h3,{id:"indirection-cost",children:"Indirection Cost"}),"\n",(0,l.jsx)(n.p,{children:"More abstraction means:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Harder debugging"}),"\n",(0,l.jsx)(n.li,{children:"More files to navigate"}),"\n",(0,l.jsx)(n.li,{children:"Slight runtime overhead (usually negligible)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sometimes-modification-is-fine",children:"Sometimes Modification Is Fine"}),"\n",(0,l.jsx)(n.p,{children:"If:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The system is small"}),"\n",(0,l.jsx)(n.li,{children:"The code changes rarely"}),"\n",(0,l.jsx)(n.li,{children:"There are only 2\u20133 cases"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Then simple conditionals might be better."}),"\n",(0,l.jsx)(n.p,{children:"OCP is most valuable when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Behavior varies often"}),"\n",(0,l.jsx)(n.li,{children:"System evolves frequently"}),"\n",(0,l.jsx)(n.li,{children:"Multiple developers work on it"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"real-world-case-study-payment-gateways",children:"Real-World Case Study: Payment Gateways"}),"\n",(0,l.jsx)(n.p,{children:"Imagine you integrate:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Stripe"}),"\n",(0,l.jsx)(n.li,{children:"PayPal"}),"\n",(0,l.jsx)(n.li,{children:"Square"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Bad design: Every new gateway \u2192 modify core payment class."}),"\n",(0,l.jsxs)(n.p,{children:["Good OCP design: Each gateway implements ",(0,l.jsx)(n.code,{children:"PaymentGateway"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"When a new provider appears:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Add new class."}),"\n",(0,l.jsx)(n.li,{children:"No touching existing payment processing logic."}),"\n",(0,l.jsx)(n.li,{children:"No regression risk."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"In production systems, this matters massively."}),"\n",(0,l.jsx)(n.h2,{id:"ocp-and-stability",children:"OCP and Stability"}),"\n",(0,l.jsx)(n.p,{children:"Robert C. Martin (Uncle Bob) explains:"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"The more stable a module is, the more it should obey OCP."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Core business rules:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Should be closed."}),"\n",(0,l.jsx)(n.li,{children:"Extended via plugins."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Unstable modules (like UI):"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Can be modified more freely."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"when-ocp-goes-wrong",children:"When OCP Goes Wrong"}),"\n",(0,l.jsx)(n.p,{children:"Overengineering example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"interface FileReaderStrategy { ... }\r\nclass XmlFileReader implements FileReaderStrategy { ... }\r\nclass JsonFileReader implements FileReaderStrategy { ... }\n"})}),"\n",(0,l.jsx)(n.p,{children:"But the system only ever reads JSON."}),"\n",(0,l.jsx)(n.p,{children:"You built extensibility you\u2019ll never use."}),"\n",(0,l.jsx)(n.p,{children:"That\u2019s wasted complexity."}),"\n",(0,l.jsx)(n.h2,{id:"practical-guideline",children:"Practical Guideline"}),"\n",(0,l.jsx)(n.p,{children:"Use OCP when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You expect new behavior types"}),"\n",(0,l.jsx)(n.li,{children:"The system is long-lived"}),"\n",(0,l.jsx)(n.li,{children:"You work in a team"}),"\n",(0,l.jsx)(n.li,{children:"Regression risk is costly"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Avoid heavy abstraction when:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"System is small"}),"\n",(0,l.jsx)(n.li,{children:"Requirements are stable"}),"\n",(0,l.jsx)(n.li,{children:"Performance-critical inner loops"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deep-insight",children:"Deep Insight"}),"\n",(0,l.jsx)(n.p,{children:"OCP is about minimizing risk, not maximizing abstraction."}),"\n",(0,l.jsx)(n.p,{children:"It shifts the question from:"}),"\n",(0,l.jsx)(n.p,{children:"\u201cHow do I implement this?\u201d"}),"\n",(0,l.jsx)(n.p,{children:"to"}),"\n",(0,l.jsx)(n.p,{children:"\u201cHow will this change in the future?\u201d"}),"\n",(0,l.jsx)(n.p,{children:"Good engineers design for change.\r\nGreat engineers design only for likely change."}),"\n",(0,l.jsx)(n.h2,{id:"final-summary",children:"Final Summary"}),"\n",(0,l.jsx)(n.p,{children:"Open/Closed Principle means:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Extend via new classes."}),"\n",(0,l.jsx)(n.li,{children:"Avoid modifying stable, tested code."}),"\n",(0,l.jsx)(n.li,{children:"Use abstraction and polymorphism."}),"\n",(0,l.jsx)(n.li,{children:"Balance flexibility with simplicity."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"It reduces:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Regression bugs"}),"\n",(0,l.jsx)(n.li,{children:"Merge conflicts"}),"\n",(0,l.jsx)(n.li,{children:"Fear of refactoring"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"But it increases:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Indirection"}),"\n",(0,l.jsx)(n.li,{children:"Architectural complexity"}),"\n",(0,l.jsx)(n.li,{children:"Number of moving parts"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},28453(e,n,i){i.d(n,{R:()=>c,x:()=>t});var s=i(96540);const l={},r=s.createContext(l);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);