"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[71071],{3824(n,e,i){i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"mysql/Large Datasets/Partitioning","title":"Partitioning","description":"When working with very large datasets, queries can become slow and storage can be inefficient.","source":"@site/docs/mysql/23. Large Datasets/1. Partitioning.md","sourceDirName":"mysql/23. Large Datasets","slug":"/mysql/Large Datasets/Partitioning","permalink":"/handbook/docs/mysql/Large Datasets/Partitioning","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"mysqlSidebar","previous":{"title":"Replication","permalink":"/handbook/docs/mysql/Replication"},"next":{"title":"Query Optimization","permalink":"/handbook/docs/mysql/Large Datasets/Query Optimization"}}');var s=i(74848),t=i(28453);const a={},l=void 0,o={},c=[{value:"Types of Partitioning",id:"types-of-partitioning",level:3},{value:"RANGE Partitioning",id:"range-partitioning",level:4},{value:"LIST Partitioning",id:"list-partitioning",level:4},{value:"HASH Partitioning",id:"hash-partitioning",level:4},{value:"KEY Partitioning",id:"key-partitioning",level:4},{value:"Practical Example of Partitioning",id:"practical-example-of-partitioning",level:3}];function d(n){const e={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"When working with very large datasets, queries can become slow and storage can be inefficient."}),"\n",(0,s.jsx)(e.p,{children:"Partitioning is a MySQL technique that splits a large table into smaller, more manageable pieces (called partitions) but still treats them as a single logical table."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Partitioning = dividing a table\u2019s rows into separate physical storage chunks."}),"\n",(0,s.jsx)(e.li,{children:"Queries can target only the relevant partition instead of scanning the entire table."}),"\n",(0,s.jsx)(e.li,{children:"MySQL decides automatically which partition to search based on the query condition."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"This improves query performance, manageability, and maintenance."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Benefits of Partitioning"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Faster queries (partition pruning \u2192 scans only relevant partitions)."}),"\n",(0,s.jsx)(e.li,{children:"Better performance with huge tables (billions of rows)."}),"\n",(0,s.jsx)(e.li,{children:"Easier maintenance (you can archive or drop a partition without touching the rest)."}),"\n",(0,s.jsx)(e.li,{children:"Efficient storage (old data can be separated)."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Limitations of Partitioning"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Partition key must be part of PRIMARY KEY or UNIQUE KEY."}),"\n",(0,s.jsx)(e.li,{children:"No foreign keys allowed in partitioned tables."}),"\n",(0,s.jsx)(e.li,{children:"Too many partitions can slow down queries."}),"\n",(0,s.jsx)(e.li,{children:"Not all storage engines support it (must be InnoDB in modern MySQL)."}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"types-of-partitioning",children:"Types of Partitioning"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"RANGE \u2192 ranges of values (time-based data)."}),"\n",(0,s.jsx)(e.li,{children:"LIST \u2192 specific values (categories)."}),"\n",(0,s.jsx)(e.li,{children:"HASH \u2192 evenly distribute with a hash function."}),"\n",(0,s.jsx)(e.li,{children:"KEY \u2192 system-managed hash (usually on primary keys)."}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"range-partitioning",children:"RANGE Partitioning"}),"\n",(0,s.jsx)(e.p,{children:"Rows are placed into partitions based on ranges of values."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Good for time-based data (e.g., monthly logs)."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE sales (\r\n  id INT,\r\n  sale_date DATE,\r\n  amount DECIMAL(10,2)\r\n)\r\nPARTITION BY RANGE (YEAR(sale_date)) (\r\n  PARTITION p2019 VALUES LESS THAN (2020),\r\n  PARTITION p2020 VALUES LESS THAN (2021),\r\n  PARTITION p2021 VALUES LESS THAN (2022),\r\n  PARTITION pmax VALUES LESS THAN MAXVALUE\r\n);\n"})}),"\n",(0,s.jsx)(e.p,{children:"Data from 2019 goes into p2019, 2020 into p2020, and so on."}),"\n",(0,s.jsx)(e.p,{children:"Query:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM sales WHERE sale_date BETWEEN '2020-01-01' AND '2020-12-31';\n"})}),"\n",(0,s.jsx)(e.p,{children:"MySQL only scans p2020, not the whole table."}),"\n",(0,s.jsx)(e.h4,{id:"list-partitioning",children:"LIST Partitioning"}),"\n",(0,s.jsx)(e.p,{children:"Rows are partitioned based on a list of specific values."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Good for categorical data (e.g., regions, departments)."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE employees (\r\n  id INT,\r\n  name VARCHAR(50),\r\n  region VARCHAR(10)\r\n)\r\nPARTITION BY LIST COLUMNS (region) (\r\n  PARTITION p_north VALUES IN ('North'),\r\n  PARTITION p_south VALUES IN ('South'),\r\n  PARTITION p_east VALUES IN ('East'),\r\n  PARTITION p_west VALUES IN ('West')\r\n);\n"})}),"\n",(0,s.jsx)(e.h4,{id:"hash-partitioning",children:"HASH Partitioning"}),"\n",(0,s.jsx)(e.p,{children:"Rows are distributed into partitions based on a hash function."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Good for evenly distributing data when values are unpredictable."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE orders (\r\n  order_id INT,\r\n  customer_id INT,\r\n  amount DECIMAL(10,2)\r\n)\r\nPARTITION BY HASH(customer_id) PARTITIONS 4;\n"})}),"\n",(0,s.jsx)(e.p,{children:"Rows are distributed across 4 partitions using a hash of customer_id.\r\nUseful for load balancing queries across partitions."}),"\n",(0,s.jsx)(e.h4,{id:"key-partitioning",children:"KEY Partitioning"}),"\n",(0,s.jsx)(e.p,{children:"Similar to HASH, but MySQL chooses the hash function internally."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Typically used with primary keys."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE products (\r\n  product_id INT PRIMARY KEY,\r\n  name VARCHAR(100),\r\n  price DECIMAL(10,2)\r\n)\r\nPARTITION BY KEY(product_id) PARTITIONS 3;\n"})}),"\n",(0,s.jsx)(e.p,{children:"MySQL automatically hashes product_id into 3 partitions."}),"\n",(0,s.jsx)(e.h3,{id:"practical-example-of-partitioning",children:"Practical Example of Partitioning"}),"\n",(0,s.jsx)(e.p,{children:"Imagine a website access log table with millions of rows per year:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE access_logs (\r\n  id INT AUTO_INCREMENT PRIMARY KEY,\r\n  log_date DATE NOT NULL,\r\n  user_id INT,\r\n  action VARCHAR(100)\r\n)\r\nPARTITION BY RANGE (YEAR(log_date)*100 + MONTH(log_date)) (\r\n  PARTITION p202201 VALUES LESS THAN (202202),\r\n  PARTITION p202202 VALUES LESS THAN (202203),\r\n  PARTITION p202203 VALUES LESS THAN (202204),\r\n  PARTITION pmax VALUES LESS THAN MAXVALUE\r\n);\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["January 2022 logs \u2192 ",(0,s.jsx)(e.code,{children:"p202201"})]}),"\n",(0,s.jsxs)(e.li,{children:["February 2022 logs \u2192 ",(0,s.jsx)(e.code,{children:"p202202"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Query example:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM access_logs WHERE log_date BETWEEN '2022-02-01' AND '2022-02-28';\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Only scans ",(0,s.jsx)(e.code,{children:"p202202"}),", making it much faster."]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},28453(n,e,i){i.d(e,{R:()=>a,x:()=>l});var r=i(96540);const s={},t=r.createContext(s);function a(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);