"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[71006],{9819(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"nginx/MIME Types","title":"MIME Types","description":"MIME (Multipurpose Internet Mail Extensions) types tell the client (browser) what kind of content is being sent, so the client knows how to handle or render it.","source":"@site/docs/nginx/12. MIME Types.md","sourceDirName":"nginx","slug":"/nginx/MIME Types","permalink":"/handbook/docs/nginx/MIME Types","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{},"sidebar":"nginxApiSidebar","previous":{"title":"Static Files","permalink":"/handbook/docs/nginx/Static Files"},"next":{"title":"Default Server Block","permalink":"/handbook/docs/nginx/Default Server Block"}}');var r=i(74848),t=i(28453);const l={},d=void 0,c={},o=[{value:"Why MIME Types Matter in NGINX",id:"why-mime-types-matter-in-nginx",level:2},{value:"How NGINX Determines MIME Types",id:"how-nginx-determines-mime-types",level:2},{value:"Core Directives for MIME Types",id:"core-directives-for-mime-types",level:2},{value:"Standard MIME Configuration (Recommended)",id:"standard-mime-configuration-recommended",level:2},{value:"The <code>mime.types</code> File Explained",id:"the-mimetypes-file-explained",level:2},{value:"MIME Type Resolution Example",id:"mime-type-resolution-example",level:2},{value:"default_type Directive",id:"default_type-directive",level:2},{value:"Overriding MIME Types (Custom Mapping)",id:"overriding-mime-types-custom-mapping",level:2},{value:"MIME Types Per Location",id:"mime-types-per-location",level:2},{value:"Disabling MIME Type Detection",id:"disabling-mime-type-detection",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Prevent MIME Sniffing",id:"prevent-mime-sniffing",level:3},{value:"Correct JavaScript MIME Type",id:"correct-javascript-mime-type",level:3},{value:"Common MIME-Related Issues",id:"common-mime-related-issues",level:2},{value:"Debugging MIME Types",id:"debugging-mime-types",level:2},{value:"Real-World Production Example",id:"real-world-production-example",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2}];function h(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"MIME (Multipurpose Internet Mail Extensions) types tell the client (browser) what kind of content is being sent, so the client knows how to handle or render it."}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"type/subtype"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"MIME Type"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"text/html"}),(0,r.jsx)(n.td,{children:"HTML page"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"text/css"}),(0,r.jsx)(n.td,{children:"CSS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"application/javascript"}),(0,r.jsx)(n.td,{children:"JavaScript"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"image/png"}),(0,r.jsx)(n.td,{children:"PNG image"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"application/pdf"}),(0,r.jsx)(n.td,{children:"PDF file"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"why-mime-types-matter-in-nginx",children:"Why MIME Types Matter in NGINX"}),"\n",(0,r.jsx)(n.p,{children:"Correct MIME types ensure:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Proper rendering in browsers"}),"\n",(0,r.jsx)(n.li,{children:"Correct file downloads"}),"\n",(0,r.jsx)(n.li,{children:"Security (avoid content sniffing)"}),"\n",(0,r.jsx)(n.li,{children:"Compatibility with clients and APIs"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Wrong MIME types can cause:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u274c Files downloading instead of rendering"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Broken web pages"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Security warnings"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-nginx-determines-mime-types",children:"How NGINX Determines MIME Types"}),"\n",(0,r.jsxs)(n.p,{children:["NGINX determines the ",(0,r.jsx)(n.code,{children:"Content-Type"})," header using this order:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Explicit ",(0,r.jsx)(n.code,{children:"types"})," mapping"]}),"\n",(0,r.jsxs)(n.li,{children:["Included ",(0,r.jsx)(n.code,{children:"mime.types"})," file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_type"})," fallback"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"core-directives-for-mime-types",children:"Core Directives for MIME Types"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Directive"}),(0,r.jsx)(n.th,{children:"Context"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"types"}),(0,r.jsx)(n.td,{children:"http, server, location"}),(0,r.jsx)(n.td,{children:"Map extensions \u2192 MIME types"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"include mime.types"}),(0,r.jsx)(n.td,{children:"http"}),(0,r.jsx)(n.td,{children:"Load standard mappings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"default_type"}),(0,r.jsx)(n.td,{children:"http, server, location"}),(0,r.jsx)(n.td,{children:"Fallback MIME type"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"standard-mime-configuration-recommended",children:"Standard MIME Configuration (Recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"http {\r\n    include mime.types;\r\n    default_type application/octet-stream;\r\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime.types"})," contains hundreds of standard mappings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"application/octet-stream"})," forces download for unknown files"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"the-mimetypes-file-explained",children:["The ",(0,r.jsx)(n.code,{children:"mime.types"})," File Explained"]}),"\n",(0,r.jsx)(n.p,{children:"Typical Location"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"/etc/nginx/mime.types\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example Content"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"types {\r\n    text/html html;\r\n    text/css css;\r\n    application/javascript js;\r\n    image/jpeg jpg jpeg;\r\n    image/png png;\r\n    application/json json;\r\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple extensions can map to one MIME type"}),"\n",(0,r.jsx)(n.li,{children:"NGINX matches by file extension"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"mime-type-resolution-example",children:"MIME Type Resolution Example"}),"\n",(0,r.jsx)(n.p,{children:"Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"root /var/www/html;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Files"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/var/www/html/\r\n\u251c\u2500\u2500 index.html\r\n\u251c\u2500\u2500 style.css\r\n\u251c\u2500\u2500 app.js\r\n\u251c\u2500\u2500 logo.png\r\n\u251c\u2500\u2500 data.json\n"})}),"\n",(0,r.jsx)(n.p,{children:"Client Receives"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"File"}),(0,r.jsx)(n.th,{children:"Content-Type"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"index.html"}),(0,r.jsx)(n.td,{children:"text/html"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"style.css"}),(0,r.jsx)(n.td,{children:"text/css"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"app.js"}),(0,r.jsx)(n.td,{children:"application/javascript"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"logo.png"}),(0,r.jsx)(n.td,{children:"image/png"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"data.json"}),(0,r.jsx)(n.td,{children:"application/json"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"default_type-directive",children:"default_type Directive"}),"\n",(0,r.jsx)(n.p,{children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"default_type mime-type;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"default_type text/plain;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used when no MIME match exists"}),"\n",(0,r.jsx)(n.li,{children:"Overrides default behavior if defined in lower context"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overriding-mime-types-custom-mapping",children:"Overriding MIME Types (Custom Mapping)"}),"\n",(0,r.jsxs)(n.p,{children:["Example: Force ",(0,r.jsx)(n.code,{children:".log"})," Files to Download"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"types {\r\n    text/plain log;\r\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example: Force File Download"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"location /downloads/ {\r\n    default_type application/octet-stream;\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"mime-types-per-location",children:"MIME Types Per Location"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"location /media/ {\r\n    types {\r\n        video/mp4 mp4;\r\n    }\r\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Overrides MIME handling only for ",(0,r.jsx)(n.code,{children:"/media/"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"disabling-mime-type-detection",children:"Disabling MIME Type Detection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"types { }\r\ndefault_type application/octet-stream;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All files downloaded"}),"\n",(0,r.jsx)(n.li,{children:"Useful for secure file servers"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"prevent-mime-sniffing",children:"Prevent MIME Sniffing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"add_header X-Content-Type-Options nosniff;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Prevents browsers from guessing content type."}),"\n",(0,r.jsx)(n.h3,{id:"correct-javascript-mime-type",children:"Correct JavaScript MIME Type"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"application/javascript js;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Avoids browser console warnings."}),"\n",(0,r.jsx)(n.h2,{id:"common-mime-related-issues",children:"Common MIME-Related Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Problem"}),(0,r.jsx)(n.th,{children:"Cause"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CSS not loading"}),(0,r.jsx)(n.td,{children:"Wrong MIME type"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"JS blocked"}),(0,r.jsx)(n.td,{children:"text/plain instead of JS"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Images download"}),(0,r.jsx)(n.td,{children:"Incorrect mapping"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Browser warnings"}),(0,r.jsxs)(n.td,{children:["Missing ",(0,r.jsx)(n.code,{children:"nosniff"})]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"debugging-mime-types",children:"Debugging MIME Types"}),"\n",(0,r.jsx)(n.p,{children:"Check Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"curl -I http://example.com/style.css\n"})}),"\n",(0,r.jsx)(n.p,{children:"Expected:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Content-Type: text/css\n"})}),"\n",(0,r.jsx)(n.h2,{id:"real-world-production-example",children:"Real-World Production Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"http {\r\n    include mime.types;\r\n    default_type application/octet-stream;\r\n\r\n    server {\r\n        listen 80;\r\n        root /var/www/app;\r\n\r\n        location / {\r\n            try_files $uri $uri/ =404;\r\n        }\r\n\r\n        add_header X-Content-Type-Options nosniff;\r\n    }\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Not including ",(0,r.jsx)(n.code,{children:"mime.types"})]}),"\n",(0,r.jsxs)(n.li,{children:["Wrong JS MIME (",(0,r.jsx)(n.code,{children:"text/javascript"})," in strict setups)"]}),"\n",(0,r.jsxs)(n.li,{children:["Overriding ",(0,r.jsx)(n.code,{children:"default_type"})," globally"]}),"\n",(0,r.jsx)(n.li,{children:"Relying on browser sniffing"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453(e,n,i){i.d(n,{R:()=>l,x:()=>d});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);