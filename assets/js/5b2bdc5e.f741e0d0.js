"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[7847],{2839(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"nextjs/ISR","title":"Incremental Site Rendering","description":"Normally in Static Site Generation (SSG), all pages are pre-rendered at build time.","source":"@site/docs/nextjs/5. ISR.md","sourceDirName":"nextjs","slug":"/nextjs/ISR","permalink":"/handbook/docs/nextjs/ISR","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Incremental Site Rendering","sidebar_position":6},"sidebar":"nextjsSidebar","previous":{"title":"Static Side Generation","permalink":"/handbook/docs/nextjs/SSG"},"next":{"title":"Router","permalink":"/handbook/docs/nextjs/Router"}}');var t=r(4848),i=r(8453);const l={title:"Incremental Site Rendering",sidebar_position:6},a=void 0,d={},o=[{value:"How ISR Works",id:"how-isr-works",level:2},{value:"How to Use ISR",id:"how-to-use-isr",level:2},{value:"When to Use ISR",id:"when-to-use-isr",level:2},{value:"How SSR Works",id:"how-ssr-works",level:2},{value:"Best use cases for SSR",id:"best-use-cases-for-ssr",level:2},{value:"Data Fetching in SSR",id:"data-fetching-in-ssr",level:2},{value:"How to Use SSR",id:"how-to-use-ssr",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Normally in Static Site Generation (SSG), all pages are pre-rendered at build time.\r\nBut this creates a problem:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If your data changes frequently (like blog posts, product prices, news articles), the static pages become outdated unless you rebuild the whole app."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"ISR solves this by allowing you to update static pages in the background without rebuilding the entire site."}),"\n",(0,t.jsx)(n.p,{children:"With ISR:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pages are generated once at build time (like SSG)."}),"\n",(0,t.jsx)(n.li,{children:"After deployment, if the data changes, the pages can be incrementally regenerated on the server."}),"\n",(0,t.jsx)(n.li,{children:"Users see cached (old) pages until regeneration is done in the background, then the new static version replaces it."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-isr-works",children:"How ISR Works"}),"\n",(0,t.jsx)(n.p,{children:"With ISR:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Pages are generated at build time like SSG."}),"\n",(0,t.jsx)(n.li,{children:"After deployment, pages can be regenerated incrementally on the server when data changes."}),"\n",(0,t.jsx)(n.li,{children:"Users see the cached old page until regeneration finishes."}),"\n",(0,t.jsx)(n.li,{children:"Once regeneration is complete, the new static page replaces the old version automatically."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The key to ISR is the ",(0,t.jsx)(n.code,{children:"revalidate"})," property in ",(0,t.jsx)(n.code,{children:"getStaticProps"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"revalidate: N\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The page is cached for N seconds."}),"\n",(0,t.jsx)(n.li,{children:"After N seconds, the next request triggers regeneration in the background."}),"\n",(0,t.jsx)(n.li,{children:"While regenerating, users still see the old page (no downtime)."}),"\n",(0,t.jsx)(n.li,{children:"After regeneration, the new page replaces the old page for future requests."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-use-isr",children:"How to Use ISR"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// pages/blog/[id].tsx\r\nimport { GetStaticPaths, GetStaticProps, NextPage } from "next";\r\nimport { useRouter } from "next/router";\r\n\r\ntype Post = {\r\n  id: string;\r\n  title: string;\r\n  body: string;\r\n};\r\n\r\ninterface BlogPostProps {\r\n  post: Post;\r\n}\r\n\r\nconst BlogPost: NextPage<BlogPostProps> = ({ post }) => {\r\n  const router = useRouter();\r\n\r\n  // Show loading state if fallback page is being generated\r\n  if (router.isFallback) {\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className="p-6">\r\n      <h1 className="text-2xl font-bold">{post.title}</h1>\r\n      <p className="mt-4">{post.body}</p>\r\n      <small>Last updated: {new Date().toLocaleTimeString()}</small>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogPost;\r\n\r\n// Pre-generate some blog pages at build time\r\nexport const getStaticPaths: GetStaticPaths = async () => {\r\n  const posts: Post[] = await fetch(\r\n    "https://jsonplaceholder.typicode.com/posts?_limit=5"\r\n  ).then((res) => res.json());\r\n\r\n  const paths = posts.map((post) => ({\r\n    params: { id: post.id.toString() },\r\n  }));\r\n\r\n  return {\r\n    paths,\r\n    fallback: "blocking", // Other pages generated on-demand with ISR\r\n  };\r\n};\r\n\r\n// Fetch data and enable ISR\r\nexport const getStaticProps: GetStaticProps<BlogPostProps> = async ({\r\n  params,\r\n}) => {\r\n  const post: Post = await fetch(\r\n    `https://jsonplaceholder.typicode.com/posts/${params?.id}`\r\n  ).then((res) => res.json());\r\n\r\n  return {\r\n    props: { post },\r\n    revalidate: 10, // Regenerate page in the background every 10 seconds\r\n  };\r\n};\n'})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getStaticPaths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pre-generates a few pages at build time (",(0,t.jsx)(n.code,{children:"/blog/1"}),", ",(0,t.jsx)(n.code,{children:"/blog/2"}),", \u2026)."]}),"\n",(0,t.jsxs)(n.li,{children:["Other pages are generated on-demand via ",(0,t.jsx)(n.code,{children:'fallback: "blocking"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getStaticProps"})," with ",(0,t.jsx)(n.code,{children:"revalidate"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Page is cached and served for ",(0,t.jsx)(n.code,{children:"revalidate"})," seconds."]}),"\n",(0,t.jsx)(n.li,{children:"After that, the next request triggers background regeneration."}),"\n",(0,t.jsx)(n.li,{children:"Users see the old page while regeneration occurs."}),"\n",(0,t.jsx)(n.li,{children:"Once done, the new page replaces the old one."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["User experience","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pages load fast (static)."}),"\n",(0,t.jsx)(n.li,{children:"Data is relatively fresh without rebuilding the entire site."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-isr",children:"When to Use ISR"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Good for:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Blogs, news sites, product listings, documentation"}),"\n",(0,t.jsx)(n.li,{children:"Data that changes often but not on every request"}),"\n",(0,t.jsx)(n.li,{children:"Apps where rebuilding the whole site is slow or expensive"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Not ideal for:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Real-time data (stock prices, chat apps, dashboards \u2192 use SSR or CSR instead)."}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"server-side-rendering",children:"Server-Side Rendering"}),"\n",(0,t.jsx)(n.p,{children:"Server-Side Rendering (SSR) means that the HTML for a page is generated on each request at runtime on the server. The server fetches the data, renders the React components into HTML, and then sends the fully rendered page to the client."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The client receives a ready-to-view HTML page."}),"\n",(0,t.jsx)(n.li,{children:"After the initial render, React hydrates the page and takes over for interactivity."}),"\n",(0,t.jsx)(n.li,{children:"Every request triggers server-side data fetching and rendering."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In Next.js, SSR is used when:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"You need dynamic content that changes per request."}),"\n",(0,t.jsx)(n.li,{children:"SEO is important (search engines see the full HTML)."}),"\n",(0,t.jsx)(n.li,{children:"You can\u2019t pre-render at build time (data changes too often)."}),"\n",(0,t.jsx)(n.li,{children:"You want fresh data on every page load."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-ssr-works",children:"How SSR Works"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"User requests a page."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Next.js runs ",(0,t.jsx)(n.code,{children:"getServerSideProps"})," on the server at request time."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Server fetches data \u2192 generates HTML."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Server sends HTML to browser \u2192 user sees fully rendered page."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"React hydrates \u2192 adds interactivity."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-use-cases-for-ssr",children:"Best use cases for SSR"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Dynamic, real-time content"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Example: Stock prices, sports scores, live auctions."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"SEO-sensitive pages with changing data"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Example: News sites, event listings."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Personalized pages"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Example: User-specific dashboards that must be indexed."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Authenticated pages"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Example: Profile pages, order histories (when SEO is still needed)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always fresh data (fetched at request time)."}),"\n",(0,t.jsx)(n.li,{children:"SEO-friendly (full HTML delivered)."}),"\n",(0,t.jsx)(n.li,{children:"Supports personalization (different users \u2192 different content)."}),"\n",(0,t.jsx)(n.li,{children:"No rebuilds needed for data changes."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Disadvantages"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Slower response than SSG (server must fetch + render each request)."}),"\n",(0,t.jsx)(n.li,{children:"Higher server load (compute required per request)."}),"\n",(0,t.jsx)(n.li,{children:"Not as fast as CDN-served static files."}),"\n",(0,t.jsx)(n.li,{children:"Scaling requires more server resources."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"data-fetching-in-ssr",children:"Data Fetching in SSR"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"getServerSideProps"})," \u2192 Runs on every request."]}),"\n",(0,t.jsx)(n.li,{children:"Data is fetched at runtime \u2192 passed to the page as props."}),"\n",(0,t.jsx)(n.li,{children:"Unlike SSG, nothing is pre-built at build time."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-use-ssr",children:"How to Use SSR"}),"\n",(0,t.jsxs)(n.p,{children:["In Next.js, define ",(0,t.jsx)(n.code,{children:"getServerSideProps"})," in your page component."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// pages/profile.tsx\r\n\r\nimport { GetServerSideProps } from "next";\r\n\r\ntype User = {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n};\r\n\r\nexport default function Profile({ user }: { user: User }) {\r\n  return (\r\n    <div className="p-6">\r\n      <h1 className="text-xl font-bold">Server-Side Rendered Profile</h1>\r\n      <p>\r\n        <strong>ID:</strong> {user.id}\r\n      </p>\r\n      <p>\r\n        <strong>Name:</strong> {user.name}\r\n      </p>\r\n      <p>\r\n        <strong>Email:</strong> {user.email}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps: GetServerSideProps = async () => {\r\n  const res = await fetch("https://jsonplaceholder.typicode.com/users/1");\r\n  const user: User = await res.json();\r\n\r\n  return {\r\n    props: { user }, // Sent to the component\r\n  };\r\n};\n'})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getServerSideProps"})," \u2192 Runs on every request."]}),"\n",(0,t.jsx)(n.li,{children:"Server fetches the latest user data."}),"\n",(0,t.jsx)(n.li,{children:"Page is rendered into HTML on the server."}),"\n",(0,t.jsx)(n.li,{children:"User immediately sees a fully rendered profile page."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why SSR is the Right Choice Here"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Profile data changes often \u2192 Needs fresh fetch each time."}),"\n",(0,t.jsx)(n.li,{children:"SEO matters \u2192 Profile pages should be indexed."}),"\n",(0,t.jsx)(n.li,{children:"Server can fetch + render the data on demand."}),"\n",(0,t.jsx)(n.li,{children:"Unlike CSR, the user doesn\u2019t see a loading spinner first."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>a});var s=r(6540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);