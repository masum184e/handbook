"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[8625],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>c});var i=s(96540);const r={},d=i.createContext(r);function l(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(d.Provider,{value:n},e.children)}},82777(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"redis/Redis CLI","title":"Redis CLI","description":"- redis-cli is the command-line interface for interacting with a Redis server.","source":"@site/docs/redis/4. Redis CLI.md","sourceDirName":"redis","slug":"/redis/Redis CLI","permalink":"/handbook/docs/redis/Redis CLI","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{}}');var r=s(74848),d=s(28453);const l={},c=void 0,o={},t=[{value:"Redis CLI Configuration",id:"redis-cli-configuration",level:2},{value:"Redis <code>redis.conf</code> File",id:"redis-redisconf-file",level:2},{value:"Main Sections of <code>redis.conf</code>",id:"main-sections-of-redisconf",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redis-cli"})," is the command-line interface for interacting with a Redis server."]}),"\n",(0,r.jsx)(n.li,{children:"It allows you to send commands, configure settings, and test data operations."}),"\n",(0,r.jsxs)(n.li,{children:["By default, it connects to:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Host: ",(0,r.jsx)(n.code,{children:"127.0.0.1"})," (localhost)"]}),"\n",(0,r.jsxs)(n.li,{children:["Port: ",(0,r.jsx)(n.code,{children:"6379"})," (default Redis port)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"redis-cli-configuration",children:"Redis CLI Configuration"}),"\n",(0,r.jsx)(n.p,{children:"You can connect with options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Specify host & port"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it redis-server redis-cli -h 127.0.0.1 -p 6379\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"With authentication (if Redis has a password)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it redis-server redis-cli -a mypassword\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run a single command without entering interactive mode"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it redis-server redis-cli PING\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"redis-redisconf-file",children:["Redis ",(0,r.jsx)(n.code,{children:"redis.conf"})," File"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"redis.conf"})," file is the main configuration file for Redis."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"When Redis starts, it reads this file to load settings."}),"\n",(0,r.jsxs)(n.li,{children:["By default, it\u2019s located in ",(0,r.jsx)(n.code,{children:"/etc/redis/redis.conf"})," (Linux) or inside the Redis source folder."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Docker container does not include a ",(0,r.jsx)(n.code,{children:"redis.conf"})," file by default."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a folder on your host(project): ",(0,r.jsx)(n.code,{children:"mkdir redis-config"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Download a ",(0,r.jsx)(n.code,{children:"redis.conf"})," template: ",(0,r.jsx)(n.code,{children:"curl -o redis-config/redis.conf https://raw.githubusercontent.com/redis/redis/7.0/redis.conf"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"redis.conf"})," in Docker container"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'docker stop redis-server\r\ndocker rm redis-server\r\n\r\ndocker run -d ^\r\n  --name redis-server ^\r\n  -p 6379:6379 ^\r\n  -v "%cd%\\redis-config\\redis.conf":/usr/local/etc/redis/redis.conf ^\r\n  redis redis-server /usr/local/etc/redis/redis.conf\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If no config is given, Redis starts with default settings"}),"\n",(0,r.jsxs)(n.h3,{id:"main-sections-of-redisconf",children:["Main Sections of ",(0,r.jsx)(n.code,{children:"redis.conf"})]}),"\n",(0,r.jsxs)(n.p,{children:["Here are the most important settings you\u2019ll encounter in ",(0,r.jsx)(n.code,{children:"redis.conf"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"General Settings"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Daemonize (background mode): ",(0,r.jsx)(n.code,{children:"daemonize yes"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"yes \u2192 Redis runs in the background."}),"\n",(0,r.jsx)(n.li,{children:"no \u2192 Redis runs in the foreground (useful for debugging)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["PID file (process ID storage): ",(0,r.jsx)(n.code,{children:"pidfile /var/run/redis/redis-server.pid"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Networking"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Port Redis listens on ",(0,r.jsx)(n.code,{children:"port 6379"}),", Default is 6379. You can change it if needed."]}),"\n",(0,r.jsxs)(n.li,{children:["Bind address: ",(0,r.jsx)(n.code,{children:"bind 127.0.0.1"}),", Redis will only accept connections from localhost."]}),"\n",(0,r.jsxs)(n.li,{children:["If you want to allow external access: ",(0,r.jsx)(n.code,{children:"bind 0.0.0.0"}),". But for security, you must add a password (see below)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Require password for clients: ",(0,r.jsx)(n.code,{children:"requirepass myStrongPassword"})]}),"\n",(0,r.jsxs)(n.li,{children:["After setting this, every client must authenticate: ",(0,r.jsx)(n.code,{children:"redis-cli -a myStrongPassword"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Persistence (Saving Data)"}),"\n",(0,r.jsx)(n.p,{children:"Redis stores data in memory, but persistence ensures data is saved to disk."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"RDB snapshots (point-in-time saves):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"save 900 1   # Save if at least 1 key changed in 900 seconds (15 min)\r\nsave 300 10  # Save if at least 10 keys changed in 300 seconds (5 min)\r\nsave 60 10000 # Save if 10000 keys changed in 60 seconds\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"AOF (Append-Only File) logging:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"appendonly yes\r\nappendfsync everysec\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keeps a log of all write operations."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"everysec"})," \u2192 syncs data every second (good balance between performance and safety)."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Memory Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Maximum memory limit:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"maxmemory 256mb\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Redis will not use more than 256 MB RAM."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Eviction policy (when memory is full):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"maxmemory-policy allkeys-lru\n"})}),"\n",(0,r.jsx)(n.p,{children:"Options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"noeviction"})," \u2192 return error when memory full."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"allkeys-lru"})," \u2192 remove least recently used keys."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"volatile-lru"})," \u2192 remove LRU keys with TTL set."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Logging"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Log level:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"loglevel notice\n"})}),"\n",(0,r.jsx)(n.p,{children:"Options: debug, verbose, notice, warning."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Log file path:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"logfile /var/log/redis/redis-server.log\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Replication (Master/Replica setup)"}),"\n",(0,r.jsx)(n.p,{children:"Make this Redis a replica of another:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"replicaof 192.168.1.100 6379\n"})}),"\n",(0,r.jsx)(n.p,{children:"This makes Redis sync data from the given master."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);