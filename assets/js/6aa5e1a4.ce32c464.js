"use strict";(globalThis.webpackChunkhandbook=globalThis.webpackChunkhandbook||[]).push([[25075],{6527(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"nginx/Index Files","title":"Index Files","description":"An index file is the default file that NGINX serves when a client requests a directory URI (i.e., a URL ending with /) without specifying a filename.","source":"@site/docs/nginx/14. Index Files.md","sourceDirName":"nginx","slug":"/nginx/Index Files","permalink":"/handbook/docs/nginx/Index Files","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{},"sidebar":"nginxApiSidebar","previous":{"title":"Default Server Block","permalink":"/handbook/docs/nginx/Default Server Block"},"next":{"title":"Auto Index","permalink":"/handbook/docs/nginx/Auto Index"}}');var s=i(74848),l=i(28453);const d={},t=void 0,c={},o=[{value:"Core Directive: index",id:"core-directive-index",level:2},{value:"Simple Example",id:"simple-example",level:2},{value:"index Directive in Location Blocks",id:"index-directive-in-location-blocks",level:2},{value:"Interaction with <code>try_files</code>",id:"interaction-with-try_files",level:2},{value:"Directory Index Listing",id:"directory-index-listing",level:2},{value:"Examples With Multiple Index Files",id:"examples-with-multiple-index-files",level:2},{value:"Index Files and Reverse Proxy",id:"index-files-and-reverse-proxy",level:2},{value:"Index Files in HTTPS",id:"index-files-in-https",level:2},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Debugging Index Issues",id:"debugging-index-issues",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Real-World Production Example",id:"real-world-production-example",level:2},{value:"Summary",id:"summary",level:2}];function x(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"An index file is the default file that NGINX serves when a client requests a directory URI (i.e., a URL ending with /) without specifying a filename."}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://example.com/   \u2192 NGINX serves /var/www/html/index.html\r\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"This avoids 404 errors and allows automatic loading of homepage or default page."}),"\n",(0,s.jsx)(n.h2,{id:"core-directive-index",children:"Core Directive: index"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"index file1 file2 ...;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Context: ",(0,s.jsx)(n.code,{children:"http"}),", ",(0,s.jsx)(n.code,{children:"server"}),", ",(0,s.jsx)(n.code,{children:"location"})]}),"\n",(0,s.jsx)(n.p,{children:"Explanation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"NGINX tries each file in order until one exists"}),"\n",(0,s.jsx)(n.li,{children:"Stops at the first match"}),"\n",(0,s.jsx)(n.li,{children:"Can be overridden per location"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"simple-example",children:"Simple Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"server {\r\n    listen 80;\r\n    server_name example.com;\r\n\r\n    root /var/www/html;\r\n    index index.html index.htm;\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Behavior"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Request"}),(0,s.jsx)(n.th,{children:"Resolved File"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/var/www/html/index.html"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/about/"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/var/www/html/about/index.html"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"/docs/"})," (no index)"]}),(0,s.jsx)(n.td,{children:"404"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"index-directive-in-location-blocks",children:"index Directive in Location Blocks"}),"\n",(0,s.jsx)(n.p,{children:"You can override default index behavior per path:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"location /docs/ {\r\n    index home.html main.html;\r\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Request: ",(0,s.jsx)(n.code,{children:"/docs/"})," \u2192 NGINX checks:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/var/www/html/docs/home.html"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"/var/www/html/docs/main.html"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"First existing file served"}),"\n",(0,s.jsxs)(n.h2,{id:"interaction-with-try_files",children:["Interaction with ",(0,s.jsx)(n.code,{children:"try_files"})]}),"\n",(0,s.jsxs)(n.p,{children:["For modern setups, ",(0,s.jsx)(n.code,{children:"try_files"})," is often combined with ",(0,s.jsx)(n.code,{children:"index"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"location / {\r\n    try_files $uri $uri/ /index.html;\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$uri"})," \u2192 file requested"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$uri/"})," \u2192 directory requested \u2192 check for index"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/index.html"})," \u2192 fallback for single-page apps (SPA)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Common for React, Angular, Vue apps"}),"\n",(0,s.jsx)(n.h2,{id:"directory-index-listing",children:"Directory Index Listing"}),"\n",(0,s.jsx)(n.p,{children:"NGINX does not automatically list files if no index exists (returns 403/404)"}),"\n",(0,s.jsx)(n.p,{children:"To enable listing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"location /downloads/ {\r\nautoindex on;\r\nindex index.html;\r\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"index.html"})," exists \u2192 served"]}),"\n",(0,s.jsx)(n.p,{children:"Else \u2192 directory listing"}),"\n",(0,s.jsx)(n.h2,{id:"examples-with-multiple-index-files",children:"Examples With Multiple Index Files"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"server {\r\n   root /var/www/html;\r\n   index index.php index.html index.htm;\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"NGINX checks in order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"index.php"})," \u2192 for PHP apps"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"index.html"})," \u2192 fallback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"index.htm"})," \u2192 last resort"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Useful for sites with legacy files"}),"\n",(0,s.jsx)(n.h2,{id:"index-files-and-reverse-proxy",children:"Index Files and Reverse Proxy"}),"\n",(0,s.jsx)(n.p,{children:"When NGINX is used as a reverse proxy, you can still serve static index files:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"location / {\r\nroot /var/www/app;\r\nindex index.html;\r\ntry_files $uri $uri/ @backend;\r\n}\r\n\r\nlocation @backend {\r\nproxy_pass http://backend;\r\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Static files served directly if they exist"}),"\n",(0,s.jsx)(n.li,{children:"Requests for missing files forwarded to backend"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"index-files-in-https",children:"Index Files in HTTPS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"server {\r\n    listen 443 ssl;\r\n    server_name example.com;\r\n\r\n        root /var/www/html;\r\n        index index.html;\r\n\r\n        ssl_certificate /etc/ssl/certs/example.crt;\r\n        ssl_certificate_key /etc/ssl/private/example.key;\r\n\r\n    }\n"})}),"\n",(0,s.jsx)(n.p,{children:"Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"same as HTTP"}),"\n",(0,s.jsx)(n.li,{children:"Index files are critical for default pages under SSL"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Mistake"}),(0,s.jsx)(n.th,{children:"Effect"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Not defining index"}),(0,s.jsx)(n.td,{children:"403/404 on directory access"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Wrong order of files"}),(0,s.jsx)(n.td,{children:"Wrong file served"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Missing trailing slash in directory"}),(0,s.jsx)(n.td,{children:"301 redirect occurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Index file missing"}),(0,s.jsx)(n.td,{children:"404"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Conflicting index in locations"}),(0,s.jsx)(n.td,{children:"Unintended file served"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"debugging-index-issues",children:"Debugging Index Issues"}),"\n",(0,s.jsx)(n.p,{children:"Test with curl:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl -I http://example.com/\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.code,{children:"Location:"})," header (redirects)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Check NGINX error logs for missing index files:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"tail -f /var/log/nginx/error.log\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Always define index in http or server context"}),"\n",(0,s.jsx)(n.li,{children:"Use multiple files in order for backward compatibility"}),"\n",(0,s.jsx)(n.li,{children:"Combine try_files for SPA applications"}),"\n",(0,s.jsx)(n.li,{children:"Avoid exposing directory listings unless intentional"}),"\n",(0,s.jsx)(n.li,{children:"Ensure proper file permissions for security"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"real-world-production-example",children:"Real-World Production Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    server {\r\n    listen 80;\r\n    server_name example.com www.example.com;\r\n\r\n        root /var/www/example;\r\n        index index.php index.html index.htm;\r\n\r\n        location / {\r\n            try_files $uri $uri/ /index.php?$query_string;\r\n        }\r\n\r\n        location ~ \\.php$ {\r\n            fastcgi_pass unix:/run/php/php-fpm.sock;\r\n            include fastcgi_params;\r\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\r\n        }\r\n\r\n    }\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"NGINX serves static index files if they exist"}),"\n",(0,s.jsx)(n.li,{children:"Falls back to PHP for dynamic pages"}),"\n",(0,s.jsx)(n.li,{children:"Ensures backward compatibility and SPA support"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"index files define default page for a directory request"}),"\n",(0,s.jsx)(n.li,{children:"Directive supports multiple files in order"}),"\n",(0,s.jsxs)(n.li,{children:["Works with ",(0,s.jsx)(n.code,{children:"root"}),", ",(0,s.jsx)(n.code,{children:"alias"}),", ",(0,s.jsx)(n.code,{children:"try_files"}),", and proxy setups"]}),"\n",(0,s.jsx)(n.li,{children:"Critical for serving static sites, SPAs, and default landing pages"}),"\n",(0,s.jsx)(n.li,{children:"Must be combined with proper security and caching for production"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},28453(e,n,i){i.d(n,{R:()=>d,x:()=>t});var r=i(96540);const s={},l=r.createContext(s);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);