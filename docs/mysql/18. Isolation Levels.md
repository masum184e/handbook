---
sidebar_position: 19
---

Isolation levels in MySQL are one of the most important (but often confusing) parts of transactions. They directly control how multiple transactions interact with each other and what concurrency issues can occur.

**What is Isolation in Transactions?**

- Isolation = how much one transaction is protected from the side effects of other concurrent transactions.
- MySQL implements this using Isolation Levels, which balance between performance (concurrency) and safety (consistency).

**Problems Isolation Levels Prevent**

When multiple transactions run at the same time, different anomalies may occur:

1. **Dirty Read** â†’ Reading uncommitted changes from another transaction.

2. **Non-Repeatable Read** â†’ A rowâ€™s value changes between two reads in the same transaction.

3. **Phantom Read** â†’ New rows appear/disappear in a range query between two reads.

## MySQL Isolation Levels

MySQL supports 4 standard isolation levels (SQL standard).

| Level                                         | Dirty Read   | Non-Repeatable Read | Phantom Read                                         | Performance             |
| --------------------------------------------- | ------------ | ------------------- | ---------------------------------------------------- | ----------------------- |
| **READ UNCOMMITTED**                          | âŒ Allowed   | âŒ Allowed          | âŒ Allowed                                           | ðŸ”¥ Fastest (least safe) |
| **READ COMMITTED**                            | âœ… Prevented | âŒ Allowed          | âŒ Allowed                                           | âš¡ Fast                 |
| **REPEATABLE READ** (default in MySQL InnoDB) | âœ… Prevented | âœ… Prevented        | âŒ Allowed (but handled by Next-Key Locks in InnoDB) | âš–ï¸ Balanced             |
| **SERIALIZABLE**                              | âœ… Prevented | âœ… Prevented        | âœ… Prevented                                         | ðŸŒ Slowest (most safe)  |

> Run each transaction in seperate terminal

### READ UNCOMMITTED

Transactions can see uncommitted changes made by others â†’ dirty reads.

Rarely used because it risks reading invalid data.

```sql
-- Transaction A
START TRANSACTION;
UPDATE accounts SET balance = balance - 1000 WHERE account_id = 1;

-- Transaction B (before A commits)
SELECT balance FROM accounts WHERE account_id = 1;
```

Transaction B might see Aliceâ€™s balance reduced before A commits, even if A later ROLLBACKs â†’ invalid data

### READ COMMITTED

A transaction only sees committed data.

Prevents dirty reads

But allows non-repeatable reads.

```sql
-- Transaction A
START TRANSACTION;
SELECT balance FROM accounts WHERE account_id = 1; -- Alice = 5000

-- Transaction B (commits)
UPDATE accounts SET balance = balance - 1000 WHERE account_id = 1;
COMMIT;

-- Transaction A reads again
SELECT balance FROM accounts WHERE account_id = 1; -- Alice = 4000
```

Same query in Transaction A gives different results â†’ non-repeatable read.

### REPEATABLE READ (MySQL Default)

- Prevents dirty reads
- Prevents non-repeatable reads
- But phantom rows can appear in range queries.

```sql
-- Transaction A
START TRANSACTION;
SELECT * FROM accounts WHERE balance > 4000; -- Returns Alice

-- Transaction B
INSERT INTO accounts VALUES (3, 'Charlie', 4500);
COMMIT;

-- Transaction A runs the same query
SELECT * FROM accounts WHERE balance > 4000;
-- Returns Alice + Charlie â†’ Phantom row appeared
```

InnoDB adds next-key locking to reduce phantom reads, but it can still occur depending on queries.

### SERIALIZABLE

- Highest isolation level.
- Transactions are executed as if they run one after another (sequentially).
- Prevents dirty reads, non-repeatable reads, phantom reads.
- But slow â†’ causes locking and reduces concurrency.

```sql
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

START TRANSACTION;
SELECT * FROM accounts WHERE balance > 4000;
```

If another transaction tries to insert/update rows that affect this query, it must wait until the first one commits.

## How to Set Isolation Level in MySQL

```sql
-- Session level (only for current connection)
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;

-- Global level (affects all new connections)
SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;
```

Check current level:

```sql
SELECT @@transaction_isolation;
```

In practice:

- MySQL default = REPEATABLE READ (best tradeoff).
- Banking systems â†’ SERIALIZABLE for maximum safety.
- High-performance apps â†’ READ COMMITTED for speed with acceptable risks.
