---
title: Stack
sidebar_position: 16
---

## Implmentation

- For stack implementation `top` begin with `-1`.
- For queue implementation `front` begin with `0` and `rear` begin with `-1`.

## Infix → Postfix (Shunting Yard using Stack)
- If operand → add to result
- If `(` → push to stack
- If `)` → pop until `(`
- If operator → pop higher or equal precedence operators first

```cpp
int precedence(char op) {
    if (op == '^') return 3;
    if (op == '*' || op == '/') return 2;
    if (op == '+' || op == '-') return 1;
    return -1;
}

string infixToPostfix(string s) {
    stack<char> st;
    string result = "";

    for (char c : s) {

        // If operand
        if (isalnum(c)) {
            result += c;
        }

        // If '('
        else if (c == '(') {
            st.push(c);
        }

        // If ')'
        else if (c == ')') {
            while (!st.empty() && st.top() != '(') {
                result += st.top();
                st.pop();
            }
            st.pop(); // remove '('
        }

        // Operator
        else {
            while (!st.empty() && precedence(st.top()) >= precedence(c)) {
                result += st.top();
                st.pop();
            }
            st.push(c);
        }
    }

    while (!st.empty()) {
        result += st.top();
        st.pop();
    }

    return result;
}
```
## Infix → Prefix
- Reverse string
- Swap `(` and `)`
- Convert to Postfix
- Reverse result

```cpp
string infixToPrefix(string s) {

    reverse(s.begin(), s.end());

    // Swap brackets
    for (char &c : s) {
        if (c == '(') c = ')';
        else if (c == ')') c = '(';
    }

    string postfix = infixToPostfix(s);

    reverse(postfix.begin(), postfix.end());

    return postfix;
}
```

## Postfix → Infix
- If operand → push as string
- If operator → pop two operands
- Form: `(operand1 operator operand2)`
- Push back

```cpp
string postfixToInfix(string s) {
    stack<string> st;

    for (char c : s) {

        if (isalnum(c)) {
            st.push(string(1, c));
        }
        else {
            string op2 = st.top(); st.pop();
            string op1 = st.top(); st.pop();

            string temp = "(" + op1 + c + op2 + ")";
            st.push(temp);
        }
    }

    return st.top();
}
```
## Prefix → Infix
- Traverse from right to left
- Same logic as postfix

```cpp
string prefixToInfix(string s) {
    stack<string> st;

    for (int i = s.length() - 1; i >= 0; i--) {

        char c = s[i];

        if (isalnum(c)) {
            st.push(string(1, c));
        }
        else {
            string op1 = st.top(); st.pop();
            string op2 = st.top(); st.pop();

            string temp = "(" + op1 + c + op2 + ")";
            st.push(temp);
        }
    }

    return st.top();
}
```

### Summary
| Conversion      | Method Used        |
| --------------- | ------------------ |
| Infix → Postfix | Stack + Precedence |
| Infix → Prefix  | Reverse + Postfix  |
| Postfix → Infix | Stack (L→R)        |
| Prefix → Infix  | Stack (R→L)        |
