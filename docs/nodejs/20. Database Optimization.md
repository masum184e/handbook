## Connection Pooling

Creating a DB connection per request is expensive.

```js
const mysql = require('mysql2/promise');

const pool = mysql.createPool({
  host: 'localhost',
  user: 'root',
  database: 'app',
  connectionLimit: 10
});
```

## Caching Database Results

Caching avoids repeated queries for frequently requested data.

**Types of Caching**

| Type              | Example            |
| ----------------- | ------------------ |
| In-memory cache   | Node.js Map, LRU   |
| Distributed cache | Redis, Memcached   |
| HTTP cache        | CDN, browser cache |

**In-Memory Cache**

```js
const cache = new Map();

async function getUser(id) {
  if (cache.has(id)) {
    return cache.get(id); // Cache hit
  }

  const user = await db.query('SELECT * FROM users WHERE id = ?', [id]);
  cache.set(id, user); // Cache miss -> store
  return user;
}
```
**Redis Cache**
```js
const redis = require('redis');
const client = redis.createClient();

async function getUser(id) {
  const cacheKey = `user:${id}`;

  const cached = await client.get(cacheKey);
  if (cached) {
    return JSON.parse(cached); // Cache hit
  }

  const user = await db.query('SELECT * FROM users WHERE id = ?', [id]);

  // Cache for 60 seconds
  await client.setEx(cacheKey, 60, JSON.stringify(user));

  return user;
}
```