## Running in Cluster Mode (Multi-CPU)

Node.js runs on a single CPU by default. PM2 can scale your app across cores.

```
pm2 start app.js -i max
```

- `-i max` → runs one process per CPU core
- PM2 load-balances incoming requests automatically

Perfect for production servers

### Using an Ecosystem File (Best Practice)

Instead of long CLI commands, use an ecosystem config (`ecosystem.config.js`)
```js
module.exports = {
  apps: [
    {
      name: "my-node-app",
      script: "app.js",
      instances: "max",
      exec_mode: "cluster",
      env: {
        NODE_ENV: "development",
        PORT: 3000
      },
      env_production: {
        NODE_ENV: "production",
        PORT: 8080
      }
    }
  ]
};
```
Start with:
```
pm2 start ecosystem.config.js --env production
```
### Auto-Start on Server Reboot

Very important for deployment
```
pm2 startup
pm2 save
```
- `startup` → generates a system startup script
- `save` → saves the current process list

Now your app comes back automatically after reboot.