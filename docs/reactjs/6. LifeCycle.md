The lifecycle has three main phases:

1. Mounting – Component is created and added to the DOM
2. Updating – Component updates due to state or props changes
3. Unmounting – Component is removed from the DOM

## Mounting Phase

### `constructor()`

When it runs: Before the component is mounted.

Purpose:

- Initialize state
- Bind event handlers

```jsx
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
}
```

- `super(props)` allows access to `this.props`
- State is initialized here

### `static getDerivedStateFromProps()`

When it runs: Before render, both on mount and update.

Purpose: Sync state with props (rarely used)

```jsx
static getDerivedStateFromProps(props, state) {
  if (props.reset) {
    return { count: 0 };
  }
  return null;
}
```

- Must return an object to update state or `null`
- No access to `this`

### `render()`

When it runs: Every time the component needs to render.

Purpose: Return JSX (UI)

```jsx
render() {
  return (
    <div>
      <h1>{this.state.count}</h1>
    </div>
  );
}
```

- Must be pure
- No state updates or side effects allowed

### `componentDidMount()`

When it runs: After the component is rendered to the DOM.

Purpose:

- API calls
- DOM manipulation
- Subscriptions

```jsx
componentDidMount() {
  console.log("Component mounted");
}
```

- Safe place for side effects
- Runs only once

## Updating Phase

### `shouldComponentUpdate()`

When it runs: Before re-rendering.

Purpose: Performance optimization

```jsx
shouldComponentUpdate(nextProps, nextState) {
  return nextState.count !== this.state.count;
}
```

- Return `true` to re-render
- Return `false` to skip render

### `getSnapshotBeforeUpdate()`

When it runs: Right before DOM updates.

Purpose: Capture DOM information (e.g., scroll position)

```jsx
getSnapshotBeforeUpdate(prevProps, prevState) {
  return window.scrollY;
}
```

### `componentDidUpdate()`

When it runs: After DOM updates.

Purpose: React to state/props changes

```jsx
componentDidUpdate(prevProps, prevState, snapshot) {
  console.log("Previous scroll:", snapshot);
}
```

Often paired with `getSnapshotBeforeUpdate`

## Unmounting Phase

### `componentWillUnmount()`

When it runs: Just before component is removed.

Purpose: Cleanup

```jsx
componentWillUnmount() {
  console.log("Component removed");
}
```

- Clear timers, cancel API calls, unsubscribe

## Lifecycle in Function Components (Hooks)

Hooks replace lifecycle methods.

`useEffect()` — All Lifecycle in One

### Mounting

```jsx
useEffect(() => {
  console.log("Component mounted");
}, []);
```

- Empty dependency array → runs once

### Updating

```jsx
useEffect(() => {
  console.log("Count updated");
}, [count]);
```

- Runs when count changes

### Unmounting

```jsx
useEffect(() => {
  return () => {
    console.log("Component unmounted");
  };
}, []);
```

- Cleanup function runs on unmount
