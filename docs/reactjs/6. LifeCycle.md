The lifecycle has three main phases:

1. Mounting – Component is created and added to the DOM
2. Updating – Component updates due to state or props changes
3. Unmounting – Component is removed from the DOM

- Mounting: constructor, static getDerivedStateFromProps, render, componentDidMount
- Updating: getDerivedStateFromProps, shouldComponentUpdate, render, getSnapshotBeforeUpdate, componentDidUpdate
- Unmounting: componentWillUnmount
- Error Handling: componentDidCatch

## Mounting Phase

It refers to the process of rendering a component for the first time and adding it to the DOM

**Mounting Sequence::**

1. [Constructor](#constructor) - Initializes state and props
2. [static getDerivedStateFromProps](#static-getderivedstatefromprops) - Update state based on initial props
3. [render](#render) - create and insert virtual DOM
4. [componentDidMount](#componentdidmount) - execute any side effects

### `constructor()`

The constructor method is the first method called when a component is created. It’s used to set up the initial state of the component and bind event hanler. It is called before the component mount.

```jsx
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
}
```

- `super(props)` allows access to `this.props`
- State is initialized here

### `static getDerivedStateFromProps()`

It is used to `update the state` before the component mount `based on the props`.

When it runs: Before render, both on mount and update.

Purpose: Sync state with props (rarely used)

```jsx
static getDerivedStateFromProps(props, state) {
  if (props.reset) {
    return { count: 0 };
  }
  return null;
}
```

- Must return an object to update state or `null`
- No access to `this`

### `render()`

This method is required in every React component. It returns the JSX that describes the component's UI. This method is pure, meaning it should not modify the state or interact with the DOM.

When it runs: Every time the component needs to render.

Purpose: Return JSX (UI)

```jsx
render() {
  return (
    <div>
      <h1>{this.state.count}</h1>
    </div>
  );
}
```

- Must be pure
- No state updates or side effects allowed

### `componentDidMount()`

This method is called immediately after the component is inserted into the DOM. It’s typically used for performing side effects like data fetching, setting up subscriptions, or manually modifying the DOM.

It is executed once in a lifecycle of a component which is just after the first `render()`.

When it runs: After the component is rendered to the DOM.

Purpose:

- API calls
- DOM manipulation
- Subscriptions

```jsx
componentDidMount() {
  console.log("Component mounted");
}
```

- Safe place for side effects
- Runs only once

## Updating Phase

### `shouldComponentUpdate()`

When it runs: Before re-rendering.

Purpose: Performance optimization

```jsx
shouldComponentUpdate(nextProps, nextState) {
  return nextState.count !== this.state.count;
}
```

- Return `true` to re-render
- Return `false` to skip render

### `getSnapshotBeforeUpdate()`

When it runs: Right before DOM updates.

Purpose: Capture DOM information (e.g., scroll position)

```jsx
getSnapshotBeforeUpdate(prevProps, prevState) {
  return window.scrollY;
}
```

### `componentDidUpdate()`

When it runs: After DOM updates.

Purpose: React to state/props changes

```jsx
componentDidUpdate(prevProps, prevState, snapshot) {
  console.log("Previous scroll:", snapshot);
}
```

Often paired with `getSnapshotBeforeUpdate`

## Unmounting Phase

### `componentWillUnmount()`

When it runs: Just before component is removed.

Purpose: Cleanup

```jsx
componentWillUnmount() {
  console.log("Component removed");
}
```

- Clear timers, cancel API calls, unsubscribe

## Lifecycle in Function Components (Hooks)

Hooks replace lifecycle methods.

`useEffect()` — All Lifecycle in One

### Mounting

```jsx
useEffect(() => {
  console.log("Component mounted");
}, []);
```

- Empty dependency array → runs once

### Updating

```jsx
useEffect(() => {
  console.log("Count updated");
}, [count]);
```

- Runs when count changes

### Unmounting

```jsx
useEffect(() => {
  return () => {
    console.log("Component unmounted");
  };
}, []);
```

- Cleanup function runs on unmount
