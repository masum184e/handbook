---
sidebar_position: 13
---

Introspection is the process of reading an existing database schema and generating a Prisma schema (`schema.prisma`) that matches it.

In Prisma, introspection is done using:

```prisma
npx prisma db pull
```

- This updates your `schema.prisma` to reflect tables, columns, relations, and types in the database.
- Essentially, it lets Prisma reverse-engineer your database into Prisma models.

## When to Use Introspection

1. Working with an existing database
   - You didnâ€™t start the project with Prisma, but now want Prisma Client.
2. Syncing Prisma schema with DB changes
   - If someone else modified the DB schema, you can update your Prisma schema without manually editing it.
3. Exploring unfamiliar databases
   - Quickly generate models for an existing DB.

## How `prisma db pull` Works

1. Reads the database connection from `.env`:
   ```env
   DATABASE_URL="postgresql://user:password@localhost:5432/mydb"
   ```
2. Connects to the database.
3. Reads all tables, columns, indexes, foreign keys, and types.
4. Updates your `schema.prisma` with models, fields, types, relations, and attributes.

## Example Workflow of Introspection

### 1. Setup

Assume you have a PostgreSQL database with these tables:

```sql
-- Table: users
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255),
  email VARCHAR(255) UNIQUE
);

-- Table: posts
CREATE TABLE posts (
  id SERIAL PRIMARY KEY,
  title VARCHAR(255),
  content TEXT,
  author_id INT REFERENCES users(id)
);
```

### 2. Configure `.env`

```env
DATABASE_URL="postgresql://postgres:password@localhost:5432/mydb"
```

### 3. Run Introspection

```bash
npx prisma db pull
```

- Prisma reads the tables `users` and `posts`.
- Generates `schema.prisma` automatically.

### 4. Generated Prisma Schema

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id    Int    @id @default(autoincrement())
  name  String
  email String @unique
  posts posts[]
}

model posts {
  id       Int    @id @default(autoincrement())
  title    String
  content  String?
  author_id Int
  users    users @relation(fields: [author_id], references: [id])
}
```
