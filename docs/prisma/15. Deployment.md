---
sidebar_position: 15
---

## Environment-specific configs
When deploying a Prisma application, you often have different environments—like development, staging, and production. Each environment usually has different databases, credentials, and other settings. Managing these configs properly ensures security, stability, and flexibility.

Prisma supports environment-specific configurations primarily through environment variables and `.env` files.

You can maintain separate `.env` files for each environment:

- `.env.development`
- `.env.staging`
- `.env.production`

Then, when running Prisma commands or your app, you load the correct `.env` file:
```bash
# Development
cp .env.development .env && npx prisma generate

# Production
cp .env.production .env && npx prisma generate
```

**Using `dotenv-cli` for multiple environments**

You can simplify environment-specific setup using `dotenv-cli`:
```bash
# Install
npm install -D dotenv-cli

# Run commands with specific env
dotenv -e .env.production -- npx prisma migrate deploy
dotenv -e .env.staging -- node server.js
```

This allows you to keep one Prisma schema, but dynamically point it to different databases depending on the environment.

## Seeding databases
Database seeding is the process of populating a database with initial or default data. This is useful for:

- Development and testing
- Setting up staging environments
- Initial production setup (like default admin accounts, roles, or reference data)

Prisma supports seeding via JavaScript/TypeScript scripts that use the Prisma Client.

### Configure a Seed Script

1. In your package.json, define a seed command:
```json
{
  "prisma": {
    "seed": "ts-node prisma/seed.ts"
  }
}
```
2. Create the seed file: `prisma/seed.ts`
```ts
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

async function main() {
  // Create default users
  await prisma.user.upsert({
    where: { email: "admin@example.com" },
    update: {},
    create: {
      name: "Admin",
      email: "admin@example.com",
      role: "ADMIN",
    },
  });

  await prisma.user.upsert({
    where: { email: "user@example.com" },
    update: {},
    create: {
      name: "User",
      email: "user@example.com",
      role: "USER",
    },
  });

  console.log("Database seeding completed!");
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
```
- `upsert` ensures idempotency—running the seed multiple times won’t create duplicate records.
- Using `PrismaClient` allows you to interact with the database the same way your app does.
- Always disconnect at the end to avoid hanging connections.

