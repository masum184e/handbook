---
sidebar_position: 16
---

When deploying Prisma applications, proper error handling is critical to ensure:

- Stability of your production system
- Quick identification of issues
- Proper response to users


Prisma interacts with databases, so errors can occur at different layers:

1. **Query errors** – invalid queries, missing records
2. **Constraint errors** – unique constraint violations, foreign key errors
3. **Connection errors** – database unreachable or timeout
4. **Runtime errors** – programming mistakes

## Catching Prisma Errors

Prisma provides specialized error classes via `@prisma/client/runtime`. The most commonly used is `Prisma.PrismaClientKnownRequestError`.

```ts
import { PrismaClient, Prisma } from "@prisma/client";

const prisma = new PrismaClient();

async function createUser(email: string, name: string) {
  try {
    const user = await prisma.user.create({
      data: { email, name },
    });
    return user;
  } catch (error) {
    if (error instanceof Prisma.PrismaClientKnownRequestError) {
      // Known Prisma errors
      if (error.code === "P2002") {
        // Unique constraint failed
        console.error("Unique constraint failed:", error.meta);
        throw new Error("Email already exists.");
      }
    }
    // Unknown or other errors
    console.error("Unexpected error:", error);
    throw error;
  }
}
```
- `P2002` → Unique constraint violation
- `PrismaClientKnownRequestError` allows fine-grained handling of Prisma-specific errors
- Always log errors for debugging, but avoid exposing raw DB errors to users

## Common Prisma Error Codes

| Code    | Meaning                            |
| ------- | ---------------------------------- |
| `P2000` | Value too long for column          |
| `P2002` | Unique constraint failed           |
| `P2003` | Foreign key constraint failed      |
| `P2025` | Record not found for update/delete |
| `P1001` | Database connection error          |

## Logging Queries & Errors

Prisma allows logging of queries, info, warnings, and errors. This is helpful for performance monitoring and debugging production issues.
```ts
const prisma = new PrismaClient({
  log: [
    { emit: "stdout", level: "query" },
    { emit: "stdout", level: "info" },
    { emit: "stdout", level: "warn" },
    { emit: "stdout", level: "error" },
  ],
});
```
- `query` → logs every SQL query executed
- `info` → general info events
- `warn` → warnings, e.g., potential issues
- `error` → errors
