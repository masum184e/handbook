---
title: Error Handling
sidebar_position: 7
---

**Why Handle Errors?**

- By default, if a route doesn’t exist, Express will just hang without a clear response.
- You should explicitly define how your app responds to not found (404) errors and unexpected server errors (500, etc.).

**Express Error Handling Rules**

1. 404 Errors → Add a middleware at the end of your routes to catch unmatched requests.

2. Other Errors → Use a special error-handling middleware with four parameters:

   ```ts
   (err, req, res, next) => { ... }
   ```

## 404 Handler

```ts
app.use((req, res) => {
  res.status(404).json({ success: false, message: "Resource not found" });
});
```

- This middleware is placed after all other routes.
- If no route matches, Express falls through to this handler.
- Responds with status 404 Not Found.

## Global Error Handler

```ts
app.use((err: Error, req: Request, res: Response, next: NextFunction) => {
  res.status(500).json({
    success: false,
    message: "Internal Server Error",
    error: err.message,
  });
});
```

- Handles any error thrown in routes or middleware.
- Must have 4 arguments → (`err`, `req`, `res`, `next`) so Express knows it’s an error handler.
- It can be placed any where in the code, but must contain 4 arguments.

## Catching and Responding to Errors

In an Express.js application, errors can happen in many places (routes, middleware, database queries, etc.). To keep the app reliable and user-friendly, you should catch errors and respond consistently.

There are two main ways to handle errors:

1. Synchronous errors → handled with `try/catch` or by throwing inside routes.

2. Asynchronous errors → handled with `try/catch` in async functions and by passing the error to `next(err)`.

All errors eventually flow into the error-handling middleware, where you send a proper response.

### Synchronous errors

```ts
app.get("/sync-error", (req: Request, res: Response) => {
  throw new Error("Synchronous error occurred!");
});
```

- Throwing an error inside a route is automatically caught by Express if an error handler exists.

### Asynchronous errors

Asynchronous operations (like database calls or API requests) need explicit error handling.

```ts
app.get(
  "/async-error",
  async (req: Request, res: Response, next: NextFunction) => {
    try {
      await Promise.reject(new Error("Async error occurred!"));
    } catch (err) {
      next(err);
    }
  }
);
```

- In `async/await` routes, errors must be passed to `next(err)` manually.
- Otherwise, Express won’t catch them automatically.
